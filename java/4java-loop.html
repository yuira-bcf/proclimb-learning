<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第4章 繰り返しと制御文の組み合わせ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../shared/common.css">
    <style>
      :root {
        --primary: #34C759;
        --primary-dark: #2AA648;
        --primary-light: #F0FDF4;
        --primary-lighter: #BBF7D0;
      }
      .nav-category-links { display: none; }
    </style>
</head>
<body>
    <!-- グローバルナビゲーション -->
    <nav class="global-nav"></nav>
    <script src="../shared/js/nav-java.js"></script>

    <div class="container">
        <header class="chapter-header">
            <div class="chapter-badge"><span class="material-icons">menu_book</span> Chapter</div>
            <div class="chapter-number">4</div>
            <h1 class="chapter-title">繰り返しと制御文の組み合わせ</h1>
        </header>

        <nav class="toc">
            <h2 class="toc-title"><span class="material-icons">list_alt</span> この章の内容</h2>
            <ul class="toc-list">
                <li class="toc-item"><span class="toc-number">4-1</span><span>whileによる繰り返し</span></li>
                <li class="toc-item"><span class="toc-number">4-2</span><span>forによる繰り返し</span></li>
                <li class="toc-item"><span class="toc-number">4-3</span><span>制御文の組み合わせ</span></li>
                <li class="toc-item"><span class="toc-number">4-4</span><span>繰り返しの制御</span></li>
            </ul>
        </nav>

        <!-- セクション 4-1 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 4-1</span>
                <h2 class="section-title">whileによる繰り返し</h2>
            </div>

            <div class="intro-text">
                <p>繰り返し処理は、同じような処理を何度も実行する場合に使います。while文は「条件が満たされている間」繰り返すため、繰り返し回数が事前にわからない場合（ユーザー入力待ち、ファイル読み込みなど）に適しています。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.1 while文</h3>
                <div class="content-block">
                    <p>条件がtrueの間、処理を繰り返します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
while文による基本的な繰り返し処理を示すコード

## 実装要件
- カウンタ変数を0で初期化
- 条件が真の間ループを継続
- ループ内でカウンタをインクリメント

## 使用するJava構文
- while文
- 関係演算子（<）
- インクリメント演算子（++）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">while文</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>int i = 0;
while (i &lt; 5) {
    System.out.println(i);  // 0, 1, 2, 3, 4
    i++;
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>while文</h4>
                                <div class="syntax-pattern">while (条件) {
  処理
}</div>
                                <p>条件がtrueの間、ブロック内の処理を繰り返し実行します。条件がfalseなら1回も実行されません。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.2 do-while文</h3>
                <div class="content-block">
                    <p>最低1回は処理を実行し、その後条件を判定します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
do-while文による繰り返し処理を示すコード

## 実装要件
- 最低1回は処理を実行してから条件判定
- 通常のループと条件がfalseでも1回実行される例を示す
- whileとの違いを明確にする

## 使用するJava構文
- do-while文
- 関係演算子（<）
- インクリメント演算子（++）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">do-while文</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>int i = 0;
do {
    System.out.println(i);  // 0, 1, 2, 3, 4
    i++;
} while (i &lt; 5);

// 条件がfalseでも1回は実行
int j = 10;
do {
    System.out.println(j);  // 10（1回は実行）
} while (j &lt; 5);</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>do-while文</h4>
                                <div class="syntax-pattern">do {
  処理
} while (条件);</div>
                                <p>最低1回は処理を実行してから条件を判定します。条件がfalseでも1回は必ず実行されます。最後にセミコロンが必要です。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 4-2 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 4-2</span>
                <h2 class="section-title">forによる繰り返し</h2>
            </div>

            <div class="intro-text">
                <p>for文は繰り返し回数が明確な場合に最適です。配列やリストの全要素を処理する場面で最も頻繁に使われます。拡張for文（for-each）を使えば、インデックスを意識せずに簡潔にコードが書けます。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.1 for文</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
基本的なfor文による繰り返し処理を示すコード

## 実装要件
- for文の基本構文（初期化; 条件; 更新）を示す
- 0から4までの数値を出力
- 複数変数を使用した応用例も示す

## 使用するJava構文
- for文
- 関係演算子（<）
- インクリメント/デクリメント演算子（++, --）
- カンマ演算子（複数変数の初期化・更新）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">基本的なfor文</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>// 構文: for (初期化; 条件; 更新) { 処理 }
for (int i = 0; i &lt; 5; i++) {
    System.out.println(i);  // 0, 1, 2, 3, 4
}

// 複数の変数を使用
for (int i = 0, j = 10; i &lt; j; i++, j--) {
    System.out.println(i + " " + j);
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>for文</h4>
                                <div class="syntax-pattern">for (初期化; 条件; 更新) {
  処理
}</div>
                                <p>初期化は最初に1回実行、条件がtrueの間繰り返し、更新は各反復の最後に実行されます。回数が決まっている繰り返しに最適です。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.2 拡張for文（for-each）</h3>
                <div class="content-block">
                    <p>配列やコレクションの全要素を順番に処理します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
拡張for文（for-each）による配列・リストの要素処理を示すコード

## 実装要件
- 配列の全要素を順番に処理する例
- Listの全要素を順番に処理する例
- インデックスを使わない簡潔な記述

## 使用するJava構文
- 拡張for文（for-each）: for (型 変数 : 配列/コレクション)
- 配列リテラル
- Arrays.asList()メソッド
- List&lt;String&gt;</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">拡張for文</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>// 配列の処理
int[] numbers = {1, 2, 3, 4, 5};
for (int num : numbers) {
    System.out.println(num);
}

// リストの処理
List&lt;String&gt; names = Arrays.asList("Alice", "Bob", "Charlie");
for (String name : names) {
    System.out.println(name);
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>拡張for文（for-each）</h4>
                                <div class="syntax-pattern">for (型 変数 : 配列/コレクション) {
  処理
}</div>
                                <p>配列やコレクションの全要素を順番に処理します。インデックスを使わずに簡潔に書けますが、要素の削除はできません。</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-header">
                            <span class="warning-box-icon"><span class="material-icons">warning</span></span>
                            <span class="warning-box-title">拡張for文の制限</span>
                        </div>
                        <p>拡張for文ではインデックスを取得できません。また、ループ中に要素を削除すると<code>ConcurrentModificationException</code>が発生します。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 4-3 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 4-3</span>
                <h2 class="section-title">制御文の組み合わせ</h2>
            </div>

            <div class="intro-text">
                <p>実際のプログラムでは、ループの中にif文を入れたり、ループを入れ子にしたりすることがよくあります。このとき、変数のスコープ（有効範囲）を正しく理解していないと、予期せぬエラーが発生します。二重ループは表形式のデータ処理や座標計算で頻出します。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.1 制御文のネストと変数のスコープ</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
for文における変数のスコープ（有効範囲）を示すコード

## 実装要件
- ループ変数iがループ内でのみ有効であることを示す
- ループ内で宣言した変数tempのスコープを示す
- スコープ外でのアクセスがエラーになることをコメントで説明

## 使用するJava構文
- for文
- 変数のスコープ（ブロックスコープ）
- 算術演算子（*）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">変数のスコープ</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>for (int i = 0; i &lt; 3; i++) {
    int temp = i * 2;  // ループ内でのみ有効
    System.out.println(temp);
}
// System.out.println(i);     // エラー：iはスコープ外
// System.out.println(temp);  // エラー：tempもスコープ外</code></pre>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.2 繰り返し文のネスト</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
二重ループ（ネストしたfor文）で九九表を出力するコード

## 実装要件
- 外側ループで行（1-9）を制御
- 内側ループで列（1-9）を制御
- 3桁右揃えで掛け算の結果を出力

## 使用するJava構文
- ネストしたfor文（二重ループ）
- System.out.printf()（書式指定出力）
- 算術演算子（*）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">二重ループ（九九表）</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>for (int i = 1; i &lt;= 9; i++) {
    for (int j = 1; j &lt;= 9; j++) {
        System.out.printf("%3d", i * j);
    }
    System.out.println();
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 4-4 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 4-4</span>
                <h2 class="section-title">繰り返しの制御</h2>
            </div>

            <div class="intro-text">
                <p>ループの途中で処理を中断したり、特定の条件をスキップしたりする制御が必要な場面があります。break文とcontinue文を使いこなすことで、複雑なループ処理も効率的に書けるようになります。ラベル付きbreakは多重ループから一気に抜ける際に便利です。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.1 無限ループ</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
無限ループの2つの書き方を示すコード

## 実装要件
- while(true)による無限ループ
- for(;;)による無限ループ
- break文による終了条件の設定方法

## 使用するJava構文
- while文（無限ループ: while(true)）
- for文（無限ループ: for(;;)）
- break文</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">無限ループの書き方</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>// while版
while (true) {
    // 処理
    if (条件) break;  // 終了条件でbreak
}

// for版
for (;;) {
    // 処理
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>無限ループ</h4>
                                <div class="syntax-pattern">while (true) {
  処理
}

// または
for (;;) {
  処理
}</div>
                                <p>条件が常にtrueのため永久に繰り返します。必ずbreak文で終了条件を設定しないとプログラムが停止しません。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.2 break文</h3>
                <div class="content-block">
                    <p>ループを即座に終了します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
break文によるループの中断を示すコード

## 実装要件
- for文で0から9まで繰り返し
- 特定条件（i==5）でループを終了
- breakによりループから抜けることを確認

## 使用するJava構文
- for文
- if文
- break文
- 関係演算子（<, ==）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">break文</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>for (int i = 0; i &lt; 10; i++) {
    if (i == 5) {
        break;  // i==5でループ終了
    }
    System.out.println(i);  // 0, 1, 2, 3, 4
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>break文</h4>
                                <div class="syntax-pattern">break;</div>
                                <p>現在のループを即座に終了し、ループの直後の処理に移動します。switch文でも使用されます。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.3 continue文</h3>
                <div class="content-block">
                    <p>現在の反復をスキップし、次の反復に進みます。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
continue文による特定の反復のスキップを示すコード

## 実装要件
- for文で0から4まで繰り返し
- 特定条件（i==2）で現在の反復をスキップ
- continueにより次のループに進むことを確認

## 使用するJava構文
- for文
- if文
- continue文
- 関係演算子（<, ==）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">continue文</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>for (int i = 0; i &lt; 5; i++) {
    if (i == 2) {
        continue;  // i==2をスキップ
    }
    System.out.println(i);  // 0, 1, 3, 4
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>continue文</h4>
                                <div class="syntax-pattern">continue;</div>
                                <p>現在の反復の残りの処理をスキップし、次の反復に進みます。ループ自体は終了しません。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.4 ラベルによる制御</h3>
                <div class="content-block">
                    <p>ネストしたループで外側のループを制御する場合に使用します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
ラベル付きbreak文による多重ループの制御を示すコード

## 実装要件
- 二重ループに対してラベル（outer）を付与
- 特定条件で外側のループを一気に終了
- 通常のbreakとの違いを示す

## 使用するJava構文
- ネストしたfor文（二重ループ）
- ラベル（outer:）
- ラベル付きbreak文（break outer）
- 論理AND演算子（&&）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">ラベル付きbreak/continue</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>outer:
for (int i = 0; i &lt; 3; i++) {
    for (int j = 0; j &lt; 3; j++) {
        if (i == 1 &amp;&amp; j == 1) {
            break outer;  // 外側のループを終了
        }
        System.out.println(i + ", " + j);
    }
}
// 出力: 0,0  0,1  0,2  1,0</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>ラベル付きbreak/continue</h4>
                                <div class="syntax-pattern">ラベル名:
for (...) {
  ...
  break ラベル名;
}</div>
                                <p>多重ループで外側のループを制御する場合に使用します。ラベルを指定することで、どのループを終了/スキップするか明示できます。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 練習問題・解答 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Exercise</span>
                <h2 class="section-title">4章 練習問題</h2>
            </div>
            <div class="exercise-list">
                <div class="exercise-item">
                    <div class="exercise-number">Q1</div>
                    <div class="exercise-content">
                        <p>以下のコードの出力回数は何回ですか？</p>
                        <div class="code-block">
                            <pre class="code-content"><code>int i = 10;
do {
    System.out.println(i);
    i++;
} while (i &lt; 5);</code></pre>
                        </div>
                        <ol type="A"><li>0回</li><li>1回</li><li>5回</li><li>10回</li></ol>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <span class="section-number">Answer</span>
                <h2 class="section-title">4章 解説・解答</h2>
            </div>
            <div class="answer-list">
                <div class="answer-item">
                    <div class="answer-header">Q1の解答: B</div>
                    <div class="answer-content">
                        <p>do-while文は条件判定前に最低1回処理を実行します。iは10から始まり、条件(i &lt; 5)はfalseですが、1回は出力されます。</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer"><p>Java Silver 試験対策 教科書</p></footer>

    <div class="page-nav">
        <a href="3java-operator.html" class="page-nav-btn prev"><span>&#8592;</span><div><div class="page-nav-label">前の章</div><div class="page-nav-title">第3章</div></div></a>
        <a href="5java-class.html" class="page-nav-btn next"><div><div class="page-nav-label">次の章</div><div class="page-nav-title">第5章</div></div><span>&#8594;</span></a>
    </div>

    <script>
        function toggleMenu() {
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            toggle.classList.toggle('active');
            menu.classList.toggle('active');
        }
        document.addEventListener('click', function(e) {
            const nav = document.querySelector('.global-nav');
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            if (!nav.contains(e.target) && menu.classList.contains('active')) {
                toggle.classList.remove('active');
                menu.classList.remove('active');
            }
        });
    </script>
    <script src="../shared/demo.js"></script>
</body>
</html>
