<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Appendix A: よくあるエラー一覧 - JavaScript入門</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../shared/common.css">
  <style>
    :root {
      --primary: #007AFF;
      --primary-dark: #0062CC;
      --primary-light: #EFF6FF;
      --primary-lighter: #BFDBFE;
    }
    .nav-category-links { display: none; }
  </style>
</head>
<body>
  <nav class="global-nav"></nav>
  <script src="../shared/js/nav-javascript.js"></script>

  <div class="container">
    <!-- チャプターヘッダー -->
    <header class="chapter-header">
      <div class="chapter-badge">Appendix</div>
      <div class="chapter-number">A</div>
      <h1 class="chapter-title">よくあるエラー一覧</h1>
      <p class="chapter-subtitle">エラーを理解し、素早く解決しよう</p>
    </header>

    <!-- 目次 -->
    <nav class="toc">
      <h2 class="toc-title">この章の内容</h2>
      <ul class="toc-list">
        <li class="toc-item"><span class="toc-number">A-1</span>SyntaxError（構文エラー）</li>
        <li class="toc-item"><span class="toc-number">A-2</span>ReferenceError（参照エラー）</li>
        <li class="toc-item"><span class="toc-number">A-3</span>TypeError（型エラー）</li>
        <li class="toc-item"><span class="toc-number">A-4</span>RangeError（範囲エラー）</li>
        <li class="toc-item"><span class="toc-number">A-5</span>エラーメッセージの読み方</li>
      </ul>
    </nav>

    <!-- イントロダクション -->
    <section class="section">
      <div class="intro-text">
        <p>プログラミングにおいてエラーは避けられないものです。しかし、エラーメッセージを正しく理解できれば、問題を素早く解決できます。このページでは、JavaScriptでよく遭遇するエラーとその対処法を解説します。</p>
      </div>

      <div class="info-box">
        <div class="info-box-title">エラーは怖くない！</div>
        <div class="info-box-content">
          <p>エラーはプログラムが「ここに問題があるよ」と教えてくれるサインです。エラーメッセージをしっかり読めば、ほとんどの問題は解決できます。落ち着いて対処しましょう。</p>
        </div>
      </div>
    </section>

    <!-- Section A-1 SyntaxError -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section A-1</span>
        <h2 class="section-title">SyntaxError（構文エラー）</h2>
      </div>

      <div class="intro-text">
        <p>SyntaxErrorは、JavaScriptの文法ルールに違反している場合に発生します。プログラムの実行前にJavaScriptエンジンがコードを解析する段階で検出されます。</p>
      </div>

      <div class="subsection">
        <h3>原因</h3>
        <ul>
          <li>括弧やクォートの閉じ忘れ</li>
          <li>カンマやセミコロンの付け忘れ</li>
          <li>予約語の誤使用</li>
          <li>スペルミスや全角文字の混入</li>
        </ul>
      </div>

      <div class="subsection">
        <h3>よくある例と対処法</h3>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">括弧の閉じ忘れ</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 括弧が閉じていない</span>
<span class="keyword">if</span> (<span class="variable">age</span> >= <span class="number">18</span> {  <span class="comment">// SyntaxError: Unexpected token '{'</span>
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"成人です"</span>);
}

<span class="comment">// 配列の括弧が閉じていない</span>
<span class="keyword">const</span> <span class="variable">fruits</span> = [<span class="string">"りんご"</span>, <span class="string">"バナナ"</span>  <span class="comment">// SyntaxError</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 括弧を正しく閉じる</span>
<span class="keyword">if</span> (<span class="variable">age</span> >= <span class="number">18</span>) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"成人です"</span>);
}

<span class="comment">// 配列も正しく閉じる</span>
<span class="keyword">const</span> <span class="variable">fruits</span> = [<span class="string">"りんご"</span>, <span class="string">"バナナ"</span>];</code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">クォートの閉じ忘れ</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// クォートが閉じていない</span>
<span class="keyword">const</span> <span class="variable">message</span> = <span class="string">"Hello World;</span>  <span class="comment">// SyntaxError: Invalid or unexpected token</span>

<span class="comment">// クォートの種類が一致しない</span>
<span class="keyword">const</span> <span class="variable">name</span> = <span class="string">'田中";</span>  <span class="comment">// SyntaxError</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// クォートを正しく閉じる</span>
<span class="keyword">const</span> <span class="variable">message</span> = <span class="string">"Hello World"</span>;

<span class="comment">// クォートの種類を揃える</span>
<span class="keyword">const</span> <span class="variable">name</span> = <span class="string">'田中'</span>;</code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">全角文字の混入</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 全角スペースが入っている</span>
<span class="keyword">const</span>　<span class="variable">name</span> = <span class="string">"田中"</span>;  <span class="comment">// SyntaxError（constの後が全角スペース）</span>

<span class="comment">// 全角のセミコロン</span>
<span class="keyword">const</span> <span class="variable">age</span> = <span class="number">25</span>；  <span class="comment">// SyntaxError</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 半角スペースを使用</span>
<span class="keyword">const</span> <span class="variable">name</span> = <span class="string">"田中"</span>;

<span class="comment">// 半角のセミコロン</span>
<span class="keyword">const</span> <span class="variable">age</span> = <span class="number">25</span>;</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="info-box warning">
        <div class="info-box-title">対処のコツ</div>
        <div class="info-box-content">
          <ul>
            <li>エラーメッセージに表示される行番号の前後を確認する</li>
            <li>VS Codeなどのエディタの波線（赤い下線）を確認する</li>
            <li>括弧のハイライト機能を活用する</li>
            <li>全角文字が混入していないか確認する（特にコピペ時）</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section A-2 ReferenceError -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section A-2</span>
        <h2 class="section-title">ReferenceError（参照エラー）</h2>
      </div>

      <div class="intro-text">
        <p>ReferenceErrorは、存在しない変数や関数を参照しようとした場合に発生します。変数のスコープや宣言忘れが主な原因です。</p>
      </div>

      <div class="subsection">
        <h3>原因</h3>
        <ul>
          <li>変数を宣言せずに使用</li>
          <li>変数名のスペルミス</li>
          <li>スコープ外の変数へのアクセス</li>
          <li>宣言前の変数へのアクセス（TDZ）</li>
        </ul>
      </div>

      <div class="subsection">
        <h3>よくある例と対処法</h3>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">宣言していない変数の使用</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 変数を宣言せずに使用</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">userName</span>);  <span class="comment">// ReferenceError: userName is not defined</span>

<span class="comment">// スペルミス</span>
<span class="keyword">const</span> <span class="variable">message</span> = <span class="string">"Hello"</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">mesage</span>);  <span class="comment">// ReferenceError: mesage is not defined</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 変数を宣言してから使用</span>
<span class="keyword">const</span> <span class="variable">userName</span> = <span class="string">"田中"</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">userName</span>);

<span class="comment">// 正しいスペル</span>
<span class="keyword">const</span> <span class="variable">message</span> = <span class="string">"Hello"</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">message</span>);</code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">スコープ外の変数へのアクセス</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">function</span> <span class="method">sayHello</span>() {
  <span class="keyword">const</span> <span class="variable">greeting</span> = <span class="string">"こんにちは"</span>;
}

<span class="method">sayHello</span>();
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">greeting</span>);  <span class="comment">// ReferenceError: greeting is not defined</span>

<span class="comment">// ブロックスコープ外からのアクセス</span>
<span class="keyword">if</span> (<span class="keyword">true</span>) {
  <span class="keyword">let</span> <span class="variable">blockVar</span> = <span class="string">"ブロック内"</span>;
}
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">blockVar</span>);  <span class="comment">// ReferenceError</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 関数から値を返す</span>
<span class="keyword">function</span> <span class="method">sayHello</span>() {
  <span class="keyword">const</span> <span class="variable">greeting</span> = <span class="string">"こんにちは"</span>;
  <span class="keyword">return</span> <span class="variable">greeting</span>;
}

<span class="keyword">const</span> <span class="variable">result</span> = <span class="method">sayHello</span>();
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">result</span>);  <span class="comment">// "こんにちは"</span>

<span class="comment">// 外側で宣言する</span>
<span class="keyword">let</span> <span class="variable">blockVar</span>;
<span class="keyword">if</span> (<span class="keyword">true</span>) {
  <span class="variable">blockVar</span> = <span class="string">"ブロック内"</span>;
}
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">blockVar</span>);  <span class="comment">// "ブロック内"</span></code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">TDZ（Temporal Dead Zone）</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// let/const宣言前にアクセス</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">name</span>);  <span class="comment">// ReferenceError: Cannot access 'name' before initialization</span>
<span class="keyword">const</span> <span class="variable">name</span> = <span class="string">"田中"</span>;</code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 宣言してからアクセス</span>
<span class="keyword">const</span> <span class="variable">name</span> = <span class="string">"田中"</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">name</span>);  <span class="comment">// "田中"</span></code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="info-box">
        <div class="info-box-title">対処のコツ</div>
        <div class="info-box-content">
          <ul>
            <li>エラーメッセージの変数名を確認し、スペルミスがないかチェック</li>
            <li>変数が正しく宣言されているか確認</li>
            <li>変数のスコープを意識する（関数内、ブロック内など）</li>
            <li>VS Codeの「定義へ移動」機能を活用する</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section A-3 TypeError -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section A-3</span>
        <h2 class="section-title">TypeError（型エラー）</h2>
      </div>

      <div class="intro-text">
        <p>TypeErrorは、値の型が期待されるものと異なる場合に発生します。null や undefined に対してメソッドを呼び出したり、関数でないものを呼び出そうとした場合などに起こります。</p>
      </div>

      <div class="subsection">
        <h3>原因</h3>
        <ul>
          <li>null や undefined のプロパティにアクセス</li>
          <li>関数でないものを関数として呼び出し</li>
          <li>読み取り専用プロパティへの代入</li>
          <li>const変数への再代入</li>
        </ul>
      </div>

      <div class="subsection">
        <h3>よくある例と対処法</h3>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">null/undefined のプロパティアクセス</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// nullのプロパティにアクセス</span>
<span class="keyword">const</span> <span class="variable">user</span> = <span class="keyword">null</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">user</span>.<span class="variable">name</span>);  <span class="comment">// TypeError: Cannot read properties of null</span>

<span class="comment">// undefinedのプロパティにアクセス</span>
<span class="keyword">const</span> <span class="variable">data</span> = <span class="keyword">undefined</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">data</span>.<span class="variable">length</span>);  <span class="comment">// TypeError: Cannot read properties of undefined</span>

<span class="comment">// 存在しないプロパティのプロパティにアクセス</span>
<span class="keyword">const</span> <span class="variable">obj</span> = {};
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">obj</span>.<span class="variable">user</span>.<span class="variable">name</span>);  <span class="comment">// TypeError（obj.userがundefined）</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 事前にnullチェック</span>
<span class="keyword">const</span> <span class="variable">user</span> = <span class="keyword">null</span>;
<span class="keyword">if</span> (<span class="variable">user</span> !== <span class="keyword">null</span>) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">user</span>.<span class="variable">name</span>);
}

<span class="comment">// オプショナルチェーン（?.）を使用</span>
<span class="keyword">const</span> <span class="variable">data</span> = <span class="keyword">undefined</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">data</span>?.<span class="variable">length</span>);  <span class="comment">// undefined（エラーにならない）</span>

<span class="comment">// ネストしたオブジェクトも安全にアクセス</span>
<span class="keyword">const</span> <span class="variable">obj</span> = {};
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">obj</span>.<span class="variable">user</span>?.<span class="variable">name</span>);  <span class="comment">// undefined</span></code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">関数でないものを呼び出し</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 文字列を関数として呼び出し</span>
<span class="keyword">const</span> <span class="variable">message</span> = <span class="string">"Hello"</span>;
<span class="variable">message</span>();  <span class="comment">// TypeError: message is not a function</span>

<span class="comment">// オブジェクトのプロパティを関数として呼び出し</span>
<span class="keyword">const</span> <span class="variable">user</span> = { <span class="variable">name</span>: <span class="string">"田中"</span> };
<span class="variable">user</span>.<span class="method">name</span>();  <span class="comment">// TypeError: user.name is not a function</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 関数を定義して呼び出し</span>
<span class="keyword">const</span> <span class="variable">getMessage</span> = <span class="keyword">function</span>() {
  <span class="keyword">return</span> <span class="string">"Hello"</span>;
};
<span class="variable">getMessage</span>();  <span class="comment">// "Hello"</span>

<span class="comment">// メソッドとして定義</span>
<span class="keyword">const</span> <span class="variable">user</span> = {
  <span class="variable">name</span>: <span class="string">"田中"</span>,
  <span class="method">getName</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.<span class="variable">name</span>;
  }
};
<span class="variable">user</span>.<span class="method">getName</span>();  <span class="comment">// "田中"</span></code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">const変数への再代入</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// const変数に再代入</span>
<span class="keyword">const</span> <span class="variable">PI</span> = <span class="number">3.14</span>;
<span class="variable">PI</span> = <span class="number">3.14159</span>;  <span class="comment">// TypeError: Assignment to constant variable</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 再代入が必要な場合はletを使用</span>
<span class="keyword">let</span> <span class="variable">count</span> = <span class="number">0</span>;
<span class="variable">count</span> = <span class="number">1</span>;  <span class="comment">// OK</span>

<span class="comment">// constでも配列やオブジェクトの中身は変更可能</span>
<span class="keyword">const</span> <span class="variable">arr</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
<span class="variable">arr</span>.<span class="method">push</span>(<span class="number">4</span>);  <span class="comment">// OK</span>
<span class="variable">arr</span>[<span class="number">0</span>] = <span class="number">10</span>;  <span class="comment">// OK</span></code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="info-box">
        <div class="info-box-title">対処のコツ</div>
        <div class="info-box-content">
          <ul>
            <li>オプショナルチェーン（?.）を活用してnull/undefinedを安全に扱う</li>
            <li>変数の型をtypeofで確認してから操作する</li>
            <li>関数を呼び出す前に、本当に関数かどうか確認する</li>
            <li>再代入が必要な変数はletで宣言する</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section A-4 RangeError -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section A-4</span>
        <h2 class="section-title">RangeError（範囲エラー）</h2>
      </div>

      <div class="intro-text">
        <p>RangeErrorは、値が許容される範囲外の場合に発生します。無限再帰やtoFixedの引数が範囲外の場合などに起こります。</p>
      </div>

      <div class="subsection">
        <h3>原因</h3>
        <ul>
          <li>無限再帰（スタックオーバーフロー）</li>
          <li>配列の長さに無効な値を設定</li>
          <li>toFixed()やtoPrecision()に範囲外の値を渡す</li>
        </ul>
      </div>

      <div class="subsection">
        <h3>よくある例と対処法</h3>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">無限再帰（スタックオーバーフロー）</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 終了条件がない再帰</span>
<span class="keyword">function</span> <span class="method">infiniteLoop</span>() {
  <span class="method">infiniteLoop</span>();  <span class="comment">// RangeError: Maximum call stack size exceeded</span>
}
<span class="method">infiniteLoop</span>();

<span class="comment">// 終了条件が間違っている</span>
<span class="keyword">function</span> <span class="method">countdown</span>(<span class="variable">n</span>) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">n</span>);
  <span class="method">countdown</span>(<span class="variable">n</span> - <span class="number">1</span>);  <span class="comment">// 終了条件がない！</span>
}
<span class="method">countdown</span>(<span class="number">5</span>);</code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 適切な終了条件を設定</span>
<span class="keyword">function</span> <span class="method">countdown</span>(<span class="variable">n</span>) {
  <span class="keyword">if</span> (<span class="variable">n</span> <= <span class="number">0</span>) {
    <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"終了！"</span>);
    <span class="keyword">return</span>;  <span class="comment">// ここで再帰を終了</span>
  }
  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">n</span>);
  <span class="method">countdown</span>(<span class="variable">n</span> - <span class="number">1</span>);
}
<span class="method">countdown</span>(<span class="number">5</span>);  <span class="comment">// 5, 4, 3, 2, 1, 終了！</span></code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">toFixed()の範囲外引数</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">num</span> = <span class="number">3.14159</span>;

<span class="comment">// toFixedの引数は0〜100</span>
<span class="variable">num</span>.<span class="method">toFixed</span>(<span class="number">-1</span>);   <span class="comment">// RangeError</span>
<span class="variable">num</span>.<span class="method">toFixed</span>(<span class="number">101</span>);  <span class="comment">// RangeError</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">num</span> = <span class="number">3.14159</span>;

<span class="comment">// 0〜100の範囲で指定</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">num</span>.<span class="method">toFixed</span>(<span class="number">0</span>));   <span class="comment">// "3"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">num</span>.<span class="method">toFixed</span>(<span class="number">2</span>));   <span class="comment">// "3.14"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">num</span>.<span class="method">toFixed</span>(<span class="number">4</span>));   <span class="comment">// "3.1416"</span></code></pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">配列の長さに無効な値</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">NG - エラーになるコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 負の数や小数は使えない</span>
<span class="keyword">const</span> <span class="variable">arr1</span> = <span class="keyword">new</span> <span class="method">Array</span>(<span class="number">-1</span>);     <span class="comment">// RangeError</span>
<span class="keyword">const</span> <span class="variable">arr2</span> = <span class="keyword">new</span> <span class="method">Array</span>(<span class="number">3.5</span>);    <span class="comment">// RangeError</span></code></pre>
            </div>
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">OK - 正しいコード</span>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 0以上の整数を使用</span>
<span class="keyword">const</span> <span class="variable">arr1</span> = <span class="keyword">new</span> <span class="method">Array</span>(<span class="number">5</span>);      <span class="comment">// 長さ5の空配列</span>
<span class="keyword">const</span> <span class="variable">arr2</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];        <span class="comment">// リテラル記法（推奨）</span></code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="info-box">
        <div class="info-box-title">対処のコツ</div>
        <div class="info-box-content">
          <ul>
            <li>再帰関数には必ず終了条件（ベースケース）を設定する</li>
            <li>メソッドの引数の有効範囲をMDNなどで確認する</li>
            <li>配列やオブジェクトの作成時は、リテラル記法を優先する</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section A-5 エラーメッセージの読み方 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section A-5</span>
        <h2 class="section-title">エラーメッセージの読み方</h2>
      </div>

      <div class="intro-text">
        <p>エラーメッセージには問題解決のためのヒントが詰まっています。正しく読み解くことで、デバッグの効率が大幅に上がります。</p>
      </div>

      <div class="subsection">
        <h3>エラーメッセージの構造</h3>

        <div class="demo-area" style="padding: 20px; background: #1e293b; border-radius: 12px; overflow-x: auto;">
          <pre style="color: #ef4444; font-family: 'JetBrains Mono', monospace; font-size: 14px; margin: 0;">
<span style="color: #f97316;">Uncaught ReferenceError:</span> <span style="color: #f1f5f9;">userName is not defined</span>
    <span style="color: #64748b;">at</span> <span style="color: #3b82f6;">calculateTotal</span> <span style="color: #64748b;">(</span><span style="color: #22c55e;">script.js:15:5</span><span style="color: #64748b;">)</span>
    <span style="color: #64748b;">at</span> <span style="color: #3b82f6;">processOrder</span> <span style="color: #64748b;">(</span><span style="color: #22c55e;">script.js:28:10</span><span style="color: #64748b;">)</span>
    <span style="color: #64748b;">at</span> <span style="color: #3b82f6;">HTMLButtonElement.onclick</span> <span style="color: #64748b;">(</span><span style="color: #22c55e;">index.html:45:36</span><span style="color: #64748b;">)</span>
          </pre>
        </div>

        <div class="table-container" style="margin-top: 20px;">
          <table>
            <thead>
              <tr>
                <th>部分</th>
                <th>意味</th>
                <th>例</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>エラーの種類</strong></td>
                <td>発生したエラーのタイプ</td>
                <td>ReferenceError, TypeError など</td>
              </tr>
              <tr>
                <td><strong>エラーメッセージ</strong></td>
                <td>何が問題かの説明</td>
                <td>"userName is not defined"</td>
              </tr>
              <tr>
                <td><strong>関数名</strong></td>
                <td>エラーが発生した関数</td>
                <td>calculateTotal, processOrder</td>
              </tr>
              <tr>
                <td><strong>ファイル名</strong></td>
                <td>エラーが発生したファイル</td>
                <td>script.js, index.html</td>
              </tr>
              <tr>
                <td><strong>行番号:列番号</strong></td>
                <td>エラーの正確な位置</td>
                <td>15:5（15行目の5文字目）</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="subsection">
        <h3>スタックトレースの読み方</h3>
        <p>スタックトレースは、エラーが発生するまでの関数呼び出しの履歴です。上から順に読むと、エラーの発生元から呼び出し元をたどれます。</p>

        <div class="step-list">
          <div class="step-item">
            <div class="step-number">1</div>
            <div class="step-content">
              <h4>最上部を確認</h4>
              <p>一番上の行がエラーの直接の発生箇所です。ここをまず確認しましょう。</p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-number">2</div>
            <div class="step-content">
              <h4>呼び出し元をたどる</h4>
              <p>下の行は呼び出し元を示しています。どこから呼ばれたかがわかります。</p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-number">3</div>
            <div class="step-content">
              <h4>ファイルと行番号をクリック</h4>
              <p>DevToolsでは、ファイル名をクリックすると該当箇所にジャンプできます。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>よくあるエラーメッセージ早見表</h3>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>エラーメッセージ</th>
                <th>意味</th>
                <th>よくある原因</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>... is not defined</code></td>
                <td>変数/関数が見つからない</td>
                <td>宣言忘れ、スペルミス、スコープ外</td>
              </tr>
              <tr>
                <td><code>... is not a function</code></td>
                <td>関数として呼び出せない</td>
                <td>関数でないものに()をつけた</td>
              </tr>
              <tr>
                <td><code>Cannot read properties of null</code></td>
                <td>nullのプロパティにアクセス</td>
                <td>DOM要素が見つからない、APIの戻り値がnull</td>
              </tr>
              <tr>
                <td><code>Cannot read properties of undefined</code></td>
                <td>undefinedのプロパティにアクセス</td>
                <td>オブジェクトの存在しないプロパティにアクセス</td>
              </tr>
              <tr>
                <td><code>Unexpected token</code></td>
                <td>予期しない文字がある</td>
                <td>括弧やカンマの閉じ忘れ、全角文字</td>
              </tr>
              <tr>
                <td><code>Assignment to constant variable</code></td>
                <td>const変数に再代入</td>
                <td>constで宣言した変数を変更しようとした</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="info-box success">
        <div class="info-box-title">エラーに強くなるための心構え</div>
        <div class="info-box-content">
          <ol>
            <li><strong>落ち着いて読む</strong>：エラーメッセージは英語ですが、翻訳ツールを使っても構いません</li>
            <li><strong>行番号を確認</strong>：エラーの場所を特定することが解決の第一歩です</li>
            <li><strong>エラーメッセージで検索</strong>：同じエラーに遭遇した人の解決策が見つかることが多いです</li>
            <li><strong>小さく試す</strong>：問題を切り分けて、どの部分が原因か特定しましょう</li>
          </ol>
        </div>
      </div>
    </section>

    <!-- コラム -->
    <div class="column">
      <div class="column-header">
        <span class="column-badge">コラム</span>
        <span class="column-title">エラーと例外の違い</span>
      </div>
      <p>プログラミングでは「エラー」と「例外（Exception）」という言葉がよく使われます。JavaScriptでは両者はほぼ同じ意味で使われますが、厳密には少し違います。</p>
      <p><strong>エラー</strong>は、プログラムが正常に実行できない状態を指す一般的な用語です。<strong>例外</strong>は、プログラムの実行中に発生する異常な状況を指し、try-catch文で「捕捉」して処理できます。</p>
      <p>JavaScriptのError、TypeError、ReferenceErrorなどは、すべて「例外」として扱われ、try-catchで処理できます。</p>
    </div>
  </div>

  <!-- ページナビゲーション -->
  <div class="page-nav">
    <a href="3js-control-flow.html" class="page-nav-btn prev">
      <div class="page-nav-label">前へ</div>
      <div class="page-nav-title">条件分岐と繰り返し</div>
    </a>
    <a href="appendix-debug.html" class="page-nav-btn next">
      <div class="page-nav-label">次へ</div>
      <div class="page-nav-title">デバッグのコツ</div>
    </a>
  </div>

  <footer class="footer">
    <p>JavaScript入門 - 職業訓練校教材</p>
  </footer>

  <script src="../shared/demo.js"></script>
</body>
</html>
