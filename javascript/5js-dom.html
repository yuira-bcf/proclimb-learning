<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 5: DOM操作 - JavaScript入門</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../shared/common.css">
  <style>
    :root {
      --primary: #007AFF;
      --primary-dark: #0062CC;
      --primary-light: #EFF6FF;
      --primary-lighter: #BFDBFE;
    }
    .nav-category-links { display: none; }
  </style>
</head>
<body>
  <nav class="global-nav"></nav>
  <script src="../shared/js/nav-javascript.js"></script>

  <div class="container">
    <!-- チャプターヘッダー -->
    <header class="chapter-header">
      <div class="chapter-badge">Chapter</div>
      <div class="chapter-number">5</div>
      <h1 class="chapter-title">DOM操作</h1>
      <p class="chapter-subtitle">HTMLをJavaScriptで操作しよう</p>
    </header>

    <!-- 目次 -->
    <nav class="toc">
      <h2 class="toc-title">この章の内容</h2>
      <ul class="toc-list">
        <li class="toc-item"><span class="toc-number">5-1</span>DOMとは・要素の取得</li>
        <li class="toc-item"><span class="toc-number">5-2</span>要素の作成と追加</li>
        <li class="toc-item"><span class="toc-number">5-3</span>コンテンツの変更と削除</li>
        <li class="toc-item"><span class="toc-number">5-4</span>属性の操作</li>
        <li class="toc-item"><span class="toc-number">5-5</span>スタイルとクラスの操作</li>
        <li class="toc-item"><span class="toc-number">5-6</span>実習：ToDoリスト</li>
        <li class="toc-item"><span class="toc-number">練習</span>練習問題</li>
      </ul>
    </nav>

    <!-- 構文説明ボックス -->
    <div class="syntax-box">
      <div class="syntax-box-header">
        <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
        <span class="syntax-box-title">構文説明</span>
      </div>
      <div class="syntax-box-content">
        <div class="syntax-item">
          <h4>document.getElementById()</h4>
          <div class="syntax-pattern"><span class="keyword">const</span> <span class="variable">element</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'id名'</span>);</div>
          <p>指定したID属性を持つ要素を1つ取得します。最も高速な要素取得方法で、存在しない場合は<code>null</code>を返します。</p>
        </div>
        <div class="syntax-item">
          <h4>document.querySelector() / querySelectorAll()</h4>
          <div class="syntax-pattern"><span class="keyword">const</span> <span class="variable">element</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'CSSセレクタ'</span>);
<span class="keyword">const</span> <span class="variable">elements</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'CSSセレクタ'</span>);</div>
          <p>CSSセレクタで要素を取得します。<code>querySelector</code>は最初にマッチした1つを、<code>querySelectorAll</code>はマッチした全ての要素をNodeListで返します。</p>
        </div>
        <div class="syntax-item">
          <h4>element.innerHTML / textContent</h4>
          <div class="syntax-pattern"><span class="variable">element</span>.<span class="variable">innerHTML</span> = <span class="string">'&lt;strong&gt;HTML&lt;/strong&gt;として解釈'</span>;
<span class="variable">element</span>.<span class="variable">textContent</span> = <span class="string">'テキストとして表示（安全）'</span>;</div>
          <p><code>innerHTML</code>はHTMLとして解釈・描画され、<code>textContent</code>はプレーンテキストとして扱われます。ユーザー入力には<code>textContent</code>を使用してXSS攻撃を防ぎます。</p>
        </div>
        <div class="syntax-item">
          <h4>element.classList.add/remove/toggle()</h4>
          <div class="syntax-pattern"><span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'class1'</span>, <span class="string">'class2'</span>);    <span class="comment">// クラスを追加</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">remove</span>(<span class="string">'class1'</span>);         <span class="comment">// クラスを削除</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">toggle</span>(<span class="string">'active'</span>);         <span class="comment">// クラスの有無を切り替え</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">contains</span>(<span class="string">'active'</span>);       <span class="comment">// クラスの存在確認（true/false）</span></div>
          <p>CSSクラスを操作するためのメソッドです。<code>toggle</code>はクラスがあれば削除、なければ追加します。</p>
        </div>
        <div class="syntax-item">
          <h4>document.createElement()</h4>
          <div class="syntax-pattern"><span class="keyword">const</span> <span class="variable">newElement</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'タグ名'</span>);
<span class="variable">newElement</span>.<span class="variable">textContent</span> = <span class="string">'内容'</span>;
<span class="variable">newElement</span>.<span class="variable">className</span> = <span class="string">'my-class'</span>;</div>
          <p>新しいHTML要素を作成します。作成後、<code>appendChild</code>などで既存の要素に追加する必要があります。</p>
        </div>
        <div class="syntax-item">
          <h4>element.appendChild() / removeChild()</h4>
          <div class="syntax-pattern"><span class="variable">parentElement</span>.<span class="method">appendChild</span>(<span class="variable">childElement</span>);   <span class="comment">// 子要素を末尾に追加</span>
<span class="variable">parentElement</span>.<span class="method">removeChild</span>(<span class="variable">childElement</span>);  <span class="comment">// 子要素を削除</span>
<span class="variable">element</span>.<span class="method">remove</span>();                           <span class="comment">// 要素自身を削除</span></div>
          <p>要素の追加・削除を行います。<code>appendChild</code>は親要素の末尾に子要素を追加し、<code>remove</code>は要素自身を削除します。</p>
        </div>
        <div class="syntax-item">
          <h4>element.setAttribute() / getAttribute()</h4>
          <div class="syntax-pattern"><span class="variable">element</span>.<span class="method">setAttribute</span>(<span class="string">'属性名'</span>, <span class="string">'値'</span>);    <span class="comment">// 属性を設定</span>
<span class="keyword">const</span> <span class="variable">value</span> = <span class="variable">element</span>.<span class="method">getAttribute</span>(<span class="string">'属性名'</span>); <span class="comment">// 属性値を取得</span>
<span class="variable">element</span>.<span class="method">removeAttribute</span>(<span class="string">'属性名'</span>);           <span class="comment">// 属性を削除</span>
<span class="variable">element</span>.<span class="method">hasAttribute</span>(<span class="string">'属性名'</span>);              <span class="comment">// 属性の存在確認</span></div>
          <p>HTML属性（id, class, href, src, data-*など）を操作します。<code>data-*</code>属性は<code>element.dataset.プロパティ名</code>でもアクセス可能です。</p>
        </div>
      </div>
    </div>

    <!-- Section 5-1 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-1</span>
        <h2 class="section-title">DOMとは・要素の取得</h2>
      </div>

      <div class="intro-text">
        <p><strong>DOM（Document Object Model）</strong>とは、HTMLドキュメントをJavaScriptで操作するためのインターフェースです。HTMLの各要素はオブジェクトとして表現され、追加・変更・削除が可能になります。</p>
      </div>

      <div class="subsection">
        <h3>DOMツリー構造</h3>
        <p>HTMLは木構造（ツリー構造）で表現されます。各要素は「ノード」と呼ばれ、親子関係を持ちます。</p>

        <!-- SVG DOMツリー図解 -->
        <div class="demo-area" style="padding: 20px; overflow-x: auto;">
          <svg viewBox="0 0 700 350" style="min-width: 600px; width: 100%; height: auto;">
            <!-- document -->
            <rect x="300" y="20" width="100" height="40" rx="8" fill="#3b82f6"/>
            <text x="350" y="45" text-anchor="middle" font-size="13" fill="white">document</text>

            <!-- html -->
            <line x1="350" y1="60" x2="350" y2="90" stroke="#64748b" stroke-width="2"/>
            <rect x="300" y="90" width="100" height="40" rx="8" fill="#22c55e"/>
            <text x="350" y="115" text-anchor="middle" font-size="13" fill="white">&lt;html&gt;</text>

            <!-- head & body -->
            <line x1="350" y1="130" x2="200" y2="160" stroke="#64748b" stroke-width="2"/>
            <line x1="350" y1="130" x2="500" y2="160" stroke="#64748b" stroke-width="2"/>

            <rect x="150" y="160" width="100" height="40" rx="8" fill="#f97316"/>
            <text x="200" y="185" text-anchor="middle" font-size="13" fill="white">&lt;head&gt;</text>

            <rect x="450" y="160" width="100" height="40" rx="8" fill="#f97316"/>
            <text x="500" y="185" text-anchor="middle" font-size="13" fill="white">&lt;body&gt;</text>

            <!-- head children -->
            <line x1="200" y1="200" x2="200" y2="230" stroke="#64748b" stroke-width="2"/>
            <rect x="150" y="230" width="100" height="35" rx="6" fill="#8b5cf6"/>
            <text x="200" y="252" text-anchor="middle" font-size="11" fill="white">&lt;title&gt;</text>

            <!-- body children -->
            <line x1="500" y1="200" x2="380" y2="230" stroke="#64748b" stroke-width="2"/>
            <line x1="500" y1="200" x2="500" y2="230" stroke="#64748b" stroke-width="2"/>
            <line x1="500" y1="200" x2="620" y2="230" stroke="#64748b" stroke-width="2"/>

            <rect x="330" y="230" width="100" height="35" rx="6" fill="#8b5cf6"/>
            <text x="380" y="252" text-anchor="middle" font-size="11" fill="white">&lt;h1&gt;</text>

            <rect x="450" y="230" width="100" height="35" rx="6" fill="#8b5cf6"/>
            <text x="500" y="252" text-anchor="middle" font-size="11" fill="white">&lt;div&gt;</text>

            <rect x="570" y="230" width="100" height="35" rx="6" fill="#8b5cf6"/>
            <text x="620" y="252" text-anchor="middle" font-size="11" fill="white">&lt;p&gt;</text>

            <!-- div children -->
            <line x1="500" y1="265" x2="450" y2="295" stroke="#64748b" stroke-width="2"/>
            <line x1="500" y1="265" x2="550" y2="295" stroke="#64748b" stroke-width="2"/>

            <rect x="400" y="295" width="100" height="35" rx="6" fill="#ec4899"/>
            <text x="450" y="317" text-anchor="middle" font-size="11" fill="white">&lt;span&gt;</text>

            <rect x="500" y="295" width="100" height="35" rx="6" fill="#ec4899"/>
            <text x="550" y="317" text-anchor="middle" font-size="11" fill="white">&lt;button&gt;</text>

            <!-- 凡例 -->
            <text x="50" y="320" font-size="11" fill="#64748b">親 - 子関係でツリー構造を形成</text>
          </svg>
        </div>
      </div>

      <div class="subsection">
        <h3>getElementById</h3>
        <p>ID属性を使って、特定の1つの要素を取得します。最も高速な取得方法です。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ID属性によるDOM要素の取得

## 実装要件
- `getElementById()`でHTML要素を取得
- 取得した要素のテキストを`console.log`で出力
- 存在しないIDを指定した場合に`null`が返ることを示す

## 使用するAPI
- document.getElementById()
- console.log()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">getElementById</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// HTML: &lt;h1 id="title"&gt;見出し&lt;/h1&gt;</span>

<span class="comment">// ID で要素を取得</span>
<span class="keyword">const</span> <span class="variable">title</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'title'</span>);

<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">title</span>);           <span class="comment">// &lt;h1 id="title"&gt;見出し&lt;/h1&gt;</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">title</span>.<span class="variable">textContent</span>); <span class="comment">// "見出し"</span>

<span class="comment">// 存在しないIDの場合はnullが返る</span>
<span class="keyword">const</span> <span class="variable">notFound</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'unknown'</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">notFound</span>);  <span class="comment">// null</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>querySelector / querySelectorAll</h3>
        <p>CSSセレクタを使って要素を取得します。より柔軟な指定が可能です。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
CSSセレクタによるDOM要素の取得

## 実装要件
- `querySelector()`で単一要素を取得
- `querySelectorAll()`で複数要素を取得
- タグ名、クラス名、ID、複合セレクタでの取得例を含める
- `NodeList`を`forEach`でループ処理

## 使用するAPI
- document.querySelector()
- document.querySelectorAll()
- NodeList.forEach()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">querySelector と querySelectorAll</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// querySelector: 最初にマッチした1つの要素を取得</span>
<span class="keyword">const</span> <span class="variable">firstBtn</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'button'</span>);
<span class="keyword">const</span> <span class="variable">header</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.header'</span>);
<span class="keyword">const</span> <span class="variable">main</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'#main'</span>);
<span class="keyword">const</span> <span class="variable">navLink</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'nav a'</span>);

<span class="comment">// querySelectorAll: マッチする全ての要素を取得（NodeList）</span>
<span class="keyword">const</span> <span class="variable">allButtons</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'button'</span>);
<span class="keyword">const</span> <span class="variable">allItems</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'.item'</span>);
<span class="keyword">const</span> <span class="variable">activeLinks</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'a.active'</span>);

<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">allButtons</span>.<span class="variable">length</span>);  <span class="comment">// 要素の数</span>

<span class="comment">// NodeListをループで処理</span>
<span class="variable">allButtons</span>.<span class="method">forEach</span>((<span class="variable">btn</span>, <span class="variable">index</span>) => {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">`Button ${<span class="variable">index</span>}: ${<span class="variable">btn</span>.<span class="variable">textContent</span>}`</span>);
});

<span class="comment">// インデックスでアクセス</span>
<span class="keyword">const</span> <span class="variable">secondBtn</span> = <span class="variable">allButtons</span>[<span class="number">1</span>];</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>メソッド</th>
                <th>戻り値</th>
                <th>複数要素</th>
                <th>特徴</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>getElementById()</code></td>
                <td>Element / null</td>
                <td>1つのみ</td>
                <td>最速、IDで取得</td>
              </tr>
              <tr>
                <td><code>querySelector()</code></td>
                <td>Element / null</td>
                <td>最初の1つ</td>
                <td>CSSセレクタ使用</td>
              </tr>
              <tr>
                <td><code>querySelectorAll()</code></td>
                <td>NodeList</td>
                <td>全て</td>
                <td>CSSセレクタ使用</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="info-box">
          <div class="info-box-title">querySelector vs getElementById</div>
          <div class="info-box-content">
            <p>IDで取得する場合、<code>getElementById</code>の方が高速です。しかし、<code>querySelector</code>はCSSセレクタが使えるため、複雑な条件での取得に適しています。現代のJavaScript開発では、統一性のために<code>querySelector</code>を使うことも多いです。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5-2 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-2</span>
        <h2 class="section-title">要素の作成と追加</h2>
      </div>

      <div class="intro-text">
        <p>JavaScriptで新しいHTML要素を作成し、ページに追加することができます。動的なコンテンツの生成に必須のスキルです。</p>
      </div>

      <div class="subsection">
        <h3>createElement と appendChild</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
新しいHTML要素の作成と追加

## 実装要件
- `createElement()`でdiv、p、button要素を作成
- 作成した要素にテキストや属性を設定
- `appendChild()`で既存の要素に追加

## 使用するAPI
- document.createElement()
- Element.appendChild()
- Element.textContent
- Element.setAttribute()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">要素の作成と追加</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 新しい要素を作成</span>
<span class="keyword">const</span> <span class="variable">newDiv</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'div'</span>);
<span class="keyword">const</span> <span class="variable">newP</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'p'</span>);
<span class="keyword">const</span> <span class="variable">newButton</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'button'</span>);

<span class="comment">// テキストを設定</span>
<span class="variable">newP</span>.<span class="variable">textContent</span> = <span class="string">'これは新しい段落です'</span>;
<span class="variable">newButton</span>.<span class="variable">textContent</span> = <span class="string">'クリック'</span>;

<span class="comment">// 属性を設定</span>
<span class="variable">newDiv</span>.<span class="variable">id</span> = <span class="string">'new-container'</span>;
<span class="variable">newDiv</span>.<span class="variable">className</span> = <span class="string">'card'</span>;

<span class="comment">// 要素を追加（末尾に）</span>
<span class="keyword">const</span> <span class="variable">container</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'container'</span>);
<span class="variable">container</span>.<span class="method">appendChild</span>(<span class="variable">newDiv</span>);
<span class="variable">newDiv</span>.<span class="method">appendChild</span>(<span class="variable">newP</span>);
<span class="variable">newDiv</span>.<span class="method">appendChild</span>(<span class="variable">newButton</span>);</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>append と prepend</h3>
        <p><code>append</code>と<code>prepend</code>は、より柔軟な追加方法を提供します。複数の要素やテキストを同時に追加できます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
リスト要素への項目追加

## 実装要件
- `append()`でul要素の末尾にli要素を追加
- `append()`で複数要素を同時追加
- `prepend()`で先頭に要素を追加

## 使用するAPI
- Element.append()
- Element.prepend()
- document.createElement()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">append / prepend</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">list</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'ul'</span>);

<span class="comment">// append: 末尾に追加（複数可、テキストも可）</span>
<span class="keyword">const</span> <span class="variable">li1</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'li'</span>);
<span class="variable">li1</span>.<span class="variable">textContent</span> = <span class="string">'アイテム1'</span>;
<span class="keyword">const</span> <span class="variable">li2</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'li'</span>);
<span class="variable">li2</span>.<span class="variable">textContent</span> = <span class="string">'アイテム2'</span>;

<span class="variable">list</span>.<span class="method">append</span>(<span class="variable">li1</span>, <span class="variable">li2</span>);  <span class="comment">// 複数同時に追加</span>

<span class="comment">// prepend: 先頭に追加</span>
<span class="keyword">const</span> <span class="variable">li0</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'li'</span>);
<span class="variable">li0</span>.<span class="variable">textContent</span> = <span class="string">'最初のアイテム'</span>;
<span class="variable">list</span>.<span class="method">prepend</span>(<span class="variable">li0</span>);

<span class="comment">// テキストも直接追加可能</span>
<span class="variable">li1</span>.<span class="method">append</span>(<span class="string">' - 追加テキスト'</span>);</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>insertBefore と insertAdjacentHTML</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
特定位置への要素挿入

## 実装要件
- `insertBefore()`で特定の要素の前に新しい要素を挿入
- `insertAdjacentHTML()`で4つの挿入位置にHTMLを挿入
  - beforebegin: 要素の直前
  - afterbegin: 要素の最初の子として
  - beforeend: 要素の最後の子として
  - afterend: 要素の直後

## 使用するAPI
- Node.insertBefore()
- Element.insertAdjacentHTML()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">特定位置への挿入</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// insertBefore: 特定要素の前に挿入</span>
<span class="keyword">const</span> <span class="variable">parent</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.parent'</span>);
<span class="keyword">const</span> <span class="variable">existingChild</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.child'</span>);
<span class="keyword">const</span> <span class="variable">newElement</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'div'</span>);

<span class="variable">parent</span>.<span class="method">insertBefore</span>(<span class="variable">newElement</span>, <span class="variable">existingChild</span>);

<span class="comment">// insertAdjacentHTML: HTMLテキストを特定位置に挿入</span>
<span class="keyword">const</span> <span class="variable">container</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'#container'</span>);

<span class="comment">// 4つの挿入位置</span>
<span class="variable">container</span>.<span class="method">insertAdjacentHTML</span>(<span class="string">'beforebegin'</span>, <span class="string">'&lt;p&gt;前の兄弟&lt;/p&gt;'</span>);
<span class="variable">container</span>.<span class="method">insertAdjacentHTML</span>(<span class="string">'afterbegin'</span>, <span class="string">'&lt;p&gt;最初の子&lt;/p&gt;'</span>);
<span class="variable">container</span>.<span class="method">insertAdjacentHTML</span>(<span class="string">'beforeend'</span>, <span class="string">'&lt;p&gt;最後の子&lt;/p&gt;'</span>);
<span class="variable">container</span>.<span class="method">insertAdjacentHTML</span>(<span class="string">'afterend'</span>, <span class="string">'&lt;p&gt;後の兄弟&lt;/p&gt;'</span>);</pre>
              </div>
            </div>
          </div>
        </div>

        <!-- SVG insertAdjacentHTML 図解 -->
        <div class="demo-area" style="padding: 20px; overflow-x: auto;">
          <svg viewBox="0 0 600 250" style="min-width: 500px; width: 100%; height: auto;">
            <!-- メイン要素 -->
            <rect x="150" y="80" width="300" height="120" rx="12" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
            <text x="300" y="145" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">container</text>

            <!-- beforebegin -->
            <rect x="150" y="30" width="300" height="40" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="300" y="55" text-anchor="middle" font-size="12" fill="#92400e">'beforebegin'</text>

            <!-- afterbegin -->
            <rect x="170" y="90" width="260" height="30" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="300" y="110" text-anchor="middle" font-size="12" fill="#166534">'afterbegin'</text>

            <!-- beforeend -->
            <rect x="170" y="160" width="260" height="30" rx="6" fill="#fce7f3" stroke="#ec4899" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="300" y="180" text-anchor="middle" font-size="12" fill="#9d174d">'beforeend'</text>

            <!-- afterend -->
            <rect x="150" y="210" width="300" height="40" rx="8" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="300" y="235" text-anchor="middle" font-size="12" fill="#4338ca">'afterend'</text>
          </svg>
        </div>
      </div>
    </section>

    <!-- Section 5-3 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-3</span>
        <h2 class="section-title">コンテンツの変更と削除</h2>
      </div>

      <div class="intro-text">
        <p>要素のテキストやHTMLを変更したり、要素を削除したりする方法を学びます。</p>
      </div>

      <div class="subsection">
        <h3>textContent と innerHTML</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
テキストコンテンツとHTMLの操作

## 実装要件
- `textContent`と`innerHTML`の違いを比較
- `textContent`: HTMLタグが文字として扱われる
- `innerHTML`: HTMLとして描画される
- セキュリティ面での違いを説明

## 使用するAPI
- Element.textContent
- Element.innerHTML</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">テキストとHTMLの操作</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">element</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.target'</span>);

<span class="comment">// textContent: テキストのみ（安全）</span>
<span class="variable">element</span>.<span class="variable">textContent</span> = <span class="string">'こんにちは'</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">element</span>.<span class="variable">textContent</span>);  <span class="comment">// "こんにちは"</span>

<span class="comment">// HTMLタグはそのまま文字として表示される</span>
<span class="variable">element</span>.<span class="variable">textContent</span> = <span class="string">'&lt;strong&gt;太字&lt;/strong&gt;'</span>;
<span class="comment">// 表示: "&lt;strong&gt;太字&lt;/strong&gt;"（文字として）</span>

<span class="comment">// innerHTML: HTMLとして解釈される</span>
<span class="variable">element</span>.<span class="variable">innerHTML</span> = <span class="string">'&lt;strong&gt;太字&lt;/strong&gt;で&lt;em&gt;斜体&lt;/em&gt;'</span>;
<span class="comment">// 表示: 太字で斜体（HTMLとして描画）</span>

<span class="comment">// 既存のコンテンツをクリア</span>
<span class="variable">element</span>.<span class="variable">innerHTML</span> = <span class="string">''</span>;
<span class="comment">// または</span>
<span class="variable">element</span>.<span class="variable">textContent</span> = <span class="string">''</span>;</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-title">innerHTML の XSS リスク</div>
          <div class="info-box-content">
            <p><code>innerHTML</code>にユーザー入力をそのまま代入すると、<strong>XSS（クロスサイトスクリプティング）攻撃</strong>の危険があります。悪意のあるスクリプトが実行される可能性があります。</p>
            <div class="code-block" style="margin-top: 10px;">
              <div class="code-content">
<pre>// 危険な例（やってはいけない！）
const userInput = '&lt;script&gt;悪意のあるコード&lt;/script&gt;';
element.innerHTML = userInput;  // スクリプトが実行される可能性

// 安全な例
element.textContent = userInput;  // 文字として表示される</pre>
                </div>
              </div>
            </div>
            <p style="margin-top: 10px;"><strong>対策</strong>: ユーザー入力には<code>textContent</code>を使うか、サニタイズ処理を行いましょう。</p>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>要素の削除</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
DOM要素の削除と置換

## 実装要件
- `remove()`で要素自身を削除
- `removeChild()`で親から子要素を削除
- `replaceWith()`で要素を別の要素に置き換え
- すべての子要素を削除する方法を示す

## 使用するAPI
- Element.remove()
- Node.removeChild()
- Element.replaceWith()
- Element.innerHTML = ""</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">要素の削除</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// remove(): 要素自身を削除</span>
<span class="keyword">const</span> <span class="variable">element</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.to-delete'</span>);
<span class="variable">element</span>.<span class="method">remove</span>();

<span class="comment">// removeChild(): 親要素から子要素を削除</span>
<span class="keyword">const</span> <span class="variable">parent</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.parent'</span>);
<span class="keyword">const</span> <span class="variable">child</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.child'</span>);
<span class="variable">parent</span>.<span class="method">removeChild</span>(<span class="variable">child</span>);

<span class="comment">// replaceWith(): 要素を別の要素で置き換え</span>
<span class="keyword">const</span> <span class="variable">oldElement</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.old'</span>);
<span class="keyword">const</span> <span class="variable">newElement</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'div'</span>);
<span class="variable">newElement</span>.<span class="variable">textContent</span> = <span class="string">'新しい要素'</span>;
<span class="variable">oldElement</span>.<span class="method">replaceWith</span>(<span class="variable">newElement</span>);

<span class="comment">// すべての子要素を削除</span>
<span class="keyword">const</span> <span class="variable">container</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.container'</span>);
<span class="variable">container</span>.<span class="variable">innerHTML</span> = <span class="string">''</span>;  <span class="comment">// 簡単だが効率は低い</span>

<span class="comment">// より効率的な方法</span>
<span class="keyword">while</span> (<span class="variable">container</span>.<span class="variable">firstChild</span>) {
  <span class="variable">container</span>.<span class="method">removeChild</span>(<span class="variable">container</span>.<span class="variable">firstChild</span>);
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5-4 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-4</span>
        <h2 class="section-title">属性の操作</h2>
      </div>

      <div class="intro-text">
        <p>HTML要素の属性（id, class, href, src など）をJavaScriptで取得・設定・削除する方法を学びます。</p>
      </div>

      <div class="subsection">
        <h3>getAttribute / setAttribute</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
HTML要素の属性操作

## 実装要件
- `getAttribute()`で属性値を取得
- `setAttribute()`で属性を設定
- `hasAttribute()`で属性の存在確認
- `removeAttribute()`で属性を削除
- aタグのhref属性を操作する例で作成

## 使用するAPI
- Element.getAttribute()
- Element.setAttribute()
- Element.hasAttribute()
- Element.removeAttribute()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">属性の操作</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// HTML: &lt;a href="https://example.com" target="_blank"&gt;リンク&lt;/a&gt;</span>
<span class="keyword">const</span> <span class="variable">link</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'a'</span>);

<span class="comment">// getAttribute: 属性値を取得</span>
<span class="keyword">const</span> <span class="variable">href</span> = <span class="variable">link</span>.<span class="method">getAttribute</span>(<span class="string">'href'</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">href</span>);  <span class="comment">// "https://example.com"</span>

<span class="keyword">const</span> <span class="variable">target</span> = <span class="variable">link</span>.<span class="method">getAttribute</span>(<span class="string">'target'</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">target</span>);  <span class="comment">// "_blank"</span>

<span class="comment">// setAttribute: 属性値を設定</span>
<span class="variable">link</span>.<span class="method">setAttribute</span>(<span class="string">'href'</span>, <span class="string">'https://newsite.com'</span>);
<span class="variable">link</span>.<span class="method">setAttribute</span>(<span class="string">'title'</span>, <span class="string">'新しいサイトへ'</span>);

<span class="comment">// hasAttribute: 属性の存在確認</span>
<span class="keyword">if</span> (<span class="variable">link</span>.<span class="method">hasAttribute</span>(<span class="string">'target'</span>)) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">'新しいタブで開きます'</span>);
}

<span class="comment">// removeAttribute: 属性を削除</span>
<span class="variable">link</span>.<span class="method">removeAttribute</span>(<span class="string">'target'</span>);

<span class="comment">// プロパティとして直接アクセス（一部の属性）</span>
<span class="variable">link</span>.<span class="variable">href</span> = <span class="string">'https://another.com'</span>;
<span class="variable">link</span>.<span class="variable">id</span> = <span class="string">'main-link'</span>;
<span class="variable">link</span>.<span class="variable">className</span> = <span class="string">'external-link'</span>;</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>data属性（dataset）</h3>
        <p><code>data-*</code>属性を使うと、HTML要素に任意のデータを埋め込めます。<code>dataset</code>プロパティで簡単にアクセスできます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
data属性（カスタムデータ属性）の操作

## 実装要件
- `dataset`プロパティでdata属性を操作
- `data-user-id`、`data-role`などのカスタム属性を取得・設定・削除
- ハイフン付き属性名がキャメルケースに変換されることを説明
  - data-user-id → dataset.userId

## 使用するAPI
- HTMLElement.dataset
- DOMStringMap</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">data属性の操作</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// HTML: &lt;div id="user" data-user-id="123" data-role="admin"&gt;&lt;/div&gt;</span>
<span class="keyword">const</span> <span class="variable">userEl</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'#user'</span>);

<span class="comment">// dataset でアクセス（キャメルケースに変換される）</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">userEl</span>.<span class="variable">dataset</span>.<span class="variable">userId</span>);  <span class="comment">// "123"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">userEl</span>.<span class="variable">dataset</span>.<span class="variable">role</span>);    <span class="comment">// "admin"</span>

<span class="comment">// data属性を設定</span>
<span class="variable">userEl</span>.<span class="variable">dataset</span>.<span class="variable">status</span> = <span class="string">'active'</span>;
<span class="variable">userEl</span>.<span class="variable">dataset</span>.<span class="variable">lastLogin</span> = <span class="string">'2024-01-15'</span>;

<span class="comment">// 結果: &lt;div data-status="active" data-last-login="2024-01-15"&gt;</span>

<span class="comment">// data属性を削除</span>
<span class="keyword">delete</span> <span class="variable">userEl</span>.<span class="variable">dataset</span>.<span class="variable">role</span>;

<span class="comment">// 実践例: クリックでデータを取得</span>
<span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'.product'</span>).<span class="method">forEach</span>(<span class="variable">el</span> => {
  <span class="variable">el</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, () => {
    <span class="keyword">const</span> <span class="variable">productId</span> = <span class="variable">el</span>.<span class="variable">dataset</span>.<span class="variable">productId</span>;
    <span class="keyword">const</span> <span class="variable">price</span> = <span class="variable">el</span>.<span class="variable">dataset</span>.<span class="variable">price</span>;
    <span class="variable">console</span>.<span class="method">log</span>(<span class="string">`商品ID: ${<span class="variable">productId</span>}, 価格: ${<span class="variable">price</span>}円`</span>);
  });
});</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box success">
          <div class="info-box-title">data属性の活用場面</div>
          <div class="info-box-content">
            <ul>
              <li><strong>ID関連付け</strong>: 削除ボタンと対象要素を紐付ける</li>
              <li><strong>状態管理</strong>: 要素の状態（開閉、選択など）を保持</li>
              <li><strong>API連携</strong>: サーバーから取得したデータを保持</li>
              <li><strong>設定値</strong>: アニメーション速度、表示モードなど</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5-5 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-5</span>
        <h2 class="section-title">スタイルとクラスの操作</h2>
      </div>

      <div class="intro-text">
        <p>JavaScriptでCSSスタイルを変更したり、クラスを追加・削除したりする方法を学びます。</p>
      </div>

      <div class="subsection">
        <h3>element.style</h3>
        <p>インラインスタイルを直接操作します。プロパティ名はキャメルケースになります。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
インラインスタイルの動的変更

## 実装要件
- `element.style`プロパティでCSSスタイルを変更
- `backgroundColor`、`padding`、`borderRadius`などを設定
- `getComputedStyle()`で計算済みスタイルを取得
- CSSプロパティ名のキャメルケース変換を示す

## 使用するAPI
- HTMLElement.style
- window.getComputedStyle()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">スタイルの直接操作</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">box</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.box'</span>);

<span class="comment">// スタイルを設定（キャメルケース）</span>
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">backgroundColor</span> = <span class="string">'#3b82f6'</span>;
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">color</span> = <span class="string">'white'</span>;
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">padding</span> = <span class="string">'20px'</span>;
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">borderRadius</span> = <span class="string">'10px'</span>;
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">fontSize</span> = <span class="string">'18px'</span>;

<span class="comment">// ハイフン付きプロパティ</span>
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">marginTop</span> = <span class="string">'10px'</span>;      <span class="comment">// margin-top</span>
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">zIndex</span> = <span class="string">'100'</span>;          <span class="comment">// z-index</span>

<span class="comment">// スタイルを取得</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">backgroundColor</span>);

<span class="comment">// 計算後のスタイルを取得（CSSファイルの値も含む）</span>
<span class="keyword">const</span> <span class="variable">computedStyle</span> = <span class="method">getComputedStyle</span>(<span class="variable">box</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">computedStyle</span>.<span class="variable">width</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">computedStyle</span>.<span class="variable">height</span>);

<span class="comment">// スタイルを削除</span>
<span class="variable">box</span>.<span class="variable">style</span>.<span class="variable">backgroundColor</span> = <span class="string">''</span>;</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>classList</h3>
        <p><code>classList</code>を使うと、CSSクラスの追加・削除・切り替えが簡単にできます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
CSSクラスの操作

## 実装要件
- `classList.add()`でクラスを追加
- `classList.remove()`でクラスを削除
- `classList.contains()`でクラスの存在確認
- `classList.toggle()`でクラスの切り替え
- `classList.replace()`でクラスを置換

## 使用するAPI
- Element.classList
- DOMTokenList.add()
- DOMTokenList.remove()
- DOMTokenList.contains()
- DOMTokenList.toggle()
- DOMTokenList.replace()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">classListの操作</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">element</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.card'</span>);

<span class="comment">// クラスを追加</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'active'</span>);
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'highlight'</span>, <span class="string">'animated'</span>);  <span class="comment">// 複数追加</span>

<span class="comment">// クラスを削除</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">remove</span>(<span class="string">'inactive'</span>);

<span class="comment">// クラスの有無を確認</span>
<span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">contains</span>(<span class="string">'active'</span>)) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">'アクティブです'</span>);
}

<span class="comment">// クラスの切り替え（あれば削除、なければ追加）</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">toggle</span>(<span class="string">'open'</span>);

<span class="comment">// 条件付きトグル</span>
<span class="keyword">const</span> <span class="variable">isActive</span> = <span class="keyword">true</span>;
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">toggle</span>(<span class="string">'active'</span>, <span class="variable">isActive</span>);  <span class="comment">// isActiveがtrueなら追加</span>

<span class="comment">// クラスを置き換え</span>
<span class="variable">element</span>.<span class="variable">classList</span>.<span class="method">replace</span>(<span class="string">'old-class'</span>, <span class="string">'new-class'</span>);

<span class="comment">// すべてのクラスを取得</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">element</span>.<span class="variable">classList</span>);  <span class="comment">// DOMTokenList</span>
<span class="variable">console</span>.<span class="method">log</span>([...<span class="variable">element</span>.<span class="variable">classList</span>]);  <span class="comment">// 配列に変換</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
classListを使った実践的なUI操作

## 実装要件
- `classList.toggle()`でメニューの開閉機能を実装
- タブ切り替え機能を実装
- クリックイベントと連携

## 使用するAPI
- DOMTokenList.toggle()
- EventTarget.addEventListener()
- Element.classList</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">classList実践例</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// メニューの開閉</span>
<span class="keyword">const</span> <span class="variable">menuBtn</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.menu-btn'</span>);
<span class="keyword">const</span> <span class="variable">menu</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.menu'</span>);

<span class="variable">menuBtn</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, () => {
  <span class="variable">menu</span>.<span class="variable">classList</span>.<span class="method">toggle</span>(<span class="string">'open'</span>);
  <span class="variable">menuBtn</span>.<span class="variable">classList</span>.<span class="method">toggle</span>(<span class="string">'active'</span>);
});

<span class="comment">// タブの切り替え</span>
<span class="keyword">const</span> <span class="variable">tabs</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'.tab'</span>);
<span class="keyword">const</span> <span class="variable">panels</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'.panel'</span>);

<span class="variable">tabs</span>.<span class="method">forEach</span>((<span class="variable">tab</span>, <span class="variable">index</span>) => {
  <span class="variable">tab</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, () => {
    <span class="comment">// 全てのタブからactiveを削除</span>
    <span class="variable">tabs</span>.<span class="method">forEach</span>(<span class="variable">t</span> => <span class="variable">t</span>.<span class="variable">classList</span>.<span class="method">remove</span>(<span class="string">'active'</span>));
    <span class="variable">panels</span>.<span class="method">forEach</span>(<span class="variable">p</span> => <span class="variable">p</span>.<span class="variable">classList</span>.<span class="method">remove</span>(<span class="string">'active'</span>));

    <span class="comment">// クリックしたタブをアクティブに</span>
    <span class="variable">tab</span>.<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'active'</span>);
    <span class="variable">panels</span>[<span class="variable">index</span>].<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'active'</span>);
  });
});</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">style vs classList</div>
          <div class="info-box-content">
            <p><strong>classList を推奨</strong>: スタイルはCSSファイルで定義し、JavaScriptではクラスの付け外しで制御するのがベストプラクティスです。これにより、デザインとロジックを分離でき、保守性が向上します。</p>
            <p><code>element.style</code>は、動的に計算される値（位置、サイズなど）の設定に使用します。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5-6 実習 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-6</span>
        <h2 class="section-title">実習：ToDoリスト</h2>
      </div>

      <div class="intro-text">
        <p>DOM操作の集大成として、ToDoリストアプリを作成します。タスクの追加・完了・削除・フィルター機能、そしてLocalStorageを使ったデータ永続化を実装します。</p>
      </div>

      <div class="subsection">
        <h3>完成イメージ</h3>
        <div class="demo-area" style="padding: 20px;">
          <div id="todo-demo" style="max-width: 500px; margin: 0 auto; background: #1e293b; padding: 25px; border-radius: 16px;">
            <h3 style="color: white; text-align: center; margin-bottom: 20px;">ToDo List</h3>

            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
              <input type="text" id="demo-todo-input" placeholder="タスクを入力..." style="flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 16px;">
              <button id="demo-add-btn" style="padding: 12px 20px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">追加</button>
            </div>

            <div style="display: flex; gap: 8px; margin-bottom: 15px;">
              <button class="demo-filter-btn active" data-filter="all" style="flex: 1; padding: 8px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">すべて</button>
              <button class="demo-filter-btn" data-filter="active" style="flex: 1; padding: 8px; background: #475569; color: white; border: none; border-radius: 6px; cursor: pointer;">未完了</button>
              <button class="demo-filter-btn" data-filter="completed" style="flex: 1; padding: 8px; background: #475569; color: white; border: none; border-radius: 6px; cursor: pointer;">完了</button>
            </div>

            <ul id="demo-todo-list" style="list-style: none; padding: 0;">
              <li style="display: flex; align-items: center; gap: 10px; padding: 12px; background: #334155; border-radius: 8px; margin-bottom: 8px;">
                <input type="checkbox" style="width: 20px; height: 20px; cursor: pointer;">
                <span style="flex: 1; color: white;">JavaScriptを学ぶ</span>
                <button style="padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">削除</button>
              </li>
              <li style="display: flex; align-items: center; gap: 10px; padding: 12px; background: #334155; border-radius: 8px; margin-bottom: 8px;">
                <input type="checkbox" checked style="width: 20px; height: 20px; cursor: pointer;">
                <span style="flex: 1; color: #94a3b8; text-decoration: line-through;">DOM操作を理解する</span>
                <button style="padding: 6px 12px; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">削除</button>
              </li>
            </ul>

            <div style="text-align: center; color: #94a3b8; font-size: 14px; margin-top: 15px;">
              残り <span id="demo-remaining">1</span> 件
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>実装コード</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
DOM操作を使ったToDoリストアプリ

## 実装要件
- タスクの追加（`createElement`と`appendChild`を使用）
- 完了・未完了の切り替え（`classList.toggle`を使用）
- タスクの削除（`remove()`を使用）
- フィルター機能（すべて/未完了/完了）
- `localStorage`でデータを永続化
- イベント委譲でチェックボックスと削除ボタンを処理

## 使用するAPI
- document.createElement()
- Element.appendChild()
- Element.classList.toggle()
- Element.remove()
- localStorage.setItem()
- localStorage.getItem()
- JSON.parse() / JSON.stringify()</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">todo.html</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">HTML + JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="tag">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attr">lang</span>=<span class="value">"ja"</span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">charset</span>=<span class="value">"UTF-8"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">name</span>=<span class="value">"viewport"</span> <span class="attr">content</span>=<span class="value">"width=device-width, initial-scale=1.0"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>ToDoリスト<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;style&gt;</span>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0f172a;
      font-family: sans-serif;
      padding: 20px;
    }
    .todo-app {
      background: #1e293b;
      padding: 30px;
      border-radius: 16px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }
    .title { color: white; text-align: center; margin-bottom: 25px; }
    .input-area { display: flex; gap: 10px; margin-bottom: 20px; }
    .todo-input {
      flex: 1; padding: 14px; border: none; border-radius: 8px;
      font-size: 16px; outline: none;
    }
    .add-btn {
      padding: 14px 24px; background: #3b82f6; color: white;
      border: none; border-radius: 8px; cursor: pointer;
      font-size: 16px; font-weight: bold;
      transition: background 0.2s;
    }
    .add-btn:hover { background: #2563eb; }
    .filters { display: flex; gap: 8px; margin-bottom: 20px; }
    .filter-btn {
      flex: 1; padding: 10px; background: #475569; color: white;
      border: none; border-radius: 8px; cursor: pointer;
      transition: background 0.2s;
    }
    .filter-btn.active { background: #3b82f6; }
    .todo-list { list-style: none; }
    .todo-item {
      display: flex; align-items: center; gap: 12px;
      padding: 14px; background: #334155; border-radius: 10px;
      margin-bottom: 10px; transition: opacity 0.3s;
    }
    .todo-item.completed .todo-text {
      text-decoration: line-through; color: #64748b;
    }
    .todo-checkbox { width: 22px; height: 22px; cursor: pointer; }
    .todo-text { flex: 1; color: white; font-size: 16px; }
    .delete-btn {
      padding: 8px 14px; background: #ef4444; color: white;
      border: none; border-radius: 6px; cursor: pointer;
      font-size: 13px; transition: background 0.2s;
    }
    .delete-btn:hover { background: #dc2626; }
    .status {
      text-align: center; color: #94a3b8;
      font-size: 14px; margin-top: 20px;
    }
    .hidden { display: none; }
  <span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"todo-app"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;h1</span> <span class="attr">class</span>=<span class="value">"title"</span><span class="tag">&gt;</span>ToDo List<span class="tag">&lt;/h1&gt;</span>

    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"input-area"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="value">"text"</span> <span class="attr">id</span>=<span class="value">"todoInput"</span> <span class="attr">class</span>=<span class="value">"todo-input"</span> <span class="attr">placeholder</span>=<span class="value">"タスクを入力..."</span><span class="tag">&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">id</span>=<span class="value">"addBtn"</span> <span class="attr">class</span>=<span class="value">"add-btn"</span><span class="tag">&gt;</span>追加<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>

    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"filters"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"filter-btn active"</span> <span class="attr">data-filter</span>=<span class="value">"all"</span><span class="tag">&gt;</span>すべて<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"filter-btn"</span> <span class="attr">data-filter</span>=<span class="value">"active"</span><span class="tag">&gt;</span>未完了<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"filter-btn"</span> <span class="attr">data-filter</span>=<span class="value">"completed"</span><span class="tag">&gt;</span>完了<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>

    <span class="tag">&lt;ul</span> <span class="attr">id</span>=<span class="value">"todoList"</span> <span class="attr">class</span>=<span class="value">"todo-list"</span><span class="tag">&gt;&lt;/ul&gt;</span>

    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"status"</span><span class="tag">&gt;</span>残り <span class="tag">&lt;span</span> <span class="attr">id</span>=<span class="value">"remaining"</span><span class="tag">&gt;</span>0<span class="tag">&lt;/span&gt;</span> 件<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>

  <span class="tag">&lt;script&gt;</span>
    <span class="comment">// =====================================</span>
    <span class="comment">// ToDoデータの管理</span>
    <span class="comment">// =====================================</span>
    <span class="keyword">let</span> <span class="variable">todos</span> = [];
    <span class="keyword">let</span> <span class="variable">currentFilter</span> = <span class="string">'all'</span>;

    <span class="comment">// LocalStorageからデータを読み込む</span>
    <span class="keyword">const</span> <span class="variable">loadTodos</span> = () => {
      <span class="keyword">const</span> <span class="variable">saved</span> = <span class="variable">localStorage</span>.<span class="method">getItem</span>(<span class="string">'todos'</span>);
      <span class="variable">todos</span> = <span class="variable">saved</span> ? <span class="variable">JSON</span>.<span class="method">parse</span>(<span class="variable">saved</span>) : [];
    };

    <span class="comment">// LocalStorageにデータを保存</span>
    <span class="keyword">const</span> <span class="variable">saveTodos</span> = () => {
      <span class="variable">localStorage</span>.<span class="method">setItem</span>(<span class="string">'todos'</span>, <span class="variable">JSON</span>.<span class="method">stringify</span>(<span class="variable">todos</span>));
    };

    <span class="comment">// =====================================</span>
    <span class="comment">// DOM要素の取得</span>
    <span class="comment">// =====================================</span>
    <span class="keyword">const</span> <span class="variable">todoInput</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'todoInput'</span>);
    <span class="keyword">const</span> <span class="variable">addBtn</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'addBtn'</span>);
    <span class="keyword">const</span> <span class="variable">todoList</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'todoList'</span>);
    <span class="keyword">const</span> <span class="variable">remaining</span> = <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'remaining'</span>);
    <span class="keyword">const</span> <span class="variable">filterBtns</span> = <span class="variable">document</span>.<span class="method">querySelectorAll</span>(<span class="string">'.filter-btn'</span>);

    <span class="comment">// =====================================</span>
    <span class="comment">// ToDoの追加</span>
    <span class="comment">// =====================================</span>
    <span class="keyword">const</span> <span class="variable">addTodo</span> = () => {
      <span class="keyword">const</span> <span class="variable">text</span> = <span class="variable">todoInput</span>.<span class="variable">value</span>.<span class="method">trim</span>();
      <span class="keyword">if</span> (!<span class="variable">text</span>) <span class="keyword">return</span>;

      <span class="keyword">const</span> <span class="variable">todo</span> = {
        <span class="variable">id</span>: <span class="variable">Date</span>.<span class="method">now</span>(),
        <span class="variable">text</span>: <span class="variable">text</span>,
        <span class="variable">completed</span>: <span class="keyword">false</span>
      };

      <span class="variable">todos</span>.<span class="method">push</span>(<span class="variable">todo</span>);
      <span class="variable">saveTodos</span>();
      <span class="variable">renderTodos</span>();
      <span class="variable">todoInput</span>.<span class="variable">value</span> = <span class="string">''</span>;
    };

    <span class="comment">// =====================================</span>
    <span class="comment">// ToDoの完了切り替え</span>
    <span class="comment">// =====================================</span>
    <span class="keyword">const</span> <span class="variable">toggleTodo</span> = (<span class="variable">id</span>) => {
      <span class="variable">todos</span> = <span class="variable">todos</span>.<span class="method">map</span>(<span class="variable">todo</span> =>
        <span class="variable">todo</span>.<span class="variable">id</span> === <span class="variable">id</span> ? { ...<span class="variable">todo</span>, <span class="variable">completed</span>: !<span class="variable">todo</span>.<span class="variable">completed</span> } : <span class="variable">todo</span>
      );
      <span class="variable">saveTodos</span>();
      <span class="variable">renderTodos</span>();
    };

    <span class="comment">// =====================================</span>
    <span class="comment">// ToDoの削除</span>
    <span class="comment">// =====================================</span>
    <span class="keyword">const</span> <span class="variable">deleteTodo</span> = (<span class="variable">id</span>) => {
      <span class="variable">todos</span> = <span class="variable">todos</span>.<span class="method">filter</span>(<span class="variable">todo</span> => <span class="variable">todo</span>.<span class="variable">id</span> !== <span class="variable">id</span>);
      <span class="variable">saveTodos</span>();
      <span class="variable">renderTodos</span>();
    };

    <span class="comment">// =====================================</span>
    <span class="comment">// ToDoリストの描画</span>
    <span class="comment">// =====================================</span>
    <span class="keyword">const</span> <span class="variable">renderTodos</span> = () => {
      <span class="comment">// フィルタリング</span>
      <span class="keyword">let</span> <span class="variable">filteredTodos</span> = <span class="variable">todos</span>;
      <span class="keyword">if</span> (<span class="variable">currentFilter</span> === <span class="string">'active'</span>) {
        <span class="variable">filteredTodos</span> = <span class="variable">todos</span>.<span class="method">filter</span>(<span class="variable">t</span> => !<span class="variable">t</span>.<span class="variable">completed</span>);
      } <span class="keyword">else if</span> (<span class="variable">currentFilter</span> === <span class="string">'completed'</span>) {
        <span class="variable">filteredTodos</span> = <span class="variable">todos</span>.<span class="method">filter</span>(<span class="variable">t</span> => <span class="variable">t</span>.<span class="variable">completed</span>);
      }

      <span class="comment">// リストをクリア</span>
      <span class="variable">todoList</span>.<span class="variable">innerHTML</span> = <span class="string">''</span>;

      <span class="comment">// 各ToDoを描画</span>
      <span class="variable">filteredTodos</span>.<span class="method">forEach</span>(<span class="variable">todo</span> => {
        <span class="keyword">const</span> <span class="variable">li</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'li'</span>);
        <span class="variable">li</span>.<span class="variable">className</span> = <span class="string">`todo-item ${<span class="variable">todo</span>.<span class="variable">completed</span> ? <span class="string">'completed'</span> : <span class="string">''</span>}`</span>;
        <span class="variable">li</span>.<span class="variable">dataset</span>.<span class="variable">id</span> = <span class="variable">todo</span>.<span class="variable">id</span>;

        <span class="variable">li</span>.<span class="variable">innerHTML</span> = <span class="string">`
          &lt;input type="checkbox" class="todo-checkbox" ${<span class="variable">todo</span>.<span class="variable">completed</span> ? <span class="string">'checked'</span> : <span class="string">''</span>}&gt;
          &lt;span class="todo-text"&gt;${<span class="variable">todo</span>.<span class="variable">text</span>}&lt;/span&gt;
          &lt;button class="delete-btn"&gt;削除&lt;/button&gt;
        `</span>;

        <span class="variable">todoList</span>.<span class="method">appendChild</span>(<span class="variable">li</span>);
      });

      <span class="comment">// 残りタスク数を更新</span>
      <span class="keyword">const</span> <span class="variable">activeCount</span> = <span class="variable">todos</span>.<span class="method">filter</span>(<span class="variable">t</span> => !<span class="variable">t</span>.<span class="variable">completed</span>).<span class="variable">length</span>;
      <span class="variable">remaining</span>.<span class="variable">textContent</span> = <span class="variable">activeCount</span>;
    };

    <span class="comment">// =====================================</span>
    <span class="comment">// イベントリスナー</span>
    <span class="comment">// =====================================</span>

    <span class="comment">// 追加ボタン</span>
    <span class="variable">addBtn</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, <span class="variable">addTodo</span>);

    <span class="comment">// Enterキーで追加</span>
    <span class="variable">todoInput</span>.<span class="method">addEventListener</span>(<span class="string">'keypress'</span>, (<span class="variable">e</span>) => {
      <span class="keyword">if</span> (<span class="variable">e</span>.<span class="variable">key</span> === <span class="string">'Enter'</span>) <span class="variable">addTodo</span>();
    });

    <span class="comment">// イベント委譲：チェックボックスと削除ボタン</span>
    <span class="variable">todoList</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, (<span class="variable">e</span>) => {
      <span class="keyword">const</span> <span class="variable">item</span> = <span class="variable">e</span>.<span class="variable">target</span>.<span class="method">closest</span>(<span class="string">'.todo-item'</span>);
      <span class="keyword">if</span> (!<span class="variable">item</span>) <span class="keyword">return</span>;

      <span class="keyword">const</span> <span class="variable">id</span> = <span class="method">Number</span>(<span class="variable">item</span>.<span class="variable">dataset</span>.<span class="variable">id</span>);

      <span class="keyword">if</span> (<span class="variable">e</span>.<span class="variable">target</span>.<span class="variable">classList</span>.<span class="method">contains</span>(<span class="string">'todo-checkbox'</span>)) {
        <span class="variable">toggleTodo</span>(<span class="variable">id</span>);
      } <span class="keyword">else if</span> (<span class="variable">e</span>.<span class="variable">target</span>.<span class="variable">classList</span>.<span class="method">contains</span>(<span class="string">'delete-btn'</span>)) {
        <span class="variable">deleteTodo</span>(<span class="variable">id</span>);
      }
    });

    <span class="comment">// フィルターボタン</span>
    <span class="variable">filterBtns</span>.<span class="method">forEach</span>(<span class="variable">btn</span> => {
      <span class="variable">btn</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, () => {
        <span class="variable">filterBtns</span>.<span class="method">forEach</span>(<span class="variable">b</span> => <span class="variable">b</span>.<span class="variable">classList</span>.<span class="method">remove</span>(<span class="string">'active'</span>));
        <span class="variable">btn</span>.<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'active'</span>);
        <span class="variable">currentFilter</span> = <span class="variable">btn</span>.<span class="variable">dataset</span>.<span class="variable">filter</span>;
        <span class="variable">renderTodos</span>();
      });
    });

    <span class="comment">// 初期化</span>
    <span class="variable">loadTodos</span>();
    <span class="variable">renderTodos</span>();
  <span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">学習ポイント</div>
          <div class="info-box-content">
            <ul>
              <li><strong>createElement / appendChild</strong>: ToDoアイテムの動的生成</li>
              <li><strong>innerHTML</strong>: テンプレート文字列でHTML構造を作成</li>
              <li><strong>classList</strong>: 完了状態のスタイル切り替え</li>
              <li><strong>dataset</strong>: ToDoのIDを要素に紐付け</li>
              <li><strong>LocalStorage</strong>: データの永続化</li>
              <li><strong>イベント委譲</strong>: 動的に追加される要素のイベント処理</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 練習問題 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">練習問題</span>
        <h2 class="section-title">Chapter 5 練習問題</h2>
      </div>

      <div class="exercise-list">
        <div class="exercise-item">
          <div class="exercise-number">Q1</div>
          <div class="exercise-content">
            <p><code>getElementById</code>と<code>querySelector</code>の違いを説明してください。</p>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q2</div>
          <div class="exercise-content">
            <p><code>textContent</code>と<code>innerHTML</code>の違いを説明し、それぞれどのような場面で使うべきか述べてください。</p>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q3</div>
          <div class="exercise-content">
            <p>以下のHTMLがある時、JavaScriptでボタンをクリックしたらテキストが「クリックされました！」に変わるコードを書いてください。</p>
            <div class="code-block">
              <div class="code-content">
<pre>&lt;p id="message"&gt;ここにメッセージ&lt;/p&gt;
&lt;button id="changeBtn"&gt;変更&lt;/button&gt;</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q4</div>
          <div class="exercise-content">
            <p>新しい<code>&lt;li&gt;</code>要素を作成し、<code>&lt;ul id="list"&gt;</code>の末尾に追加するコードを書いてください。リストの内容は「新しいアイテム」とします。</p>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q5</div>
          <div class="exercise-content">
            <p>ボタンをクリックするたびに、要素に<code>active</code>クラスが付いたり外れたりするトグル機能を実装してください。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 解答 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">解答</span>
        <h2 class="section-title">練習問題の解答</h2>
      </div>

      <div class="answer-list">
        <div class="answer-item">
          <div class="answer-header">Q1の解答</div>
          <div class="answer-content">
            <p><strong>getElementById</strong>: ID属性でのみ検索可能。最も高速。1つの要素のみ返す。</p>
            <p><strong>querySelector</strong>: CSSセレクタで検索可能（タグ、クラス、ID、属性など）。柔軟性が高い。最初にマッチした1つの要素を返す。</p>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q2の解答</div>
          <div class="answer-content">
            <p><strong>textContent</strong>: テキストのみを扱う。HTMLタグは文字として表示される。ユーザー入力を表示する場合に安全（XSS対策）。</p>
            <p><strong>innerHTML</strong>: HTMLとして解釈・描画される。動的にHTML構造を作成したい場合に使用。ユーザー入力をそのまま代入するとXSSリスクがある。</p>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q3の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>const message = document.getElementById('message');
const changeBtn = document.getElementById('changeBtn');

changeBtn.addEventListener('click', () => {
  message.textContent = 'クリックされました！';
});</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q4の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>const list = document.getElementById('list');
const newItem = document.createElement('li');
newItem.textContent = '新しいアイテム';
list.appendChild(newItem);

// または append を使う場合
list.append(newItem);</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q5の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>const toggleBtn = document.getElementById('toggleBtn');
const target = document.getElementById('target');

toggleBtn.addEventListener('click', () => {
  target.classList.toggle('active');
});</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- コラム -->
    <div class="column">
      <div class="column-header">
        <span class="column-badge">コラム</span>
        <span class="column-title">仮想DOMとは</span>
      </div>
      <p>ReactやVue.jsなどのモダンなフレームワークでは、<strong>仮想DOM（Virtual DOM）</strong>という技術が使われています。</p>
      <p>直接DOMを操作すると、変更のたびにブラウザが再描画を行うため、パフォーマンスが低下することがあります。仮想DOMは、JavaScriptのオブジェクトとしてDOMの状態を保持し、変更があった部分だけを効率的に実際のDOMに反映します。</p>
      <p>この章で学んだ直接的なDOM操作は、フレームワークを使わない場合や、仕組みを理解するために重要です。フレームワークを学ぶ際にも、この知識が土台となります。</p>
    </div>
  </div>

  <!-- ページナビゲーション -->
  <div class="page-nav">
    <a href="4js-functions.html" class="page-nav-btn prev">
      <div class="page-nav-label">前へ</div>
      <div class="page-nav-title">関数</div>
    </a>
    <a href="6js-events.html" class="page-nav-btn next">
      <div class="page-nav-label">次へ</div>
      <div class="page-nav-title">イベント処理</div>
    </a>
  </div>

  <footer class="footer">
    <p>JavaScript入門 - 職業訓練校教材</p>
  </footer>

  <script src="../shared/demo.js"></script>
</body>
</html>
