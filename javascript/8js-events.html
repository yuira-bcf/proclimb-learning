<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>第8章: イベント制御 - JavaScript入門</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../shared/common.css">
  <style>
    :root {
      --primary: #F7DF1E;
      --primary-dark: #C9B617;
      --primary-light: #FFFDE7;
      --primary-lighter: #FFF9C4;
    }
    .nav-category-links { display: none; }
  </style>
</head>
<body>
  <nav class="global-nav"></nav>
  <script src="../shared/js/nav-javascript.js"></script>

  <div class="container">
    <!-- チャプターヘッダー -->
    <header class="chapter-header">
      <div class="chapter-badge">JavaScript超入門</div>
      <div class="chapter-number">8</div>
      <h1 class="chapter-title">イベント制御</h1>
      <p class="chapter-subtitle">ユーザー操作に反応する 〜クリック・入力・スクロールに反応させよう〜</p>
    </header>

    <!-- 目次 -->
    <nav class="toc">
      <h2 class="toc-title">この章の内容</h2>
      <ul class="toc-list">
        <li class="toc-item"><span class="toc-number">1</span>イベントとは？</li>
        <li class="toc-item"><span class="toc-number">2</span>クリックイベント（基本）</li>
        <li class="toc-item"><span class="toc-number">3</span>onmouseover（マウスが乗ったとき）</li>
        <li class="toc-item"><span class="toc-number">4</span>onchange（入力が変わったとき）</li>
        <li class="toc-item"><span class="toc-number">5</span>イベントと関数の関係図</li>
        <li class="toc-item"><span class="toc-number">6</span>addEventListener</li>
        <li class="toc-item"><span class="toc-number">7</span>よく使うイベント一覧</li>
        <li class="toc-item"><span class="toc-number">8</span>実践：マウスでボタンの色を変える</li>
        <li class="toc-item"><span class="toc-number">9</span>複数のボタンにイベントをつける</li>
        <li class="toc-item"><span class="toc-number">10</span>練習課題</li>
      </ul>
    </nav>

    <!-- Section 1 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 1</span>
        <h2 class="section-title">イベントとは？</h2>
      </div>

      <div class="intro-text">
        <p>ここまでは、JavaScriptがHTMLを取得する・書き換えるメソッドそのものを学んできました。この章では、それらが行われる起点となるもの「<strong>イベント</strong>」について学びます。</p>
      </div>

      <div class="subsection">
        <p><strong>イベント</strong>とは、ユーザーがそのページに対する操作を指します。</p>

        <p>たとえば下記のようなものがイベントとして存在します：</p>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>イベント</th>
                <th>いつ起こる？</th>
                <th>例</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>click</td>
                <td>クリックしたとき</td>
                <td>ボタンを押した</td>
              </tr>
              <tr>
                <td>mouseover</td>
                <td>マウスを乗せたとき</td>
                <td>ボタンを光らせる</td>
              </tr>
              <tr>
                <td>change</td>
                <td>入力内容が変わったとき</td>
                <td>フォームに文字を入れた</td>
              </tr>
              <tr>
                <td>keydown</td>
                <td>キーを押したとき</td>
                <td>キーボード入力</td>
              </tr>
              <tr>
                <td>load</td>
                <td>ページが読み込まれたとき</td>
                <td>初期処理をする</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p>つまり JavaScriptのイベントとは、「<strong>ユーザーが何かをした瞬間に、関数を動かす仕組み</strong>」です。</p>
      </div>
    </section>

    <!-- Section 2 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 2</span>
        <h2 class="section-title">クリックイベント（基本）</h2>
      </div>

      <div class="intro-text">
        <p><strong>ファイル：Chapter_8-2 \ index.html</strong></p>
      </div>

      <div class="subsection">
        <p><strong>例1：ボタンを押したらメッセージを出す</strong></p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">HTML</span>
          </div>
          <div class="code-content">
            <pre>&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;クリックイベント&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button onclick="sayHello()"&gt;クリックしてね&lt;/button&gt;
  &lt;script&gt;
    function sayHello() {
      alert("こんにちは！");
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
          </div>
        </div>

        <p><strong>結果：</strong>ボタンを押すと「こんにちは！」とポップアップ</p>

        <div class="highlight-box">
          <h4>解説</h4>
          <ul>
            <li><code>onclick</code> は「クリックされたとき」に発動するイベント</li>
            <li><code>sayHello()</code> はボタンを押した"瞬間"に呼ばれる関数となります。</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section 3 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 3</span>
        <h2 class="section-title">onmouseover（マウスが乗ったとき）</h2>
      </div>

      <div class="intro-text">
        <p><strong>ファイル：Chapter_8-2 \ index.html に、下記を追記してみよう</strong></p>
      </div>

      <div class="subsection">
        <p><strong>例2：マウスを乗せたら色を変える</strong></p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">HTML</span>
          </div>
          <div class="code-content">
            <pre>&lt;p id="text" onmouseover="changeColor()"&gt;マウスをここに乗せてね&lt;/p&gt;

&lt;script&gt;
  function changeColor() {
    document.getElementById("text").style.color = "red";
  }
&lt;/script&gt;</pre>
          </div>
        </div>

        <p><strong>結果：</strong>マウスを重ねると文字が赤く変わります</p>
        <p><code>.style.プロパティ名</code> でCSSを動的に変えることができます。</p>
      </div>
    </section>

    <!-- Section 4 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 4</span>
        <h2 class="section-title">onchange（入力が変わったとき）</h2>
      </div>

      <div class="subsection">
        <p><strong>例3：入力欄の内容をリアルタイムで表示</strong></p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">HTML</span>
          </div>
          <div class="code-content">
            <pre>&lt;input type="text" id="name" onchange="showName()"&gt;
&lt;p id="output"&gt;&lt;/p&gt;

&lt;script&gt;
  function showName() {
    let value = document.getElementById("name").value;
    document.getElementById("output").textContent = "こんにちは、" + value + "さん！";
  }
&lt;/script&gt;</pre>
          </div>
        </div>

        <p><strong>結果：</strong>入力の都度、フォームの下に「こんにちは、○○（入力内容）さん！」と表示</p>

        <p>id = "name" となっている入力フォームの値を、<code>.value</code>で取得できます。入力内容が変わる都度、フォームの下に取得した文字を表示します。</p>
      </div>
    </section>

    <!-- Section 5 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5</span>
        <h2 class="section-title">イベントと関数の関係図</h2>
      </div>

      <div class="subsection">
        <div class="highlight-box">
          <h4>処理の流れ</h4>
          <p>[ユーザーがボタンをクリック]<br>↓<br>click イベント発生<br>↓<br>JavaScriptが関数を実行<br>↓<br>関数内の処理が実行される</p>
        </div>

        <ul>
          <li>イベントは「<strong>トリガー（引き金）</strong>」です</li>
          <li>関数は「<strong>そのときに起こる動作</strong>」となります。</li>
        </ul>

        <p>該当のイベントが発生しない限りは、JavaScriptは一切動きません。</p>
      </div>
    </section>

    <!-- Section 6 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 6</span>
        <h2 class="section-title">イベントをHTMLに直接書かない方法（.addEventListener）</h2>
      </div>

      <div class="subsection">
        <p>実務では「HTMLに&lt;script&gt;タグでイベントを書く」より、JavaScript側で登録する書き方が主流です。</p>

        <p><strong>例4：addEventListenerの使い方</strong></p>

        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">HTML</span>
          </div>
          <div class="code-content">
            <pre>&lt;button id="btn"&gt;押してみよう&lt;/button&gt;

&lt;script&gt;
  document.getElementById("btn").addEventListener("click", () => {
    alert("ボタンが押されました！");
  });
&lt;/script&gt;</pre>
          </div>
        </div>

        <p><code>addEventListener(イベント名, 関数)</code></p>

        <div class="highlight-box">
          <h4>この書き方のメリット</h4>
          <ul>
            <li>HTMLがスッキリし、読みやすくなる</li>
            <li>HTMLはHTML、JavaScriptはJavaScriptでソースコードを管理しやすくなる</li>
            <li>複数イベントや、柔軟なイベント処置を登録できる</li>
            <li>React や Vueなどモダン開発でも同じ考え方</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Section 7 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 7</span>
        <h2 class="section-title">よく使うイベント一覧（覚えておこう！）</h2>
      </div>

      <div class="subsection">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>イベント</th>
                <th>タイミング</th>
                <th>よくある使い道</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>click</td>
                <td>クリックされた</td>
                <td>ボタン操作・リンク処理</td>
              </tr>
              <tr>
                <td>mouseover</td>
                <td>マウスが乗った</td>
                <td>ボタンを光らせる、拡大する、強調する</td>
              </tr>
              <tr>
                <td>mouseout</td>
                <td>マウスが離れた</td>
                <td>元の状態に戻す</td>
              </tr>
              <tr>
                <td>change</td>
                <td>入力が変更された</td>
                <td>入力チェック</td>
              </tr>
              <tr>
                <td>focus</td>
                <td>フォームにカーソルが入った</td>
                <td>入力強調</td>
              </tr>
              <tr>
                <td>keydown</td>
                <td>キーを押した</td>
                <td>ショートカット操作</td>
              </tr>
              <tr>
                <td>load</td>
                <td>ページが読み込まれた</td>
                <td>初期表示の設定</td>
              </tr>
              <tr>
                <td>submit</td>
                <td>フォーム送信</td>
                <td>確認・バリデーション</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p>イベント設定時は、<code>.addEventListener("イベント名")</code>のセットが決まりです。どんな操作をトリガーにするかは、すべて「イベント名」の部分を書き換える必要があります。</p>
      </div>
    </section>

    <!-- Section 8 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 8</span>
        <h2 class="section-title">実践：マウスでボタンの色を変える</h2>
      </div>

      <div class="subsection">
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">HTML</span>
          </div>
          <div class="code-content">
            <pre>&lt;button id="btn"&gt;マウスを乗せてね&lt;/button&gt;

&lt;script&gt;
  let btn = document.getElementById("btn");

  btn.addEventListener("mouseover", () => {
    btn.style.backgroundColor = "lightblue";
  });

  btn.addEventListener("mouseout", () => {
    btn.style.backgroundColor = "";
  });
&lt;/script&gt;</pre>
          </div>
        </div>

        <p><strong>結果：</strong>ボタンにマウスを乗せると色が変わり、離すと戻る</p>
      </div>
    </section>

    <!-- Section 9 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 9</span>
        <h2 class="section-title">複数のボタンにイベントをつける</h2>
      </div>

      <div class="subsection">
        <div class="code-block">
          <div class="code-header">
            <span class="code-lang">HTML</span>
          </div>
          <div class="code-content">
            <pre>&lt;button class="menu"&gt;メニューA&lt;/button&gt;
&lt;button class="menu"&gt;メニューB&lt;/button&gt;
&lt;button class="menu"&gt;メニューC&lt;/button&gt;

&lt;script&gt;
  let menus = document.querySelectorAll(".menu");

  menus.forEach((btn) => {
    btn.addEventListener("click", () => {
      alert(btn.textContent + " がクリックされました！");
    });
  });
&lt;/script&gt;</pre>
          </div>
        </div>

        <p><code>document.querySelectorAll()</code> で同じクラスの要素をまとめて取得できます。まとめて取得された各menuクラスには、配列で取得されます。それぞれのmenu[0],[1],[2]は、変数menusに入ります。forEachで、menusの中のひとつひとつにクリックイベントを設定しています。</p>

        <p><strong>結果：</strong>どのボタンを押してもちゃんと「ボタン名 + がクリックされました」のポップアップが表示される。</p>
      </div>
    </section>

    <!-- Section 10 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 10</span>
        <h2 class="section-title">練習課題</h2>
      </div>

      <div class="intro-text">
        <p><strong>ファイル：project_6-11 \ index.html に書いてみよう。</strong></p>
      </div>

      <div class="subsection">
        <h4>問1</h4>
        <p>ボタンをクリックしたら「クリックされました！」とアラートを出そう。</p>

        <h4>問2</h4>
        <p>マウスを文字の上に乗せたら赤くする。</p>

        <h4>問3</h4>
        <p>入力欄の文字をリアルタイムで別の &lt;p&gt; に表示する。</p>

        <h4>問4</h4>
        <p>複数ボタン（A,B,C）を作り、押したボタン名を表示する。</p>

        <h4>問5</h4>
        <p>ページが読み込まれたときに「ようこそ！」を表示する。</p>

        <details class="demo-details">
          <summary>解答例を見る</summary>
          <div class="demo-content">
            <h4>問1</h4>
            <div class="code-block">
              <pre>&lt;button onclick="alert('クリックされました！')"&gt;押してね&lt;/button&gt;</pre>
              </div>
            </div>

            <h4>問2</h4>
            <div class="code-block">
              <pre>&lt;p id="text" onmouseover="this.style.color='red'"&gt;赤くなるよ！&lt;/p&gt;</pre>
              </div>
            </div>

            <h4>問3</h4>
            <div class="code-block">
              <pre>&lt;input type="text" id="input"&gt;
&lt;p id="display"&gt;&lt;/p&gt;
&lt;script&gt;
  document.getElementById("input").addEventListener("input", () => {
    let v = document.getElementById("input").value;
    document.getElementById("display").textContent = v;
  });
&lt;/script&gt;</pre>
              </div>
            </div>

            <h4>問4</h4>
            <div class="code-block">
              <pre>&lt;button class="btn"&gt;A&lt;/button&gt;
&lt;button class="btn"&gt;B&lt;/button&gt;
&lt;button class="btn"&gt;C&lt;/button&gt;
&lt;script&gt;
  document.querySelectorAll(".btn").forEach((b) => {
    b.addEventListener("click", () => alert(b.textContent + "を押しました"));
  });
&lt;/script&gt;</pre>
              </div>
            </div>

            <h4>問5</h4>
            <div class="code-block">
              <pre>window.addEventListener("load", () => alert("ようこそ！"));</pre>
              </div>
            </div>
          </div>
        </details>
      </div>
    </section>

    <!-- まとめ -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">まとめ</span>
        <h2 class="section-title">第8章のまとめ</h2>
      </div>

      <div class="summary-box">
        <ul>
          <li><strong>イベント</strong>はユーザー操作のトリガー（クリック・入力・マウスなど）</li>
          <li><strong>onclick</strong>などでHTMLに直接イベントを設定できる</li>
          <li><strong>addEventListener</strong>でJavaScript側からイベント登録（推奨）</li>
          <li><strong>querySelectorAll + forEach</strong>で複数要素に一括設定</li>
          <li>よく使うイベント：<strong>click, mouseover, mouseout, change, load</strong></li>
        </ul>
      </div>
    </section>
  </div>

  <!-- ページナビゲーション -->
  <div class="page-nav">
    <a href="7js-dom.html" class="page-nav-btn prev">
      <div class="page-nav-label">前へ</div>
      <div class="page-nav-title">DOM操作</div>
    </a>
    <a href="9js-miniapps.html" class="page-nav-btn next">
      <div class="page-nav-label">次へ</div>
      <div class="page-nav-title">実践：ミニアプリ制作</div>
    </a>
  </div>

  <footer class="footer">
    <p>JavaScript入門 - 職業訓練校教材</p>
  </footer>

  <script src="../shared/demo.js"></script>
</body>
</html>
