<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 5: データ登録（MyBatis版） - プロンプトプログラミング</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/common.css">
  <link rel="stylesheet" href="../../shared/css/prompt-gemini.css">
  <style>
    :root {
      --primary: #E53935;
      --primary-dark: #C62828;
      --primary-light: #FFEBEE;
      --primary-lighter: #FFCDD2;
    }
    .nav-category-links { display: none; }
    .prompt-card h4 { margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; }
    .code-block { background: #1e293b; border-radius: 12px; margin: 16px 0; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    .code-header { background: rgba(255,255,255,0.1); padding: 10px 16px; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .code-dots { display: flex; gap: 6px; }
    .code-dot { width: 12px; height: 12px; border-radius: 50%; }
    .code-dot.red { background: #ff5f56; }
    .code-dot.yellow { background: #ffbd2e; }
    .code-dot.green { background: #27ca40; }
    .code-title { color: rgba(255,255,255,0.7); font-size: 12px; font-family: 'JetBrains Mono', monospace; }
    .code-content { padding: 16px; overflow-x: auto; }
    .code-content pre { margin: 0; font-family: 'JetBrains Mono', monospace; font-size: 13px; line-height: 1.6; color: #e2e8f0; white-space: pre; }
    .code-keyword { color: #c084fc; }
    .code-class { color: #67e8f9; }
    .code-string { color: #86efac; }
    .code-comment { color: #94a3b8; }
    .code-annotation { color: #fbbf24; }

    .diagram-container {
      background: linear-gradient(135deg, #E53935 0%, #C62828 100%);
      border-radius: 16px;
      padding: 24px;
      margin: 24px 0;
    }
    .diagram-title {
      color: white;
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .diagram-content {
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      padding: 24px;
    }
    .mapping-diagram {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 20px;
      align-items: center;
    }
    .mapping-box {
      background: #f8fafc;
      border-radius: 12px;
      padding: 16px;
      border: 2px solid #e2e8f0;
    }
    .mapping-box.java { border-color: #E53935; }
    .mapping-box.db { border-color: #fbbf24; }
    .mapping-title {
      font-weight: 700;
      font-size: 0.9rem;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .mapping-box.java .mapping-title { color: #E53935; }
    .mapping-box.db .mapping-title { color: #d97706; }
    .mapping-item {
      font-size: 0.8rem;
      padding: 4px 8px;
      background: #e2e8f0;
      border-radius: 4px;
      margin-bottom: 4px;
      font-family: 'JetBrains Mono', monospace;
    }
    .mapping-arrow {
      color: #E53935;
      font-size: 2rem;
      font-weight: bold;
    }
    .flow-diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      gap: 12px;
    }
    .flow-box {
      background: #f1f5f9;
      border: 2px solid #e2e8f0;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 600;
      text-align: center;
    }
    .flow-box.highlight {
      background: linear-gradient(135deg, #E53935, #C62828);
      color: white;
      border-color: transparent;
    }
    .flow-arrow {
      color: #E53935;
      font-size: 1.2rem;
    }
    .mybatis-badge {
      display: inline-block;
      background: linear-gradient(135deg, #E53935, #C62828);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      margin-left: 8px;
    }
  </style>
</head>
<body>
  <nav class="global-nav"></nav>
  <script src="../../shared/js/nav-promptpg-step.js"></script>

  <div class="container">
    <header class="chapter-header">
      <div class="chapter-badge">Chapter</div>
      <div class="chapter-number">5</div>
      <h1 class="chapter-title">データ登録<span class="mybatis-badge">MyBatis版</span></h1>
      <p class="chapter-subtitle">ModelとMapperを作成し、INSERT処理を実装</p>
    </header>

    <nav class="toc">
      <h2 class="toc-title">この Chapter の内容</h2>
      <ul class="toc-list">
        <li class="toc-item"><span class="toc-number">5-1</span>Modelクラスの作成</li>
        <li class="toc-item"><span class="toc-number">5-2</span>Mapperインターフェースの作成</li>
        <li class="toc-item"><span class="toc-number">5-3</span>データ登録処理の実装</li>
      </ul>
    </nav>

    <!-- このChapterで作成するファイル -->
    <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin: 32px 0;">
      <h3 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: #334155;">
        <span class="material-icons" style="color: #E53935;">folder_open</span>
        このChapterで作成・編集するファイル
      </h3>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <!-- フォルダ構成 -->
        <div style="background: #1e293b; border-radius: 8px; padding: 16px; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #e2e8f0;">
          <div style="color: #94a3b8; margin-bottom: 8px;">src/main/java/com/example/todo/</div>
          <div style="padding-left: 8px;">
            <div style="color: #86efac;">├── model/</div>
            <div style="padding-left: 16px; color: #fbbf24;">│   └── Todo.java <span style="color: #94a3b8;">← 5-1で作成</span></div>
            <div style="color: #67e8f9;">├── mapper/</div>
            <div style="padding-left: 16px; color: #fbbf24;">│   └── TodoMapper.java <span style="color: #94a3b8;">← 5-2で作成</span></div>
            <div style="color: #a78bfa;">├── service/</div>
            <div style="padding-left: 16px; color: #fbbf24;">│   └── TodoService.java <span style="color: #94a3b8;">← 5-3で作成</span></div>
            <div style="color: #f472b6;">└── controller/</div>
            <div style="padding-left: 16px; color: #fbbf24;">    └── TodoController.java <span style="color: #94a3b8;">← 5-3で編集</span></div>
          </div>
          <div style="color: #94a3b8; margin-top: 12px;">src/main/resources/</div>
          <div style="padding-left: 8px;">
            <div style="color: #fb923c;">└── mapper/</div>
            <div style="padding-left: 16px; color: #fbbf24;">    └── TodoMapper.xml <span style="color: #94a3b8;">← 5-2で作成</span></div>
          </div>
        </div>

        <!-- 各ファイルの役割 -->
        <div>
          <div style="font-weight: 600; color: #334155; margin-bottom: 12px; font-size: 0.9rem;">各ファイルの役割</div>
          <table style="width: 100%; border-collapse: collapse; font-size: 0.8rem;">
            <tr style="background: #f1f5f9;">
              <th style="padding: 8px; text-align: left; border: 1px solid #e2e8f0; width: 35%;">ファイル</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #e2e8f0;">役割</th>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #86efac; font-weight: 600;">Todo.java</td>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #64748b;">データの入れ物（DBテーブルと対応）</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #67e8f9; font-weight: 600;">TodoMapper.java</td>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #64748b;">SQLを呼び出すメソッドを定義</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #fb923c; font-weight: 600;">TodoMapper.xml</td>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #64748b;">実際のSQL文を記述</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #a78bfa; font-weight: 600;">TodoService.java</td>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #64748b;">業務ロジック（データ加工など）</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #f472b6; font-weight: 600;">TodoController.java</td>
              <td style="padding: 8px; border: 1px solid #e2e8f0; color: #64748b;">リクエスト受付・画面遷移</td>
            </tr>
          </table>
        </div>
      </div>

      <!-- 処理の流れ -->
      <div style="margin-top: 16px; padding: 12px; background: #dbeafe; border-radius: 8px;">
        <div style="font-weight: 600; color: #1e40af; margin-bottom: 8px; font-size: 0.85rem; display: flex; align-items: center; gap: 6px;">
          <span class="material-icons" style="font-size: 1rem;">route</span> データの流れ
        </div>
        <div style="display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap; font-size: 0.8rem;">
          <span style="background: #f472b6; color: white; padding: 4px 10px; border-radius: 4px; font-weight: 600;">Controller</span>
          <span style="color: #1e40af;">→</span>
          <span style="background: #a78bfa; color: white; padding: 4px 10px; border-radius: 4px; font-weight: 600;">Service</span>
          <span style="color: #1e40af;">→</span>
          <span style="background: #67e8f9; color: #1e293b; padding: 4px 10px; border-radius: 4px; font-weight: 600;">Mapper.java</span>
          <span style="color: #1e40af;">→</span>
          <span style="background: #fb923c; color: white; padding: 4px 10px; border-radius: 4px; font-weight: 600;">Mapper.xml</span>
          <span style="color: #1e40af;">→</span>
          <span style="background: #fbbf24; color: #1e293b; padding: 4px 10px; border-radius: 4px; font-weight: 600;">DB</span>
        </div>
      </div>
    </div>

    <!-- MyBatisとは -->
    <section class="section" style="margin-top: 32px;">
      <div class="section-header">
        <h2 class="section-title" style="display: flex; align-items: center; gap: 12px;">
          <span class="material-icons" style="color: #E53935; font-size: 1.5rem;">storage</span>
          MyBatisとは
        </h2>
      </div>

      <div class="intro-text">
        <p><strong>MyBatis</strong>は、JavaアプリケーションとデータベースをつなぐSQLマッピングフレームワークです。開発者が書いたSQLをJavaメソッドに紐づけ、データベース操作を簡単に行えるようにします。</p>
      </div>

      <!-- ORMとは -->
      <div style="background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%); border-radius: 16px; padding: 24px; margin: 24px 0; color: white;">
        <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: white;">
          <span class="material-icons" style="color: white;">psychology</span> ORMとは？
        </h4>
        <div style="background: rgba(255,255,255,0.95); border-radius: 12px; padding: 20px; color: #334155;">
          <p style="margin: 0 0 16px 0; font-size: 0.9rem;">
            <strong>ORM（Object-Relational Mapping）</strong>とは、オブジェクト指向プログラミングとリレーショナルデータベースの間を橋渡しする技術です。
          </p>

          <!-- なぜORMが必要か -->
          <div style="background: #fef3c7; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
            <div style="font-weight: 700; color: #92400e; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
              <span class="material-icons" style="font-size: 1rem;">help_outline</span> なぜORMが必要？
            </div>
            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 12px; align-items: center; font-size: 0.85rem;">
              <div style="text-align: center;">
                <div style="background: #3b82f6; color: white; padding: 8px 12px; border-radius: 6px; font-weight: 600;">Javaの世界</div>
                <div style="margin-top: 4px; color: #64748b;">オブジェクト<br><code style="font-size: 0.75rem;">Todo todo = new Todo();</code></div>
              </div>
              <div style="text-align: center;">
                <span style="color: #dc2626; font-size: 1.2rem;">≠</span>
                <div style="font-size: 0.7rem; color: #dc2626; font-weight: 600;">データ構造が<br>異なる</div>
              </div>
              <div style="text-align: center;">
                <div style="background: #f59e0b; color: white; padding: 8px 12px; border-radius: 6px; font-weight: 600;">DBの世界</div>
                <div style="margin-top: 4px; color: #64748b;">テーブル/行<br><code style="font-size: 0.75rem;">SELECT * FROM todos</code></div>
              </div>
            </div>
            <div style="text-align: center; margin-top: 12px; font-size: 0.85rem; color: #78716c;">
              この「ギャップ」を埋めるのがORMの役割
            </div>
          </div>

          <!-- ORMの種類 -->
          <div style="font-weight: 700; color: #334155; margin-bottom: 12px; display: flex; align-items: center; gap: 6px;">
            <span class="material-icons" style="font-size: 1rem; color: #7c3aed;">category</span> ORMの種類とMyBatisの位置づけ
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 0.85rem;">
            <div style="background: #f1f5f9; border-radius: 8px; padding: 12px; border: 2px solid #e2e8f0;">
              <div style="font-weight: 700; color: #7c3aed; margin-bottom: 6px;">フルORM</div>
              <div style="color: #64748b; margin-bottom: 8px;">SQLを自動生成</div>
              <div style="display: flex; flex-wrap: wrap; gap: 4px;">
                <span style="background: #e2e8f0; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem;">JPA/Hibernate</span>
                <span style="background: #e2e8f0; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem;">Entity Framework</span>
              </div>
            </div>
            <div style="background: #fef2f2; border-radius: 8px; padding: 12px; border: 2px solid #E53935;">
              <div style="font-weight: 700; color: #E53935; margin-bottom: 6px;">SQLマッパー</div>
              <div style="color: #64748b; margin-bottom: 8px;">SQLを自分で書く</div>
              <div style="display: flex; flex-wrap: wrap; gap: 4px;">
                <span style="background: #E53935; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">MyBatis ★</span>
                <span style="background: #e2e8f0; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem;">Dapper</span>
              </div>
            </div>
          </div>
          <div style="margin-top: 12px; padding: 10px; background: #ecfdf5; border-radius: 6px; font-size: 0.8rem; color: #065f46;">
            <strong>MyBatis</strong>は「SQLマッパー」に分類され、SQLの自由度を保ちながらオブジェクトとのマッピングを自動化します。
          </div>
        </div>
      </div>

      <!-- MyBatisの特徴 -->
      <div style="background: linear-gradient(135deg, #E53935 0%, #C62828 100%); border-radius: 16px; padding: 24px; margin: 24px 0; color: white;">
        <h4 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: white;">
          <span class="material-icons" style="color: white;">star</span> MyBatisの特徴
        </h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
          <div style="background: rgba(255,255,255,0.95); border-radius: 12px; padding: 16px; color: #334155;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <span class="material-icons" style="color: #E53935;">edit_note</span>
              <span style="font-weight: 700; color: #E53935;">SQLを直接記述</span>
            </div>
            <p style="margin: 0; font-size: 0.85rem; color: #64748b;">SQLを自分で書くので、複雑なクエリも思い通りに実装できる</p>
          </div>
          <div style="background: rgba(255,255,255,0.95); border-radius: 12px; padding: 16px; color: #334155;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <span class="material-icons" style="color: #E53935;">tune</span>
              <span style="font-weight: 700; color: #E53935;">柔軟性が高い</span>
            </div>
            <p style="margin: 0; font-size: 0.85rem; color: #64748b;">動的SQL、複数テーブルのJOIN、サブクエリなど自由自在</p>
          </div>
          <div style="background: rgba(255,255,255,0.95); border-radius: 12px; padding: 16px; color: #334155;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <span class="material-icons" style="color: #E53935;">school</span>
              <span style="font-weight: 700; color: #E53935;">学習コストが低い</span>
            </div>
            <p style="margin: 0; font-size: 0.85rem; color: #64748b;">SQLの知識があれば、すぐに使い始められる</p>
          </div>
        </div>
      </div>

      <!-- MyBatisの仕組み図解 -->
      <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 20px; margin: 24px 0;">
        <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1rem; color: #334155;">
          <span class="material-icons" style="color: #E53935;">account_tree</span> MyBatisの仕組み
        </h4>
        <div style="display: flex; align-items: flex-end; justify-content: center; gap: 12px; flex-wrap: wrap; padding: 16px;">
          <div style="text-align: center;">
            <div style="font-size: 0.7rem; color: #64748b; margin-bottom: 4px; font-weight: 600;">Webアプリ</div>
            <div style="background: #3b82f6; color: white; padding: 12px 20px; border-radius: 8px; text-align: center; font-weight: 600; min-height: 70px; display: flex; flex-direction: column; justify-content: center;">
              <span class="material-icons" style="display: block; margin-bottom: 4px;">code</span>
              Javaコード
            </div>
          </div>
          <div style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding-bottom: 24px;">
            <span style="color: #E53935; font-size: 1.5rem;">→</span>
            <span style="font-size: 0.7rem; color: #64748b;">メソッド呼び出し</span>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 0.7rem; color: #64748b; margin-bottom: 4px; font-weight: 600;">DB連携</div>
            <div style="background: linear-gradient(135deg, #E53935, #C62828); color: white; padding: 12px 20px; border-radius: 8px; text-align: center; font-weight: 600; border: 3px solid #fbbf24; min-height: 70px; display: flex; flex-direction: column; justify-content: center;">
              <span class="material-icons" style="display: block; margin-bottom: 4px;">sync_alt</span>
              MyBatis<br><small>SQLマッピング</small>
            </div>
          </div>
          <div style="display: flex; flex-direction: column; align-items: center; gap: 4px; padding-bottom: 24px;">
            <span style="color: #E53935; font-size: 1.5rem;">→</span>
            <span style="font-size: 0.7rem; color: #64748b;">SQL実行</span>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 0.7rem; color: #64748b; margin-bottom: 4px; font-weight: 600;">RDBMS</div>
            <div style="background: #f59e0b; color: white; padding: 12px 20px; border-radius: 8px; text-align: center; font-weight: 600; min-height: 70px; display: flex; flex-direction: column; justify-content: center;">
              <span class="material-icons" style="display: block; margin-bottom: 4px;">table_chart</span>
              データベース
            </div>
          </div>
        </div>
        <div style="background: #e2e8f0; border-radius: 8px; padding: 12px; margin-top: 12px; font-size: 0.85rem; color: #475569;">
          <strong>ポイント:</strong> MyBatisは「SQLとJavaオブジェクトの橋渡し役」です。Javaメソッドを呼ぶと、対応するSQLが実行され、結果がJavaオブジェクトに自動変換されます。
        </div>
      </div>

      <!-- なぜMyBatisを使うのか -->
      <div class="info-box" style="background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border: none; margin: 16px 0;">
        <div class="info-box-title" style="color: #065f46;"><span class="material-icons">lightbulb</span> なぜMyBatisを使うのか？</div>
        <div class="info-box-content">
          <ul style="margin: 0; padding-left: 20px; color: #047857;">
            <li><strong>SQLの知識が活かせる</strong> - 既存のSQLスキルをそのまま使える</li>
            <li><strong>パフォーマンス調整が容易</strong> - SQLを直接書くので、最適化しやすい</li>
            <li><strong>既存DBとの相性が良い</strong> - 既存テーブル設計をそのまま利用可能</li>
            <li><strong>日本での採用率が高い</strong> - 実務で広く使われているため、就職に有利</li>
          </ul>
        </div>
      </div>

      <!-- ビルドツールと依存関係 -->
      <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 20px; margin: 24px 0;">
        <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1rem; color: #334155;">
          <span class="material-icons" style="color: #E53935;">build</span> MyBatisを使うための準備（ビルドツール）
        </h4>

        <div style="background: #fef3c7; border-radius: 8px; padding: 12px; margin-bottom: 16px; font-size: 0.85rem;">
          <div style="display: flex; align-items: center; gap: 6px; color: #92400e; font-weight: 600;">
            <span class="material-icons" style="font-size: 1rem;">info</span>
            ビルドツールとは？
          </div>
          <p style="margin: 8px 0 0 0; color: #78716c;">
            <strong>ビルドツール</strong>は、外部ライブラリ（MyBatis等）のダウンロードや、プロジェクトのコンパイル・実行を自動化するツールです。Spring Bootでは主に<strong>Maven</strong>か<strong>Gradle</strong>を使用します。
          </p>
        </div>

        <!-- Maven/Gradle比較 -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
          <!-- Maven -->
          <div>
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <span style="background: #dc2626; color: white; padding: 2px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">Maven</span>
              <span style="font-size: 0.8rem; color: #64748b;">pom.xml で設定</span>
            </div>
            <div style="background: #1e293b; border-radius: 8px; padding: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: #e2e8f0; overflow-x: auto;">
              <div style="color: #94a3b8;">&lt;!-- pom.xml --&gt;</div>
              <div>&lt;<span style="color: #f472b6;">dependency</span>&gt;</div>
              <div style="padding-left: 12px;">&lt;<span style="color: #67e8f9;">groupId</span>&gt;<span style="color: #86efac;">org.mybatis.spring.boot</span>&lt;/<span style="color: #67e8f9;">groupId</span>&gt;</div>
              <div style="padding-left: 12px;">&lt;<span style="color: #67e8f9;">artifactId</span>&gt;<span style="color: #86efac;">mybatis-spring-boot-starter</span>&lt;/<span style="color: #67e8f9;">artifactId</span>&gt;</div>
              <div style="padding-left: 12px;">&lt;<span style="color: #67e8f9;">version</span>&gt;<span style="color: #86efac;">3.0.3</span>&lt;/<span style="color: #67e8f9;">version</span>&gt;</div>
              <div>&lt;/<span style="color: #f472b6;">dependency</span>&gt;</div>
            </div>
          </div>
          <!-- Gradle -->
          <div>
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
              <span style="background: #22c55e; color: white; padding: 2px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">Gradle</span>
              <span style="font-size: 0.8rem; color: #64748b;">build.gradle で設定</span>
            </div>
            <div style="background: #1e293b; border-radius: 8px; padding: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: #e2e8f0; overflow-x: auto;">
              <div style="color: #94a3b8;">// build.gradle</div>
              <div><span style="color: #c084fc;">dependencies</span> {</div>
              <div style="padding-left: 12px;"><span style="color: #fbbf24;">implementation</span> <span style="color: #86efac;">'org.mybatis.spring.boot:</span></div>
              <div style="padding-left: 24px;"><span style="color: #86efac;">mybatis-spring-boot-starter:3.0.3'</span></div>
              <div>}</div>
            </div>
          </div>
        </div>

        <!-- Spring Initializrでの選択 -->
        <div style="background: #dbeafe; border-radius: 8px; padding: 12px; font-size: 0.85rem;">
          <div style="display: flex; align-items: center; gap: 6px; color: #1e40af; font-weight: 600; margin-bottom: 8px;">
            <span class="material-icons" style="font-size: 1rem;">tips_and_updates</span>
            Spring Initializrで簡単設定
          </div>
          <p style="margin: 0; color: #1e40af;">
            <a href="https://start.spring.io" target="_blank" style="color: #2563eb; text-decoration: underline;">start.spring.io</a> でプロジェクト作成時に「<strong>MyBatis Framework</strong>」を選択すれば、依存関係が自動で追加されます。手動で書く必要はありません。
          </p>
        </div>
      </div>

      <!-- application.properties設定 -->
      <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 20px; margin: 24px 0;">
        <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1rem; color: #334155;">
          <span class="material-icons" style="color: #E53935;">settings</span> application.propertiesの設定
        </h4>

        <div style="background: #fef3c7; border-radius: 8px; padding: 12px; margin-bottom: 16px; font-size: 0.85rem;">
          <div style="display: flex; align-items: center; gap: 6px; color: #92400e; font-weight: 600;">
            <span class="material-icons" style="font-size: 1rem;">info</span>
            application.propertiesとは？
          </div>
          <p style="margin: 8px 0 0 0; color: #78716c;">
            Spring Bootアプリケーションの設定ファイルです。データベース接続情報やMyBatisの動作設定を記述します。<br>
            <strong>場所:</strong> <code style="background: #e2e8f0; padding: 2px 6px; border-radius: 4px;">src/main/resources/application.properties</code>
          </p>
        </div>

        <!-- 設定コード -->
        <div style="background: #1e293b; border-radius: 8px; padding: 16px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #e2e8f0; overflow-x: auto; margin-bottom: 16px;">
          <div style="color: #94a3b8; margin-bottom: 8px;"># ========== データベース接続設定 ==========</div>
          <div><span style="color: #67e8f9;">spring.datasource.url</span>=<span style="color: #86efac;">jdbc:mysql://localhost:3306/todo_db</span></div>
          <div><span style="color: #67e8f9;">spring.datasource.username</span>=<span style="color: #86efac;">root</span></div>
          <div><span style="color: #67e8f9;">spring.datasource.password</span>=<span style="color: #86efac;">password</span></div>
          <div><span style="color: #67e8f9;">spring.datasource.driver-class-name</span>=<span style="color: #86efac;">com.mysql.cj.jdbc.Driver</span></div>
          <div style="margin-top: 12px;"></div>
          <div style="color: #94a3b8;"># ========== MyBatis設定 ==========</div>
          <div><span style="color: #67e8f9;">mybatis.mapper-locations</span>=<span style="color: #86efac;">classpath:mapper/*.xml</span> <span style="color: #94a3b8;"># ① XMLファイルの場所</span></div>
          <div><span style="color: #67e8f9;">mybatis.configuration.map-underscore-to-camel-case</span>=<span style="color: #fbbf24;">true</span></div>
          <div style="margin-top: 12px;"></div>
          <div style="color: #94a3b8;"># ========== 開発用設定（ログ出力） ==========</div>
          <div><span style="color: #67e8f9;">logging.level.com.example.todo.mapper</span>=<span style="color: #86efac;">DEBUG</span></div>
        </div>

        <!-- 設定項目の説明 -->
        <div style="font-weight: 600; color: #334155; margin-bottom: 12px; font-size: 0.9rem;">主要な設定項目</div>
        <table style="width: 100%; border-collapse: collapse; font-size: 0.8rem;">
          <tr style="background: #f1f5f9;">
            <th style="padding: 8px 12px; text-align: left; border: 1px solid #e2e8f0; width: 40%;">設定項目</th>
            <th style="padding: 8px 12px; text-align: left; border: 1px solid #e2e8f0;">説明</th>
          </tr>
          <tr>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.7rem; color: #E53935;">spring.datasource.url</td>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; color: #64748b;">データベースの接続URL</td>
          </tr>
          <tr>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.7rem; color: #E53935;">spring.datasource.username</td>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; color: #64748b;">DBユーザー名</td>
          </tr>
          <tr>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.7rem; color: #E53935;">spring.datasource.password</td>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; color: #64748b;">DBパスワード</td>
          </tr>
          <tr>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.7rem; color: #E53935;">mybatis.mapper-locations</td>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; color: #64748b;">XMLマッパーファイルの場所（XML方式のみ）</td>
          </tr>
          <tr>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.7rem; color: #E53935;">mybatis.configuration<br>.map-underscore-to-camel-case</td>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; color: #64748b;">DB列名（snake_case）→ Javaフィールド名（camelCase）を自動変換</td>
          </tr>
          <tr>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.7rem; color: #E53935;">logging.level.*.mapper</td>
            <td style="padding: 8px 12px; border: 1px solid #e2e8f0; color: #64748b;">実行されるSQLをコンソールに出力（デバッグ用）</td>
          </tr>
        </table>

        <!-- キャメルケース変換の図解 -->
        <div style="background: #ecfdf5; border-radius: 8px; padding: 12px; margin-top: 16px; font-size: 0.85rem;">
          <div style="display: flex; align-items: center; gap: 6px; color: #065f46; font-weight: 600; margin-bottom: 8px;">
            <span class="material-icons" style="font-size: 1rem;">swap_horiz</span>
            map-underscore-to-camel-case の効果
          </div>
          <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
            <code style="background: #fbbf24; color: #1e293b; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">created_at</code>
            <span style="color: #065f46;">→</span>
            <code style="background: #3b82f6; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">createdAt</code>
            <span style="color: #64748b; font-size: 0.8rem;">（自動でマッピング）</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ファイル間の相関図解 -->
    <div class="diagram-container">
      <div class="diagram-title">
        <span class="material-icons">account_tree</span>
        ファイル構成と相関図（MyBatis）
      </div>
      <div class="diagram-content">
        <!-- ディレクトリ構造（XML方式メイン） -->
        <div style="margin-bottom: 24px;">
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <span style="background: #E53935; color: white; padding: 2px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">本教材</span>
            <span style="font-weight: 600; color: #C62828; font-size: 0.9rem;">XML方式（実務で標準的）</span>
          </div>
          <div style="background: #1e293b; border-radius: 8px; padding: 16px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #e2e8f0;">
            <div style="color: #94a3b8; margin-bottom: 8px;">src/main/</div>
            <div style="padding-left: 8px;">
              <div style="color: #fbbf24;">java/com/example/todo/</div>
              <div style="padding-left: 16px;">
                <div style="color: #86efac;">├── model/Todo.java</div>
                <div style="color: #67e8f9;">├── mapper/TodoMapper.java <span style="color: #94a3b8;">←メソッド定義のみ</span></div>
                <div style="color: #86efac;">├── service/TodoService.java</div>
                <div style="color: #86efac;">└── controller/TodoController.java</div>
              </div>
              <div style="color: #fbbf24; margin-top: 8px;">resources/</div>
              <div style="padding-left: 16px;">
                <div style="color: #f472b6;">└── mapper/TodoMapper.xml <span style="color: #94a3b8;">←SQL記述</span></div>
              </div>
            </div>
          </div>
          <div style="margin-top: 12px; padding: 10px; background: #fef3c7; border-radius: 6px; font-size: 0.8rem; color: #92400e;">
            <span class="material-icons" style="font-size: 1rem; vertical-align: middle;">info</span>
            <strong>XML方式を採用する理由:</strong> 実務では複雑なSQLや動的SQLが必要になることが多く、XML方式が標準的に使用されます。
          </div>
        </div>

        <!-- Mapper.javaとMapper.xmlの紐付け図 -->
        <div style="background: #f1f5f9; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
          <div style="font-weight: 600; margin-bottom: 12px; font-size: 0.9rem; color: #334155;">
            <span class="material-icons" style="font-size: 1rem; vertical-align: middle; color: #E53935;">link</span>
            XML方式: Mapper.java ↔ Mapper.xml の紐付け
          </div>
          <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 16px; align-items: center;">
            <div style="background: #1e293b; border-radius: 8px; padding: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;">
              <div style="color: #fbbf24; margin-bottom: 4px;">TodoMapper.java</div>
              <div style="color: #c084fc;">@Mapper</div>
              <div style="color: #e2e8f0;">public interface <span style="color: #67e8f9;">TodoMapper</span> {</div>
              <div style="color: #e2e8f0; padding-left: 12px;">List&lt;Todo&gt; <span style="color: #86efac;">findAll</span>();</div>
              <div style="color: #e2e8f0;">}</div>
            </div>
            <div style="text-align: center;">
              <div style="background: #E53935; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">
                namespace<br>+ id で紐付け
              </div>
            </div>
            <div style="background: #1e293b; border-radius: 8px; padding: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;">
              <div style="color: #f472b6; margin-bottom: 4px;">TodoMapper.xml</div>
              <div style="color: #e2e8f0;">&lt;mapper namespace="<span style="color: #86efac;">...TodoMapper</span>"&gt;</div>
              <div style="color: #e2e8f0; padding-left: 12px;">&lt;select id="<span style="color: #86efac;">findAll</span>"&gt;</div>
              <div style="color: #fbbf24; padding-left: 24px;">SELECT * FROM todos</div>
              <div style="color: #e2e8f0; padding-left: 12px;">&lt;/select&gt;</div>
              <div style="color: #e2e8f0;">&lt;/mapper&gt;</div>
            </div>
          </div>
        </div>

        <!-- レイヤー相関図 -->
        <div style="display: grid; grid-template-columns: 1fr 1.2fr; gap: 24px; align-items: start;">
          <!-- 左：レイヤー図 -->
          <div>
            <div style="font-weight: 600; margin-bottom: 12px; font-size: 0.9rem; color: #334155;">レイヤー構造</div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
              <div style="display: flex; align-items: center; gap: 8px;">
                <div style="background: #3b82f6; color: white; padding: 10px 14px; border-radius: 8px; min-width: 120px; text-align: center; font-weight: 600; font-size: 0.85rem;">
                  Controller
                </div>
                <div style="color: #64748b; font-size: 0.75rem;">リクエスト受付</div>
              </div>
              <div style="text-align: center; color: #E53935;">↓</div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <div style="background: #22c55e; color: white; padding: 10px 14px; border-radius: 8px; min-width: 120px; text-align: center; font-weight: 600; font-size: 0.85rem;">
                  Service
                </div>
                <div style="color: #64748b; font-size: 0.75rem;">ビジネスロジック</div>
              </div>
              <div style="text-align: center; color: #E53935;">↓</div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <div style="background: #E53935; color: white; padding: 10px 14px; border-radius: 8px; min-width: 120px; text-align: center; font-weight: 600; font-size: 0.85rem;">
                  Mapper
                </div>
                <div style="color: #64748b; font-size: 0.75rem;">SQL実行</div>
              </div>
              <div style="text-align: center; color: #E53935;">↓</div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <div style="background: #f59e0b; color: white; padding: 10px 14px; border-radius: 8px; min-width: 120px; text-align: center; font-weight: 600; font-size: 0.85rem;">
                  Database
                </div>
                <div style="color: #64748b; font-size: 0.75rem;">データ保存</div>
              </div>
            </div>
          </div>

          <!-- 右：ファイル対応表 -->
          <div>
            <div style="font-weight: 600; margin-bottom: 12px; font-size: 0.9rem; color: #334155;">ファイル対応</div>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.8rem;">
              <tr style="background: #f8fafc;">
                <th style="padding: 8px; text-align: left; border: 1px solid #e2e8f0;">レイヤー</th>
                <th style="padding: 8px; text-align: left; border: 1px solid #e2e8f0;">ファイル</th>
                <th style="padding: 8px; text-align: left; border: 1px solid #e2e8f0;">セクション</th>
              </tr>
              <tr>
                <td style="padding: 8px; border: 1px solid #e2e8f0; color: #7c3aed;">Model</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.75rem;">Todo.java</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0;">5-1</td>
              </tr>
              <tr>
                <td style="padding: 8px; border: 1px solid #e2e8f0; color: #E53935;">Mapper</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.75rem;">TodoMapper.java<br><span style="color: #94a3b8;">(+ TodoMapper.xml)</span></td>
                <td style="padding: 8px; border: 1px solid #e2e8f0;">5-2</td>
              </tr>
              <tr>
                <td style="padding: 8px; border: 1px solid #e2e8f0; color: #22c55e;">Service</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.75rem;">TodoService.java</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0;">5-3</td>
              </tr>
              <tr>
                <td style="padding: 8px; border: 1px solid #e2e8f0; color: #3b82f6;">Controller</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0; font-family: monospace; font-size: 0.75rem;">TodoController.java</td>
                <td style="padding: 8px; border: 1px solid #e2e8f0;">5-3</td>
              </tr>
            </table>
          </div>
        </div>

        <!-- Model の補足 -->
        <div style="margin-top: 16px; padding: 12px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
          <div style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #92400e; font-size: 0.85rem;">
            <span class="material-icons" style="font-size: 1rem;">info</span> Model（Todo.java）
          </div>
          <div style="font-size: 0.8rem; color: #78716c; margin-top: 4px;">
            全レイヤーで共通して使用されるデータ構造。Controller↔Service↔Mapper間でTodoオブジェクトを受け渡し。
          </div>
        </div>
      </div>
    </div>

    <!-- ファイル間の設定値・相関関係（独立セクション） -->
    <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin: 24px 0;">
      <h4 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: #334155;">
        <span class="material-icons" style="color: #E53935;">hub</span>
        ファイル間の設定値・相関関係
      </h4>

      <!-- 全体の相関図 -->
      <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">

        <!-- 1. application.properties → XMLファイル配置 -->
        <div style="background: #fef3c7; border-radius: 8px; padding: 12px; border-left: 4px solid #f59e0b;">
          <div style="font-weight: 600; color: #92400e; margin-bottom: 8px; font-size: 0.85rem;">
            ① application.properties → XMLファイルの場所指定
          </div>
          <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; font-size: 0.8rem;">
            <code style="background: #1e293b; color: #67e8f9; padding: 4px 8px; border-radius: 4px;">mybatis.mapper-locations=<span style="color: #86efac;">classpath:mapper/*.xml</span></code>
            <span style="color: #E53935; font-weight: bold;">→</span>
            <code style="background: #1e293b; color: #f472b6; padding: 4px 8px; border-radius: 4px;">src/main/resources/<span style="color: #86efac;">mapper/</span>TodoMapper.xml</code>
          </div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: #78716c;">
            ※ classpath: は src/main/resources/ を指す
          </div>
        </div>

        <!-- 2. XML namespace → Javaインターフェース -->
        <div style="background: #dbeafe; border-radius: 8px; padding: 12px; border-left: 4px solid #3b82f6;">
          <div style="font-weight: 600; color: #1e40af; margin-bottom: 8px; font-size: 0.85rem;">
            ② XMLのnamespace → Javaインターフェースのフルパス
          </div>
          <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; font-size: 0.8rem;">
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;">namespace="<span style="color: #86efac;">com.example.todo.mapper.TodoMapper</span>"</code>
            <span style="color: #E53935; font-weight: bold;">↔</span>
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;"><span style="color: #c084fc;">package</span> <span style="color: #86efac;">com.example.todo.mapper</span>;</code>
          </div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: #78716c;">
            ※ パッケージ名 + インターフェース名を完全一致させる
          </div>
        </div>

        <!-- 3. XML id → Javaメソッド名 -->
        <div style="background: #dcfce7; border-radius: 8px; padding: 12px; border-left: 4px solid #22c55e;">
          <div style="font-weight: 600; color: #166534; margin-bottom: 8px; font-size: 0.85rem;">
            ③ XMLのid属性 → Javaメソッド名
          </div>
          <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; font-size: 0.8rem;">
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;">&lt;select id="<span style="color: #86efac;">findAll</span>"&gt;</code>
            <span style="color: #E53935; font-weight: bold;">↔</span>
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;">List&lt;Todo&gt; <span style="color: #86efac;">findAll</span>();</code>
          </div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: #78716c;">
            ※ メソッド名とid属性を完全一致させる
          </div>
        </div>

        <!-- 4. resultType → Modelクラス -->
        <div style="background: #fce7f3; border-radius: 8px; padding: 12px; border-left: 4px solid #ec4899;">
          <div style="font-weight: 600; color: #9d174d; margin-bottom: 8px; font-size: 0.85rem;">
            ④ XMLのresultType → Modelクラスのフルパス
          </div>
          <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; font-size: 0.8rem;">
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;">resultType="<span style="color: #86efac;">com.example.todo.model.Todo</span>"</code>
            <span style="color: #E53935; font-weight: bold;">↔</span>
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;"><span style="color: #c084fc;">public class</span> <span style="color: #86efac;">Todo</span></code>
          </div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: #78716c;">
            ※ SELECTの結果をマッピングするクラスを指定
          </div>
        </div>

        <!-- 5. #{プロパティ名} → Modelフィールド名 -->
        <div style="background: #f3e8ff; border-radius: 8px; padding: 12px; border-left: 4px solid #8b5cf6;">
          <div style="font-weight: 600; color: #5b21b6; margin-bottom: 8px; font-size: 0.85rem;">
            ⑤ SQLの#{プロパティ名} → Modelのフィールド名
          </div>
          <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap; font-size: 0.8rem;">
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;">VALUES (#{<span style="color: #86efac;">title</span>}, #{<span style="color: #86efac;">completed</span>})</code>
            <span style="color: #E53935; font-weight: bold;">↔</span>
            <code style="background: #1e293b; color: #e2e8f0; padding: 4px 8px; border-radius: 4px;"><span style="color: #c084fc;">private</span> String <span style="color: #86efac;">title</span>;</code>
          </div>
          <div style="margin-top: 6px; font-size: 0.75rem; color: #78716c;">
            ※ Todoオブジェクトのgetterメソッドが呼ばれる（getTitle()）
          </div>
        </div>
      </div>

      <!-- 注意事項 -->
      <div style="margin-top: 16px; padding: 12px; background: #fef2f2; border-radius: 8px; border: 1px solid #fecaca;">
        <div style="font-weight: 600; color: #dc2626; font-size: 0.85rem; display: flex; align-items: center; gap: 6px;">
          <span class="material-icons" style="font-size: 1rem;">warning</span>
          よくある間違い
        </div>
        <ul style="margin: 8px 0 0 0; padding-left: 20px; font-size: 0.8rem; color: #7f1d1d;">
          <li>namespaceのパッケージ名のスペルミス → <strong>Mapperが見つからないエラー</strong></li>
          <li>idとメソッド名の不一致 → <strong>メソッドが呼べないエラー</strong></li>
          <li>mapper-locationsのパス間違い → <strong>XMLが読み込まれない</strong></li>
        </ul>
      </div>
    </div>

    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-1</span>
        <h2 class="section-title">Modelクラスの作成</h2>
      </div>

      <div class="intro-text">
        <p><strong>Model</strong>は、データベースのテーブルに対応するJavaクラスです。MyBatisではアノテーションなしのシンプルな<strong>POJO</strong>（Plain Old Java Object：特別な機能を持たない普通のJavaクラス）として定義します。</p>
      </div>

      <!-- JPAとMyBatisの違い -->
      <div style="background: linear-gradient(135deg, #E53935 0%, #C62828 100%); border-radius: 16px; padding: 24px; margin: 24px 0; color: white;">
        <h4 style="margin: 0 0 20px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: white;">
          <span class="material-icons" style="color: white;">compare</span> JPA vs MyBatis の違い
        </h4>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 0.85rem;">
          <div style="background: rgba(255,255,255,0.95); border-radius: 8px; padding: 16px; color: #334155;">
            <div style="font-weight: 700; margin-bottom: 8px; color: #7c3aed;">JPA（Spring Data JPA）</div>
            <ul style="margin: 0; padding-left: 16px; color: #64748b;">
              <li>@Entity等のアノテーションが必要</li>
              <li>SQLが自動生成される</li>
              <li>学習コストが高い</li>
            </ul>
          </div>
          <div style="background: rgba(255,255,255,0.95); border-radius: 8px; padding: 16px; color: #334155;">
            <div style="font-weight: 700; margin-bottom: 8px; color: #E53935;">MyBatis</div>
            <ul style="margin: 0; padding-left: 16px; color: #64748b;">
              <li>シンプルなPOJOでOK</li>
              <li>SQLを自分で書く</li>
              <li>SQLに慣れていれば簡単</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="prompt-card">
        <h4 style="color: white;"><span class="material-icons">smart_toy</span> AIプロンプト</h4>
        <div class="prompt-box">
          <pre>Spring Boot + MyBatisでToDoアプリ用のModelクラスを作成してください。

要件:
- クラス名: Todo
- フィールド:
  - id: Long
  - title: String
  - completed: Boolean
- Lombokを使用してシンプルに定義</pre>
        </div>
        <button class="copy-btn" onclick="navigator.clipboard.writeText(this.previousElementSibling.querySelector('pre').textContent)">
          <span class="material-icons">content_copy</span> コピー
        </button>
      </div>

      <div class="code-block">
        <div class="code-header">
          <div class="code-dots">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
          </div>
          <span class="code-title">Todo.java（Modelクラス）</span>
        </div>
        <div class="code-content">
          <pre><span class="code-comment">/**
 * 【Model】データの入れ物（DBテーブルと対応）
 * - DBから取得したデータを格納
 * - 各レイヤー間でデータを受け渡し
 * ④ XMLのresultTypeで指定されるクラス
 */</span>
<span class="code-keyword">package</span> com.example.todo.model;

<span class="code-keyword">import</span> lombok.*;

<span class="code-annotation">@Data</span>
<span class="code-annotation">@NoArgsConstructor</span>
<span class="code-annotation">@AllArgsConstructor</span>
<span class="code-keyword">public class</span> <span class="code-class">Todo</span> {

    <span class="code-keyword">private</span> Long id;
    <span class="code-keyword">private</span> String title;      <span class="code-comment">// ⑤ XMLの#{title}と対応</span>
    <span class="code-keyword">private</span> Boolean completed; <span class="code-comment">// ⑤ XMLの#{completed}と対応</span>
}</pre>
        </div>
      </div>

      <div class="info-box" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: none; margin: 16px 0;">
        <div class="info-box-title"><span class="material-icons">lightbulb</span> ポイント</div>
        <div class="info-box-content">
          <p>MyBatisのModelは<strong>@Entityなどのアノテーション不要</strong>です。Lombokの@Dataだけでgetter/setter/toString等が自動生成されます。</p>
        </div>
      </div>

      <!-- Lombokアノテーション解説 -->
      <div class="table-container">
        <h4 style="margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
          <span class="material-icons" style="color: #E53935;">code</span> Lombokアノテーション一覧
        </h4>
        <table>
          <thead>
            <tr>
              <th>アノテーション</th>
              <th>自動生成されるもの</th>
              <th>説明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>@Data</code></td>
              <td>getter, setter, toString, equals, hashCode</td>
              <td>最も使用頻度が高い。これ1つで基本的なメソッドが揃う</td>
            </tr>
            <tr>
              <td><code>@NoArgsConstructor</code></td>
              <td>引数なしコンストラクタ</td>
              <td><code>new Todo()</code> が使えるようになる</td>
            </tr>
            <tr>
              <td><code>@AllArgsConstructor</code></td>
              <td>全フィールド引数のコンストラクタ</td>
              <td><code>new Todo(1L, "タイトル", false)</code> が使える</td>
            </tr>
            <tr>
              <td><code>@Getter</code></td>
              <td>getterメソッドのみ</td>
              <td>setterが不要な場合に使用</td>
            </tr>
            <tr>
              <td><code>@Setter</code></td>
              <td>setterメソッドのみ</td>
              <td>getterが不要な場合に使用</td>
            </tr>
            <tr>
              <td><code>@RequiredArgsConstructor</code></td>
              <td>finalフィールドのみ引数のコンストラクタ</td>
              <td>DI（依存性注入）で使用（Serviceクラス等）</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-2</span>
        <h2 class="section-title">Mapperインターフェースの作成</h2>
      </div>

      <div class="intro-text">
        <p><strong>Mapper</strong>は、SQLとJavaメソッドを紐づけるインターフェースです。本教材ではXML方式を使用します。</p>
      </div>

      <!-- ========== XML方式 ========== -->
      <div style="background: linear-gradient(135deg, #E53935 0%, #C62828 100%); border-radius: 12px; padding: 16px 20px; margin: 32px 0 16px 0; color: white;">
        <h3 style="margin: 0; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; color: white;">
          <span class="material-icons">description</span>
          XML方式によるMapper定義
        </h3>
      </div>

      <div class="intro-text">
        <p>XML方式では、<strong>Mapper.java</strong>にメソッド定義のみを書き、<strong>Mapper.xml</strong>にSQLを記述します。JavaコードとSQLが分離され、保守性が高くなります。</p>
      </div>

      <div class="prompt-card">
        <h4 style="color: white;"><span class="material-icons">smart_toy</span> AIプロンプト</h4>
        <div class="prompt-box">
          <pre>MyBatisのXML方式でTodo用のMapperを作成してください。

要件:
- インターフェース名: TodoMapper
- XMLファイル: TodoMapper.xml
- メソッド:
  - 全件取得: findAll()
  - 1件登録: insert(Todo todo)
- SQLはXMLファイルに記述
- namespaceでJavaインターフェースと紐付け</pre>
        </div>
        <button class="copy-btn" onclick="navigator.clipboard.writeText(this.previousElementSibling.querySelector('pre').textContent)">
          <span class="material-icons">content_copy</span> コピー
        </button>
      </div>

      <!-- ファイル配置図 -->
      <div style="background: #f1f5f9; border-radius: 12px; padding: 20px; margin: 24px 0;">
        <div style="font-weight: 600; margin-bottom: 12px; font-size: 0.9rem; color: #334155;">
          <span class="material-icons" style="font-size: 1rem; vertical-align: middle; color: #E53935;">folder</span>
          XML方式のファイル配置
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; background: #1e293b; border-radius: 8px; padding: 16px; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #e2e8f0;">
          <div>
            <div style="color: #fbbf24; margin-bottom: 4px;">src/main/java/.../mapper/</div>
            <div style="padding-left: 16px; color: #67e8f9;">└── TodoMapper.java</div>
            <div style="padding-left: 32px; color: #94a3b8; font-size: 0.7rem;">メソッド定義のみ</div>
          </div>
          <div>
            <div style="color: #fbbf24; margin-bottom: 4px;">src/main/resources/mapper/</div>
            <div style="padding-left: 16px; color: #f472b6;">└── TodoMapper.xml</div>
            <div style="padding-left: 32px; color: #94a3b8; font-size: 0.7rem;">SQL記述</div>
          </div>
        </div>
        <div style="margin-top: 12px; padding: 8px 12px; background: #dbeafe; border-radius: 6px; font-size: 0.85rem; color: #1e40af;">
          <span class="material-icons" style="font-size: 1rem; vertical-align: middle;">link</span>
          <strong>紐付け:</strong> namespace属性でJavaインターフェースのフルパスを指定して関連付け
        </div>
      </div>

      <!-- XML方式: Mapper.javaのコード -->
      <div class="code-block">
        <div class="code-header">
          <div class="code-dots">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
          </div>
          <span class="code-title">TodoMapper.java（XML方式 - メソッド定義のみ）</span>
        </div>
        <div class="code-content">
          <pre><span class="code-comment">/**
 * 【Mapper】SQLを呼び出すメソッドを定義
 * - メソッド名がXMLのid属性と対応
 * - 実際のSQLはTodoMapper.xmlに記述
 * ② XMLのnamespaceと一致させる
 */</span>
<span class="code-keyword">package</span> com.example.todo.mapper;

<span class="code-keyword">import</span> com.example.todo.model.Todo;
<span class="code-keyword">import</span> org.apache.ibatis.annotations.Mapper;
<span class="code-keyword">import</span> java.util.List;

<span class="code-annotation">@Mapper</span>
<span class="code-keyword">public interface</span> <span class="code-class">TodoMapper</span> {

    <span class="code-comment">// ③ XMLのid属性と一致させる</span>
    List&lt;Todo&gt; findAll();

    <span class="code-comment">// ③ XMLのid属性と一致させる</span>
    <span class="code-keyword">void</span> insert(Todo todo);
}</pre>
        </div>
      </div>

      <!-- XML方式のサンプル -->
      <div class="code-block">
        <div class="code-header">
          <div class="code-dots">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
          </div>
          <span class="code-title">TodoMapper.xml（XML方式の場合）</span>
        </div>
        <div class="code-content">
          <pre><span class="code-keyword">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="code-keyword">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span>

<span class="code-comment">&lt;!--
  【Mapper XML】実際のSQL文を記述
  - TodoMapper.javaのメソッドと紐付け
  - namespace: Javaインターフェースのフルパス
  - id: Javaメソッド名と一致させる
--&gt;</span>

<span class="code-comment">&lt;!-- ② namespace = Javaインターフェースのフルパス --&gt;</span>
<span class="code-annotation">&lt;mapper</span> namespace=<span class="code-string">"com.example.todo.mapper.TodoMapper"</span><span class="code-annotation">&gt;</span>

    <span class="code-comment">&lt;!-- ③ id = Javaメソッド名, ④ resultType = Modelクラスのフルパス --&gt;</span>
    <span class="code-annotation">&lt;select</span> id=<span class="code-string">"findAll"</span> resultType=<span class="code-string">"com.example.todo.model.Todo"</span><span class="code-annotation">&gt;</span>
        SELECT * FROM todos
    <span class="code-annotation">&lt;/select&gt;</span>

    <span class="code-comment">&lt;!-- ③ id = Javaメソッド名, ⑤ #{} = Modelのフィールド名 --&gt;</span>
    <span class="code-annotation">&lt;insert</span> id=<span class="code-string">"insert"</span> useGeneratedKeys=<span class="code-string">"true"</span> keyProperty=<span class="code-string">"id"</span><span class="code-annotation">&gt;</span>
        INSERT INTO todos (title, completed)
        VALUES (#{title}, #{completed})  <span class="code-comment">&lt;!-- ⑤ Todo.javaのフィールド名 --&gt;</span>
    <span class="code-annotation">&lt;/insert&gt;</span>

<span class="code-annotation">&lt;/mapper&gt;</span></pre>
        </div>
      </div>

      <div class="info-box" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: none; margin: 16px 0;">
        <div class="info-box-title"><span class="material-icons">lightbulb</span> XML方式のポイント</div>
        <div class="info-box-content">
          <ul style="margin: 0; padding-left: 20px;">
            <li><code>namespace</code> - XMLとJavaインターフェースを紐付けるための「住所」のようなもの。フルパスを正確に書く必要がある</li>
            <li><code>id</code> - XMLのSQL定義とJavaメソッドを紐付ける「名前」。メソッド名と完全一致させる</li>
            <li><code>resultType</code> - 戻り値の型（Modelクラス）を指定</li>
            <li>動的SQL（<code>&lt;if&gt;</code>, <code>&lt;foreach&gt;</code>等）はXML方式でのみ使用可能</li>
          </ul>
        </div>
      </div>

      <!-- XMLタグ一覧 -->
      <div class="table-container">
        <h4 style="margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
          <span class="material-icons" style="color: #E53935;">code</span> XML方式で使用する主なタグ
        </h4>
        <table>
          <thead>
            <tr>
              <th>タグ</th>
              <th>説明</th>
              <th>主な属性</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>&lt;mapper&gt;</code></td>
              <td>ルート要素。Javaインターフェースと紐付け</td>
              <td><code>namespace</code></td>
            </tr>
            <tr>
              <td><code>&lt;select&gt;</code></td>
              <td>SELECT文を定義</td>
              <td><code>id</code>, <code>resultType</code>, <code>parameterType</code></td>
            </tr>
            <tr>
              <td><code>&lt;insert&gt;</code></td>
              <td>INSERT文を定義</td>
              <td><code>id</code>, <code>useGeneratedKeys</code>, <code>keyProperty</code></td>
            </tr>
            <tr>
              <td><code>&lt;update&gt;</code></td>
              <td>UPDATE文を定義</td>
              <td><code>id</code>, <code>parameterType</code></td>
            </tr>
            <tr>
              <td><code>&lt;delete&gt;</code></td>
              <td>DELETE文を定義</td>
              <td><code>id</code>, <code>parameterType</code></td>
            </tr>
            <tr>
              <td><code>&lt;if&gt;</code></td>
              <td>条件分岐（動的SQL）</td>
              <td><code>test</code></td>
            </tr>
            <tr>
              <td><code>&lt;foreach&gt;</code></td>
              <td>ループ処理（IN句など）</td>
              <td><code>collection</code>, <code>item</code>, <code>separator</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- パラメータ記法の解説 -->
      <div style="background: linear-gradient(135deg, #E53935 0%, #C62828 100%); border-radius: 16px; padding: 24px; margin: 24px 0; color: white;">
        <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: white;">
          <span class="material-icons" style="color: white;">help_outline</span> #{} と ${} の違い
        </h4>

        <!-- 用語解説ボックス -->
        <div style="background: rgba(255,255,255,0.15); border-radius: 8px; padding: 12px; margin-bottom: 16px; font-size: 0.8rem;">
          <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px; font-weight: 600;">
            <span class="material-icons" style="font-size: 1rem;">school</span> 用語解説
          </div>
          <ul style="margin: 0; padding-left: 20px; line-height: 1.8;">
            <li><strong>SQLインジェクション</strong>：悪意のあるユーザーが入力欄にSQLを混入させ、データベースを不正に操作する攻撃手法</li>
            <li><strong>プリペアドステートメント</strong>：SQLの構造と値を分離して処理する安全な方式。値が自動で安全に処理される</li>
            <li><strong>エスケープ</strong>：特殊文字（' や " など）を無害な形式に変換し、攻撃を防ぐ処理</li>
          </ul>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 0.85rem;">
          <div style="background: rgba(255,255,255,0.95); border-radius: 8px; padding: 16px; color: #334155;">
            <div style="font-weight: 700; margin-bottom: 8px; color: #22c55e;">#{} - プリペアドステートメント（推奨）</div>
            <code style="background: #e2e8f0; padding: 4px 8px; border-radius: 4px; display: block; margin-bottom: 8px;">WHERE title = #{title}</code>
            <ul style="margin: 0; padding-left: 16px; color: #64748b;">
              <li>SQLインジェクション対策済み</li>
              <li>値が自動でエスケープされる</li>
              <li>通常はこちらを使用</li>
            </ul>
          </div>
          <div style="background: rgba(255,255,255,0.95); border-radius: 8px; padding: 16px; color: #334155;">
            <div style="font-weight: 700; margin-bottom: 8px; color: #dc2626;">${} - 文字列置換（注意が必要）</div>
            <code style="background: #e2e8f0; padding: 4px 8px; border-radius: 4px; display: block; margin-bottom: 8px;">ORDER BY ${sortColumn}</code>
            <ul style="margin: 0; padding-left: 16px; color: #64748b;">
              <li>SQLインジェクションのリスクあり</li>
              <li>テーブル名・カラム名の動的指定時のみ使用</li>
              <li>ユーザー入力には使用禁止</li>
            </ul>
          </div>
        </div>
      </div>

    </section>

    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 5-3</span>
        <h2 class="section-title">データ登録処理の実装</h2>
      </div>

      <div class="intro-text">
        <p>Mapperの<strong>insert()</strong>メソッドを使用して、フォームから送信されたデータをデータベースに登録します。</p>
      </div>

      <div class="prompt-card">
        <h4 style="color: white;"><span class="material-icons">smart_toy</span> AIプロンプト</h4>
        <div class="prompt-box">
          <pre>Spring Boot + MyBatisでフォームデータをデータベースに登録する処理を実装してください。

要件:
- ServiceクラスでMapperを呼び出す
- 登録成功後は一覧画面にリダイレクト

Controller、Serviceのコードを示してください。</pre>
        </div>
        <button class="copy-btn" onclick="navigator.clipboard.writeText(this.previousElementSibling.querySelector('pre').textContent)">
          <span class="material-icons">content_copy</span> コピー
        </button>
      </div>

      <!-- Serviceクラスの役割解説 -->
      <div style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 16px; padding: 24px; margin: 24px 0; color: white;">
        <h4 style="margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; color: white;">
          <span class="material-icons" style="color: white;">engineering</span> Serviceクラスの役割とは？
        </h4>
        <div style="background: rgba(255,255,255,0.95); border-radius: 12px; padding: 20px; color: #334155;">
          <p style="margin: 0 0 16px 0; font-size: 0.9rem;">
            <strong>Service</strong>は、アプリケーションの「ビジネスロジック（業務処理）」を担当するクラスです。ControllerとMapperの間に位置し、データの加工や複数の処理をまとめる役割を持ちます。
          </p>

          <!-- なぜServiceが必要か -->
          <div style="background: #f0fdf4; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
            <div style="font-weight: 700; color: #166534; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
              <span class="material-icons" style="font-size: 1rem;">help_outline</span> なぜServiceクラスが必要？
            </div>
            <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; color: #166534;">
              <li><strong>責任の分離</strong> - Controllerは「リクエストの受付」、Serviceは「業務処理」、Mapperは「DB操作」と役割を分ける</li>
              <li><strong>再利用性</strong> - 同じ業務処理を複数のControllerから呼び出せる</li>
              <li><strong>テストのしやすさ</strong> - 業務ロジックを独立してテストできる</li>
              <li><strong>保守性</strong> - 業務ルールの変更がServiceだけで完結する</li>
            </ul>
          </div>

          <!-- 具体例 -->
          <div style="background: #fef3c7; border-radius: 8px; padding: 16px;">
            <div style="font-weight: 700; color: #92400e; margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
              <span class="material-icons" style="font-size: 1rem;">lightbulb</span> Serviceが行う処理の例
            </div>
            <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; color: #78716c;">
              <li>新規登録時に「completed = false」を自動設定</li>
              <li>入力データの整形（前後の空白削除など）</li>
              <li>複数のMapperメソッドを組み合わせた処理</li>
              <li>トランザクション管理（複数のDB操作をまとめる）</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="code-block">
        <div class="code-header">
          <div class="code-dots">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
          </div>
          <span class="code-title">TodoService.java</span>
        </div>
        <div class="code-content">
          <pre><span class="code-comment">/**
 * 【Service】ビジネスロジック（業務処理）を担当
 * - ControllerとMapperの間に位置
 * - データの加工・初期値設定など
 * - Mapperを呼び出してDB操作を依頼
 */</span>
<span class="code-keyword">package</span> com.example.todo.service;

<span class="code-keyword">import</span> com.example.todo.mapper.TodoMapper;  <span class="code-comment">// TodoMapper.javaをimport</span>
<span class="code-keyword">import</span> com.example.todo.model.Todo;         <span class="code-comment">// Todo.java（Model）をimport</span>
<span class="code-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="code-keyword">import</span> org.springframework.stereotype.Service;

<span class="code-annotation">@Service</span>
<span class="code-annotation">@RequiredArgsConstructor</span>  <span class="code-comment">// finalフィールドを自動でDI（依存性注入）</span>
<span class="code-keyword">public class</span> <span class="code-class">TodoService</span> {

    <span class="code-keyword">private final</span> TodoMapper todoMapper;  <span class="code-comment">// TodoMapper.javaを注入</span>

    <span class="code-keyword">public void</span> create(String title) {
        Todo todo = <span class="code-keyword">new</span> Todo();              <span class="code-comment">// Todo.java（Model）を使用</span>
        todo.setTitle(title);
        todo.setCompleted(<span class="code-keyword">false</span>);
        todoMapper.insert(todo);             <span class="code-comment">// → TodoMapper.java → TodoMapper.xml → DB</span>
    }
}</pre>
        </div>
      </div>

      <div class="code-block">
        <div class="code-header">
          <div class="code-dots">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
          </div>
          <span class="code-title">TodoController.java（登録処理）</span>
        </div>
        <div class="code-content">
          <pre><span class="code-comment">/**
 * 【Controller】リクエスト受付・画面遷移を担当
 * - ブラウザからのリクエストを受け取る入口
 * - Serviceを呼び出して処理を依頼
 * - 処理結果に応じて画面遷移を制御
 */</span>

<span class="code-comment">// フォームからのPOSTリクエストを受け付ける</span>
<span class="code-annotation">@PostMapping</span>(<span class="code-string">"/todo/create"</span>)
<span class="code-keyword">public</span> String create(<span class="code-annotation">@RequestParam</span> String title) {
    todoService.create(title);              <span class="code-comment">// → TodoService.javaのcreate()を呼び出し</span>
    <span class="code-keyword">return</span> <span class="code-string">"redirect:/todo"</span>;             <span class="code-comment">// 一覧画面へリダイレクト</span>
}</pre>
        </div>
      </div>

      <div class="info-box" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: none; margin: 16px 0;">
        <div class="info-box-title"><span class="material-icons">lightbulb</span> コード解説</div>
        <div class="info-box-content">
          <ul style="margin: 0; padding-left: 20px;">
            <li><code>todoService.create(title)</code> - TodoService.javaのcreate()メソッドを呼び出し、内部でMapperを経由してDBに登録される</li>
            <li>SQLは自分で書くので、複雑なクエリも柔軟に対応可能</li>
            <li><code>redirect:/todo</code> - 登録後に一覧画面へリダイレクト（ブラウザを別のURLに自動的に移動させる処理）</li>
          </ul>
        </div>
      </div>

      <!-- データ登録フロー図解 -->
      <div class="diagram-container">
        <div class="diagram-title">
          <span class="material-icons">add_circle</span>
          データ登録処理フロー（MyBatis）
        </div>
        <div class="diagram-content">
          <div class="flow-diagram">
            <div class="flow-box">
              <span class="material-icons" style="font-size: 1.5rem; display: block; margin-bottom: 4px;">edit</span>
              フォーム入力
            </div>
            <span class="flow-arrow">→</span>
            <div class="flow-box highlight">
              <span class="material-icons" style="font-size: 1.5rem; display: block; margin-bottom: 4px;">settings</span>
              Controller
            </div>
            <span class="flow-arrow">→</span>
            <div class="flow-box highlight">
              <span class="material-icons" style="font-size: 1.5rem; display: block; margin-bottom: 4px;">engineering</span>
              Service
            </div>
            <span class="flow-arrow">→</span>
            <div class="flow-box highlight">
              <span class="material-icons" style="font-size: 1.5rem; display: block; margin-bottom: 4px;">code</span>
              Mapper<br><small>@Insert</small>
            </div>
            <span class="flow-arrow">→</span>
            <div class="flow-box">
              <span class="material-icons" style="font-size: 1.5rem; display: block; margin-bottom: 4px;">table_chart</span>
              DB
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="page-nav">
    <a href="promptpg-4.html" class="page-nav-btn prev">
      <div class="page-nav-label">前へ</div>
      <div class="page-nav-title">Chapter 4: データベース設定</div>
    </a>
    <a href="promptpg-6.html" class="page-nav-btn next">
      <div class="page-nav-label">次へ</div>
      <div class="page-nav-title">Chapter 6: 一覧表示</div>
    </a>
  </div>

  <footer class="footer">
    <p>プロンプトプログラミング - 職業訓練校教材</p>
  </footer>
</body>
</html>
