<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 11: モダンJavaScriptとモジュール - JavaScript入門</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/common.css">
  <style>
    :root {
      --primary: #007ACC;
      --primary-dark: #005A9E;
      --primary-light: #E8F4FD;
      --primary-lighter: #B3D7FF;
    }
    .nav-category-links { display: none; }
  </style>
</head>
<body>
  <nav class="global-nav"></nav>
  <script src="../../shared/js/nav-javascript.js"></script>

  <div class="container">
    <!-- チャプターヘッダー -->
    <header class="chapter-header">
      <div class="chapter-badge">Chapter</div>
      <div class="chapter-number">11</div>
      <h1 class="chapter-title">モダンJavaScriptとモジュール</h1>
      <p class="chapter-subtitle">コードを整理して再利用しやすくしよう</p>
    </header>

    <!-- 目次 -->
    <nav class="toc">
      <h2 class="toc-title">この章の内容</h2>
      <ul class="toc-list">
        <li class="toc-item"><span class="toc-number">11-1</span>ES Modules基礎</li>
        <li class="toc-item"><span class="toc-number">11-2</span>モジュール分割パターン</li>
        <li class="toc-item"><span class="toc-number">11-3</span>実習：モジュール版ToDoアプリ</li>
        <li class="toc-item"><span class="toc-number">練習</span>練習問題</li>
      </ul>
    </nav>

    <!-- Section 11-1 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 11-1</span>
        <h2 class="section-title">ES Modules基礎</h2>
      </div>

      <div class="intro-text">
        <p>ES Modules（ESM）は、JavaScriptの公式モジュールシステムです。コードを複数のファイルに分割し、必要な機能だけをインポートして使用できます。これにより、コードの再利用性と保守性が向上します。</p>
      </div>

      <div class="subsection">
        <h3>モジュールとは</h3>
        <p>モジュールとは、関連する機能をまとめた独立したJavaScriptファイルです。各モジュールは独自のスコープを持ち、明示的にエクスポートした機能だけが外部から利用できます。</p>

        <!-- SVGモジュール図解 -->
        <div class="demo-area" style="padding: 20px; overflow-x: auto;">
          <svg viewBox="0 0 700 280" style="min-width: 600px; width: 100%; height: auto;">
            <!-- main.js -->
            <rect x="250" y="20" width="200" height="80" rx="12" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
            <text x="350" y="50" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">main.js</text>
            <text x="350" y="70" text-anchor="middle" font-size="11" fill="#3b82f6">import { ... } from '...'</text>
            <text x="350" y="85" text-anchor="middle" font-size="11" fill="#3b82f6">アプリのエントリーポイント</text>

            <!-- 矢印 -->
            <path d="M280 100 L150 150" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead2)"/>
            <path d="M350 100 L350 150" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead2)"/>
            <path d="M420 100 L550 150" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead2)"/>

            <!-- utils.js -->
            <rect x="50" y="160" width="150" height="100" rx="10" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
            <text x="125" y="190" text-anchor="middle" font-size="13" font-weight="bold" fill="#166534">utils.js</text>
            <text x="125" y="210" text-anchor="middle" font-size="10" fill="#166534">export function</text>
            <text x="125" y="225" text-anchor="middle" font-size="10" fill="#166534">formatDate()</text>
            <text x="125" y="240" text-anchor="middle" font-size="10" fill="#166534">validateEmail()</text>

            <!-- api.js -->
            <rect x="275" y="160" width="150" height="100" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
            <text x="350" y="190" text-anchor="middle" font-size="13" font-weight="bold" fill="#92400e">api.js</text>
            <text x="350" y="210" text-anchor="middle" font-size="10" fill="#92400e">export async function</text>
            <text x="350" y="225" text-anchor="middle" font-size="10" fill="#92400e">fetchData()</text>
            <text x="350" y="240" text-anchor="middle" font-size="10" fill="#92400e">postData()</text>

            <!-- ui.js -->
            <rect x="500" y="160" width="150" height="100" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
            <text x="575" y="190" text-anchor="middle" font-size="13" font-weight="bold" fill="#9d174d">ui.js</text>
            <text x="575" y="210" text-anchor="middle" font-size="10" fill="#9d174d">export function</text>
            <text x="575" y="225" text-anchor="middle" font-size="10" fill="#9d174d">showModal()</text>
            <text x="575" y="240" text-anchor="middle" font-size="10" fill="#9d174d">hideModal()</text>

            <defs>
              <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
              </marker>
            </defs>
          </svg>
        </div>
      </div>

      <div class="subsection">
        <h3>export（エクスポート）</h3>
        <p>モジュールから機能を公開するには<code>export</code>キーワードを使います。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ES Modulesの名前付きエクスポート

## 実装要件
- 定数`PI`と四則演算の関数をエクスポート
- `add`, `subtract`, `multiply`, `divide`の4関数を実装
- 宣言と同時にエクスポートする方法を示す
- まとめてエクスポートする方法も示す

## 使用する構文
- `export const`
- `export function`
- `export { ... }`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">名前付きエクスポート</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">utils.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 宣言と同時にエクスポート</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">PI</span> = <span class="number">3.14159</span>;

<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">add</span>(<span class="variable">a</span>, <span class="variable">b</span>) {
  <span class="keyword">return</span> <span class="variable">a</span> + <span class="variable">b</span>;
}

<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">subtract</span>(<span class="variable">a</span>, <span class="variable">b</span>) {
  <span class="keyword">return</span> <span class="variable">a</span> - <span class="variable">b</span>;
}

<span class="comment">// まとめてエクスポート</span>
<span class="keyword">const</span> <span class="variable">multiply</span> = (<span class="variable">a</span>, <span class="variable">b</span>) => <span class="variable">a</span> * <span class="variable">b</span>;
<span class="keyword">const</span> <span class="variable">divide</span> = (<span class="variable">a</span>, <span class="variable">b</span>) => <span class="variable">a</span> / <span class="variable">b</span>;

<span class="keyword">export</span> { <span class="variable">multiply</span>, <span class="variable">divide</span> };</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>名前付きエクスポート（宣言と同時）</h4>
              <div class="syntax-pattern">export const 変数名 = 値;

export function 関数名() { }</div>
              <p>変数や関数の宣言と同時にエクスポートします。インポート側では同じ名前を使用する必要があります。</p>
            </div>
            <div class="syntax-item">
              <h4>名前付きエクスポート（まとめて）</h4>
              <div class="syntax-pattern">export { 変数1, 変数2, ... };</div>
              <p>既に宣言済みの変数や関数をまとめてエクスポートします。ファイル末尾でエクスポート内容を一覧できるメリットがあります。</p>
            </div>
          </div>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ES Modulesのデフォルトエクスポート

## 実装要件
- `Calculator`クラスをデフォルトエクスポート
- `add`と`subtract`メソッドを実装
- 関数をデフォルトエクスポートする例も示す

## 使用する構文
- `export default class`
- `export default function`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">デフォルトエクスポート</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">Calculator.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// デフォルトエクスポート（1ファイル1つだけ）</span>
<span class="keyword">export default</span> <span class="keyword">class</span> <span class="class-name">Calculator</span> {
  <span class="method">add</span>(<span class="variable">a</span>, <span class="variable">b</span>) {
    <span class="keyword">return</span> <span class="variable">a</span> + <span class="variable">b</span>;
  }

  <span class="method">subtract</span>(<span class="variable">a</span>, <span class="variable">b</span>) {
    <span class="keyword">return</span> <span class="variable">a</span> - <span class="variable">b</span>;
  }
}

<span class="comment">// または関数の場合</span>
<span class="keyword">export default</span> <span class="keyword">function</span> <span class="method">greet</span>(<span class="variable">name</span>) {
  <span class="keyword">return</span> <span class="string">`Hello, ${<span class="variable">name</span>}!`</span>;
}</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>デフォルトエクスポート</h4>
              <div class="syntax-pattern">export default クラス名

export default function() { }</div>
              <p>1ファイルに1つだけ設定できます。インポート時に任意の名前を付けられるのが特徴です。</p>
            </div>
            <div class="syntax-item">
              <h4>名前付き vs デフォルト</h4>
              <div class="syntax-pattern">名前付き: export { name }
デフォルト: export default</div>
              <p>ユーティリティ関数の集まりには名前付き、クラスや主要な機能にはデフォルトエクスポートが適しています。</p>
            </div>
          </div>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>エクスポート種類</th>
                <th>構文</th>
                <th>特徴</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>名前付き</td>
                <td><code>export { name }</code></td>
                <td>複数可能、インポート時に名前を指定</td>
              </tr>
              <tr>
                <td>デフォルト</td>
                <td><code>export default</code></td>
                <td>1ファイル1つ、インポート時に任意の名前可</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="subsection">
        <h3>import（インポート）</h3>
        <p>他のモジュールの機能を使うには<code>import</code>キーワードを使います。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ES Modulesのインポート方法

## 実装要件
- 名前付きインポートの例
- エイリアス（`as`）でのインポートの例
- 全てをインポート（`import * as`）の例
- デフォルトインポートの例
- 混合インポートの例

## 使用する構文
- `import { ... } from`
- `import { ... as ... } from`
- `import * as ... from`
- `import default from`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">インポートの書き方</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">main.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 名前付きインポート</span>
<span class="keyword">import</span> { <span class="variable">add</span>, <span class="variable">subtract</span>, <span class="variable">PI</span> } <span class="keyword">from</span> <span class="string">'./utils.js'</span>;

<span class="variable">console</span>.<span class="method">log</span>(<span class="method">add</span>(<span class="number">1</span>, <span class="number">2</span>));  <span class="comment">// 3</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">PI</span>);          <span class="comment">// 3.14159</span>

<span class="comment">// エイリアス（別名）でインポート</span>
<span class="keyword">import</span> { <span class="variable">add</span> <span class="keyword">as</span> <span class="variable">sum</span> } <span class="keyword">from</span> <span class="string">'./utils.js'</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="method">sum</span>(<span class="number">1</span>, <span class="number">2</span>));  <span class="comment">// 3</span>

<span class="comment">// 全てをインポート（名前空間としてまとめる）</span>
<span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable">utils</span> <span class="keyword">from</span> <span class="string">'./utils.js'</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">utils</span>.<span class="method">add</span>(<span class="number">1</span>, <span class="number">2</span>));  <span class="comment">// 3</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">utils</span>.<span class="variable">PI</span>);         <span class="comment">// 3.14159</span>

<span class="comment">// デフォルトインポート（名前は自由）</span>
<span class="keyword">import</span> <span class="variable">Calculator</span> <span class="keyword">from</span> <span class="string">'./Calculator.js'</span>;
<span class="keyword">import</span> <span class="variable">MyCalc</span> <span class="keyword">from</span> <span class="string">'./Calculator.js'</span>;  <span class="comment">// 別名でもOK</span>

<span class="keyword">const</span> <span class="variable">calc</span> = <span class="keyword">new</span> <span class="method">Calculator</span>();
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">calc</span>.<span class="method">add</span>(<span class="number">1</span>, <span class="number">2</span>));  <span class="comment">// 3</span>

<span class="comment">// 混合インポート</span>
<span class="keyword">import</span> <span class="variable">Calculator</span>, { <span class="variable">PI</span>, <span class="variable">add</span> } <span class="keyword">from</span> <span class="string">'./math.js'</span>;</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>名前付きインポート</h4>
              <div class="syntax-pattern">import { 名前1, 名前2 } from './module.js';</div>
              <p>名前付きエクスポートされた機能をインポートします。エクスポート時と同じ名前を使用します。</p>
            </div>
            <div class="syntax-item">
              <h4>エイリアス（別名）インポート</h4>
              <div class="syntax-pattern">import { 元の名前 as 新しい名前 } from './module.js';</div>
              <p>インポート時に別名を付けることができます。名前の衝突を避けるときに便利です。</p>
            </div>
            <div class="syntax-item">
              <h4>全てをインポート</h4>
              <div class="syntax-pattern">import * as モジュール名 from './module.js';</div>
              <p>モジュールの全てのエクスポートを1つのオブジェクトとしてインポートします。<code>モジュール名.関数名</code>でアクセスします。</p>
            </div>
            <div class="syntax-item">
              <h4>デフォルトインポート</h4>
              <div class="syntax-pattern">import 任意の名前 from './module.js';</div>
              <p>デフォルトエクスポートをインポートします。波括弧は不要で、任意の名前を付けられます。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>HTMLでモジュールを使う</h3>
        <p>ブラウザでES Modulesを使うには、scriptタグに<code>type="module"</code>を指定します。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ブラウザでのES Modules使用

## 実装要件
- `type="module"`を指定して外部JSファイルを読み込む
- インラインでモジュールコードを記述する方法も示す
- HTML5の基本構造を含める

## 使用する構文
- `<script type="module" src="...">`
- `<script type="module">...</script>`
- `import`文</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">type="module"の指定</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">HTML</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="tag">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attr">lang</span>=<span class="value">"ja"</span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">charset</span>=<span class="value">"UTF-8"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>ES Modules<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="comment">&lt;!-- type="module" を指定 --&gt;</span>
  <span class="tag">&lt;script</span> <span class="attr">type</span>=<span class="value">"module"</span> <span class="attr">src</span>=<span class="value">"main.js"</span><span class="tag">&gt;&lt;/script&gt;</span>

  <span class="comment">&lt;!-- インラインでもモジュールとして記述可能 --&gt;</span>
  <span class="tag">&lt;script</span> <span class="attr">type</span>=<span class="value">"module"</span><span class="tag">&gt;</span>
    <span class="keyword">import</span> { <span class="variable">greet</span> } <span class="keyword">from</span> <span class="string">'./utils.js'</span>;
    <span class="variable">console</span>.<span class="method">log</span>(<span class="method">greet</span>(<span class="string">'World'</span>));
  <span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>type="module"（外部ファイル）</h4>
              <div class="syntax-pattern">&lt;script type="module" src="main.js"&gt;&lt;/script&gt;</div>
              <p>外部JavaScriptファイルをモジュールとして読み込みます。ファイル内でimport/exportが使えるようになります。</p>
            </div>
            <div class="syntax-item">
              <h4>type="module"（インライン）</h4>
              <div class="syntax-pattern">&lt;script type="module"&gt;import { ... } from '...';&lt;/script&gt;</div>
              <p>scriptタグ内に直接モジュールコードを記述できます。インラインでもimport文が使用可能です。</p>
            </div>
            <div class="syntax-item">
              <h4>モジュールの特徴</h4>
              <div class="syntax-pattern">自動的にStrict Mode / defer動作 / 独自スコープ</div>
              <p>type="module"を指定すると、'use strict'が自動適用され、DOMの読み込み後に実行され、変数がグローバルを汚染しません。</p>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">type="module"の特徴</div>
          <div class="info-box-content">
            <ul>
              <li><strong>自動的にStrict Mode</strong>：'use strict'が不要</li>
              <li><strong>遅延実行（defer）</strong>：DOMの読み込み後に実行される</li>
              <li><strong>独自のスコープ</strong>：トップレベル変数がグローバルを汚染しない</li>
              <li><strong>CORS制限</strong>：ローカルファイルでは動かない（サーバーが必要）</li>
            </ul>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-title">ローカル開発時の注意</div>
          <div class="info-box-content">
            <p>ES Modulesはセキュリティ上の理由から、<code>file://</code>プロトコルでは動作しません。VS Codeの「Live Server」拡張機能や、Pythonの簡易サーバー（<code>python -m http.server</code>）を使ってください。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 11-2 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 11-2</span>
        <h2 class="section-title">モジュール分割パターン</h2>
      </div>

      <div class="intro-text">
        <p>実際のプロジェクトでは、機能ごとにファイルを分割することでコードの見通しが良くなります。一般的なファイル構成パターンを学びましょう。</p>
      </div>

      <div class="subsection">
        <h3>ファイル構成の例</h3>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">推奨ディレクトリ構成</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">ディレクトリ構成</span>
              </div>
              <pre class="demo-code-content"><code>project/
├── index.html
├── css/
│   └── style.css
└── js/
    ├── main.js           <span class="comment"># エントリーポイント</span>
    ├── config.js          <span class="comment"># 設定値</span>
    └── modules/
        ├── todo.js        <span class="comment"># ToDoのロジック</span>
        ├── storage.js     <span class="comment"># LocalStorage操作</span>
        ├── ui.js          <span class="comment"># DOM操作</span>
        └── events.js      <span class="comment"># イベント処理</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>設定ファイルの分離</h3>
        <p>アプリケーション全体で使う定数や設定値は、専用のファイルにまとめます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
アプリケーション設定モジュール

## 実装要件
- 基本設定（アプリ名、バージョン、ストレージキー）
- API設定（`BASE_URL`、`TIMEOUT`）
- UI設定（アニメーション時間など）
- メッセージ定数
- 各設定をオブジェクトとしてエクスポート

## 使用する構文
- `export const CONFIG = { ... }`
- `export const API = { ... }`
- `export const UI = { ... }`
- `export const MESSAGES = { ... }`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">config.js</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">config.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// アプリケーション設定</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">CONFIG</span> = {
  <span class="variable">APP_NAME</span>: <span class="string">'ToDo App'</span>,
  <span class="variable">VERSION</span>: <span class="string">'1.0.0'</span>,
  <span class="variable">STORAGE_KEY</span>: <span class="string">'todo_items'</span>,
  <span class="variable">MAX_ITEMS</span>: <span class="number">100</span>
};

<span class="comment">// API関連の設定</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">API</span> = {
  <span class="variable">BASE_URL</span>: <span class="string">'https://api.example.com'</span>,
  <span class="variable">TIMEOUT</span>: <span class="number">5000</span>
};

<span class="comment">// UIの設定</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">UI</span> = {
  <span class="variable">ANIMATION_DURATION</span>: <span class="number">300</span>,
  <span class="variable">DEBOUNCE_DELAY</span>: <span class="number">200</span>
};

<span class="comment">// メッセージ</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">MESSAGES</span> = {
  <span class="variable">EMPTY_INPUT</span>: <span class="string">'タスクを入力してください'</span>,
  <span class="variable">DELETE_CONFIRM</span>: <span class="string">'本当に削除しますか？'</span>,
  <span class="variable">SAVE_SUCCESS</span>: <span class="string">'保存しました'</span>
};</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>機能別モジュールの分割</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
LocalStorageデータ永続化モジュール

## 実装要件
- `config.js`から設定をインポート
- `loadItems`: データ読み込み関数
- `saveItems`: データ保存関数
- `clearItems`: データクリア関数
- `try-catch`でエラーハンドリング

## 使用するAPI
- `localStorage.getItem()`
- `localStorage.setItem()`
- `localStorage.removeItem()`
- `JSON.parse()` / `JSON.stringify()`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">storage.js - データ永続化</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">modules/storage.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">import</span> { <span class="variable">CONFIG</span> } <span class="keyword">from</span> <span class="string">'../config.js'</span>;

<span class="comment">/**
 * LocalStorageからデータを読み込む
 * @returns {Array} 保存されているToDoリスト
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">loadItems</span>() {
  <span class="keyword">try</span> {
    <span class="keyword">const</span> <span class="variable">data</span> = <span class="variable">localStorage</span>.<span class="method">getItem</span>(<span class="variable">CONFIG</span>.<span class="variable">STORAGE_KEY</span>);
    <span class="keyword">return</span> <span class="variable">data</span> ? <span class="variable">JSON</span>.<span class="method">parse</span>(<span class="variable">data</span>) : [];
  } <span class="keyword">catch</span> (<span class="variable">error</span>) {
    <span class="variable">console</span>.<span class="method">error</span>(<span class="string">'データ読み込みエラー:'</span>, <span class="variable">error</span>);
    <span class="keyword">return</span> [];
  }
}

<span class="comment">/**
 * LocalStorageにデータを保存する
 * @param {Array} items - 保存するToDoリスト
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">saveItems</span>(<span class="variable">items</span>) {
  <span class="keyword">try</span> {
    <span class="variable">localStorage</span>.<span class="method">setItem</span>(
      <span class="variable">CONFIG</span>.<span class="variable">STORAGE_KEY</span>,
      <span class="variable">JSON</span>.<span class="method">stringify</span>(<span class="variable">items</span>)
    );
  } <span class="keyword">catch</span> (<span class="variable">error</span>) {
    <span class="variable">console</span>.<span class="method">error</span>(<span class="string">'データ保存エラー:'</span>, <span class="variable">error</span>);
  }
}

<span class="comment">/**
 * LocalStorageのデータをクリアする
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">clearItems</span>() {
  <span class="variable">localStorage</span>.<span class="method">removeItem</span>(<span class="variable">CONFIG</span>.<span class="variable">STORAGE_KEY</span>);
}</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
DOM操作モジュール

## 実装要件
- `createTodoElement`: ToDo要素のHTML生成
- `renderList`: リスト描画
- `escapeHtml`: HTMLエスケープ（XSS対策、内部用）
- `clearInput`: 入力フィールドクリア

## 使用するAPI
- `document.createElement()`
- `innerHTML` / `textContent`
- `classList.add()`
- `dataset`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">ui.js - DOM操作</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">modules/ui.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">/**
 * ToDoアイテムのHTMLを生成
 * @param {Object} item - ToDoアイテム
 * @returns {HTMLElement} リスト要素
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">createTodoElement</span>(<span class="variable">item</span>) {
  <span class="keyword">const</span> <span class="variable">li</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'li'</span>);
  <span class="variable">li</span>.<span class="variable">className</span> = <span class="string">'todo-item'</span>;
  <span class="variable">li</span>.<span class="variable">dataset</span>.<span class="variable">id</span> = <span class="variable">item</span>.<span class="variable">id</span>;

  <span class="keyword">if</span> (<span class="variable">item</span>.<span class="variable">completed</span>) {
    <span class="variable">li</span>.<span class="variable">classList</span>.<span class="method">add</span>(<span class="string">'completed'</span>);
  }

  <span class="variable">li</span>.<span class="variable">innerHTML</span> = <span class="string">`
    &lt;input type="checkbox" class="todo-check" ${<span class="variable">item</span>.<span class="variable">completed</span> ? <span class="string">'checked'</span> : <span class="string">''</span>}&gt;
    &lt;span class="todo-text"&gt;${<span class="method">escapeHtml</span>(<span class="variable">item</span>.<span class="variable">text</span>)}&lt;/span&gt;
    &lt;button class="todo-delete"&gt;削除&lt;/button&gt;
  `</span>;

  <span class="keyword">return</span> <span class="variable">li</span>;
}

<span class="comment">/**
 * リストを更新
 * @param {HTMLElement} container - リストのコンテナ
 * @param {Array} items - ToDoアイテムの配列
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">renderList</span>(<span class="variable">container</span>, <span class="variable">items</span>) {
  <span class="variable">container</span>.<span class="variable">innerHTML</span> = <span class="string">''</span>;
  <span class="variable">items</span>.<span class="method">forEach</span>(<span class="variable">item</span> => {
    <span class="variable">container</span>.<span class="method">appendChild</span>(<span class="method">createTodoElement</span>(<span class="variable">item</span>));
  });
}

<span class="comment">/**
 * HTMLエスケープ（XSS対策）
 */</span>
<span class="keyword">function</span> <span class="method">escapeHtml</span>(<span class="variable">text</span>) {
  <span class="keyword">const</span> <span class="variable">div</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'div'</span>);
  <span class="variable">div</span>.<span class="variable">textContent</span> = <span class="variable">text</span>;
  <span class="keyword">return</span> <span class="variable">div</span>.<span class="variable">innerHTML</span>;
}

<span class="comment">/**
 * 入力フィールドをクリア
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">clearInput</span>(<span class="variable">input</span>) {
  <span class="variable">input</span>.<span class="variable">value</span> = <span class="string">''</span>;
  <span class="variable">input</span>.<span class="method">focus</span>();
}</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box success">
          <div class="info-box-title">モジュール分割のメリット</div>
          <div class="info-box-content">
            <ul>
              <li><strong>可読性向上</strong>：各ファイルが小さく、目的が明確</li>
              <li><strong>保守性向上</strong>：変更の影響範囲が限定される</li>
              <li><strong>再利用性</strong>：他のプロジェクトでも使い回せる</li>
              <li><strong>テスト容易性</strong>：機能単位でテストできる</li>
              <li><strong>チーム開発</strong>：複数人で分担しやすい</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>再エクスポート（バレルパターン）</h3>
        <p>複数のモジュールをまとめてエクスポートする「バレル」ファイルを使うと、インポートがシンプルになります。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
バレルパターン（再エクスポート）

## 実装要件
- 複数モジュールをまとめてエクスポート
- `todo.js`、`storage.js`、`ui.js`、`events.js`を集約
- 全てを再エクスポートする方法を示す
- 名前を指定して再エクスポートする方法も示す

## 使用する構文
- `export * from './module.js'`
- `export { name1, name2 } from './module.js'`</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">modules/index.js（バレルファイル）</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">modules/index.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 各モジュールを再エクスポート</span>
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./todo.js'</span>;
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./storage.js'</span>;
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./ui.js'</span>;
<span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./events.js'</span>;

<span class="comment">// または名前を指定して再エクスポート</span>
<span class="keyword">export</span> { <span class="variable">loadItems</span>, <span class="variable">saveItems</span> } <span class="keyword">from</span> <span class="string">'./storage.js'</span>;
<span class="keyword">export</span> { <span class="variable">renderList</span>, <span class="variable">createTodoElement</span> } <span class="keyword">from</span> <span class="string">'./ui.js'</span>;</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
バレルパターンの効果比較

## 実装要件
- バレルを使わない場合のimport文を示す
- バレルを使った場合のimport文を示す
- 複数モジュールからのインポートを比較
- シンプルになることを明示

## 使用する構文
- `import { ... } from './modules/xxx.js'`（従来）
- `import { ... } from './modules/index.js'`（バレル）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">main.jsからのインポート</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">main.js</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// バレルを使わない場合（冗長）</span>
<span class="keyword">import</span> { <span class="variable">loadItems</span>, <span class="variable">saveItems</span> } <span class="keyword">from</span> <span class="string">'./modules/storage.js'</span>;
<span class="keyword">import</span> { <span class="variable">renderList</span> } <span class="keyword">from</span> <span class="string">'./modules/ui.js'</span>;
<span class="keyword">import</span> { <span class="variable">addTodo</span> } <span class="keyword">from</span> <span class="string">'./modules/todo.js'</span>;

<span class="comment">// バレルを使う場合（シンプル）</span>
<span class="keyword">import</span> {
  <span class="variable">loadItems</span>,
  <span class="variable">saveItems</span>,
  <span class="variable">renderList</span>,
  <span class="variable">addTodo</span>
} <span class="keyword">from</span> <span class="string">'./modules/index.js'</span>;</pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 11-3 実習 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 11-3</span>
        <h2 class="section-title">実習：モジュール版ToDoアプリ</h2>
      </div>

      <div class="intro-text">
        <p>ES Modulesを使って、ToDoアプリをモジュール分割しましょう。機能ごとにファイルを分けることで、コードの見通しが良くなります。</p>
      </div>

      <div class="subsection">
        <h3>ファイル構成</h3>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">プロジェクト構成</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">構成</span>
              </div>
              <pre class="demo-code-content"><code>todo-app/
├── index.html
├── style.css
├── js/
│   ├── main.js          <span class="comment"># エントリーポイント</span>
│   ├── config.js        <span class="comment"># 設定</span>
│   └── modules/
│       ├── todo.js      <span class="comment"># ToDoのCRUD操作</span>
│       ├── storage.js   <span class="comment"># LocalStorage</span>
│       ├── ui.js        <span class="comment"># DOM操作</span>
│       └── events.js    <span class="comment"># イベント処理</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>config.js</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ToDoアプリ設定モジュール

## 実装要件
- `CONFIG`: LocalStorageキー、最大文字数
- `MESSAGES`: バリデーションメッセージ
- オブジェクトとしてエクスポート

## 使用する構文
- `export const CONFIG = { ... }`
- `export const MESSAGES = { ... }`</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">js/config.js</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// アプリケーション設定</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">CONFIG</span> = {
  <span class="variable">STORAGE_KEY</span>: <span class="string">'todo_app_items'</span>,
  <span class="variable">MAX_LENGTH</span>: <span class="number">100</span>
};

<span class="comment">// メッセージ</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">MESSAGES</span> = {
  <span class="variable">EMPTY</span>: <span class="string">'タスクを入力してください'</span>,
  <span class="variable">TOO_LONG</span>: <span class="string">'100文字以内で入力してください'</span>
};</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>modules/todo.js</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ToDoアイテムCRUD操作モジュール

## 実装要件
- `createTodo`: 新規アイテム作成
- `toggleTodo`: 完了状態の切り替え
- `deleteTodo`: アイテム削除
- `filterTodos`: フィルタリング
- イミュータブルな操作で新しい配列を返す

## 使用するAPI
- `Date.now()`（ID生成）
- `Array.map()`、`Array.filter()`
- スプレッド構文（`...`）</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">js/modules/todo.js</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">/**
 * 新しいToDoアイテムを作成
 * @param {string} text - タスクのテキスト
 * @returns {Object} 新しいToDoアイテム
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">createTodo</span>(<span class="variable">text</span>) {
  <span class="keyword">return</span> {
    <span class="variable">id</span>: <span class="variable">Date</span>.<span class="method">now</span>(),
    <span class="variable">text</span>: <span class="variable">text</span>.<span class="method">trim</span>(),
    <span class="variable">completed</span>: <span class="keyword">false</span>,
    <span class="variable">createdAt</span>: <span class="keyword">new</span> <span class="method">Date</span>().<span class="method">toISOString</span>()
  };
}

<span class="comment">/**
 * ToDoの完了状態を切り替え
 * @param {Array} items - ToDoリスト
 * @param {number} id - 対象のID
 * @returns {Array} 更新されたリスト
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">toggleTodo</span>(<span class="variable">items</span>, <span class="variable">id</span>) {
  <span class="keyword">return</span> <span class="variable">items</span>.<span class="method">map</span>(<span class="variable">item</span> =>
    <span class="variable">item</span>.<span class="variable">id</span> === <span class="variable">id</span>
      ? { ...<span class="variable">item</span>, <span class="variable">completed</span>: !<span class="variable">item</span>.<span class="variable">completed</span> }
      : <span class="variable">item</span>
  );
}

<span class="comment">/**
 * ToDoを削除
 * @param {Array} items - ToDoリスト
 * @param {number} id - 削除するID
 * @returns {Array} 更新されたリスト
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">deleteTodo</span>(<span class="variable">items</span>, <span class="variable">id</span>) {
  <span class="keyword">return</span> <span class="variable">items</span>.<span class="method">filter</span>(<span class="variable">item</span> => <span class="variable">item</span>.<span class="variable">id</span> !== <span class="variable">id</span>);
}

<span class="comment">/**
 * フィルタリング
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">filterTodos</span>(<span class="variable">items</span>, <span class="variable">filter</span>) {
  <span class="keyword">switch</span> (<span class="variable">filter</span>) {
    <span class="keyword">case</span> <span class="string">'active'</span>:
      <span class="keyword">return</span> <span class="variable">items</span>.<span class="method">filter</span>(<span class="variable">item</span> => !<span class="variable">item</span>.<span class="variable">completed</span>);
    <span class="keyword">case</span> <span class="string">'completed'</span>:
      <span class="keyword">return</span> <span class="variable">items</span>.<span class="method">filter</span>(<span class="variable">item</span> => <span class="variable">item</span>.<span class="variable">completed</span>);
    <span class="keyword">default</span>:
      <span class="keyword">return</span> <span class="variable">items</span>;
  }
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>modules/storage.js</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ToDoアプリ用LocalStorage操作モジュール

## 実装要件
- `config.js`から設定をインポート
- `loadItems`: データ読み込み
- `saveItems`: データ保存
- シンプルなエラーハンドリング

## 使用するAPI
- `localStorage.getItem()` / `setItem()`
- `JSON.parse()` / `JSON.stringify()`
- `try-catch`</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">js/modules/storage.js</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">import</span> { <span class="variable">CONFIG</span> } <span class="keyword">from</span> <span class="string">'../config.js'</span>;

<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">loadItems</span>() {
  <span class="keyword">try</span> {
    <span class="keyword">const</span> <span class="variable">data</span> = <span class="variable">localStorage</span>.<span class="method">getItem</span>(<span class="variable">CONFIG</span>.<span class="variable">STORAGE_KEY</span>);
    <span class="keyword">return</span> <span class="variable">data</span> ? <span class="variable">JSON</span>.<span class="method">parse</span>(<span class="variable">data</span>) : [];
  } <span class="keyword">catch</span> {
    <span class="keyword">return</span> [];
  }
}

<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">saveItems</span>(<span class="variable">items</span>) {
  <span class="variable">localStorage</span>.<span class="method">setItem</span>(
    <span class="variable">CONFIG</span>.<span class="variable">STORAGE_KEY</span>,
    <span class="variable">JSON</span>.<span class="method">stringify</span>(<span class="variable">items</span>)
  );
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>modules/ui.js</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ToDoアプリ用UI操作モジュール

## 実装要件
- `createTodoElement`: ToDo要素の生成
- `renderList`: リスト描画
- `showMessage`: メッセージ表示（3秒後に非表示）
- `escapeHtml`: XSS対策（内部関数）

## 使用するAPI
- `document.createElement()`
- `innerHTML` / `textContent`
- `setTimeout()`</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">js/modules/ui.js</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">export</span> <span class="keyword">function</span> <span class="method">createTodoElement</span>(<span class="variable">item</span>) {
  <span class="keyword">const</span> <span class="variable">li</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'li'</span>);
  <span class="variable">li</span>.<span class="variable">className</span> = <span class="string">`todo-item ${<span class="variable">item</span>.<span class="variable">completed</span> ? <span class="string">'completed'</span> : <span class="string">''</span>}`</span>;
  <span class="variable">li</span>.<span class="variable">dataset</span>.<span class="variable">id</span> = <span class="variable">item</span>.<span class="variable">id</span>;

  <span class="variable">li</span>.<span class="variable">innerHTML</span> = <span class="string">`
    &lt;input type="checkbox" class="todo-check"
           ${<span class="variable">item</span>.<span class="variable">completed</span> ? <span class="string">'checked'</span> : <span class="string">''</span>}&gt;
    &lt;span class="todo-text"&gt;${<span class="method">escapeHtml</span>(<span class="variable">item</span>.<span class="variable">text</span>)}&lt;/span&gt;
    &lt;button class="todo-delete"&gt;削除&lt;/button&gt;
  `</span>;

  <span class="keyword">return</span> <span class="variable">li</span>;
}

<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">renderList</span>(<span class="variable">container</span>, <span class="variable">items</span>) {
  <span class="variable">container</span>.<span class="variable">innerHTML</span> = <span class="string">''</span>;
  <span class="variable">items</span>.<span class="method">forEach</span>(<span class="variable">item</span> => {
    <span class="variable">container</span>.<span class="method">appendChild</span>(<span class="method">createTodoElement</span>(<span class="variable">item</span>));
  });
}

<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">showMessage</span>(<span class="variable">message</span>, <span class="variable">type</span> = <span class="string">'error'</span>) {
  <span class="keyword">const</span> <span class="variable">msgEl</span> = <span class="variable">document</span>.<span class="method">querySelector</span>(<span class="string">'.message'</span>);
  <span class="variable">msgEl</span>.<span class="variable">textContent</span> = <span class="variable">message</span>;
  <span class="variable">msgEl</span>.<span class="variable">className</span> = <span class="string">`message ${<span class="variable">type</span>}`</span>;
  <span class="variable">msgEl</span>.<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'block'</span>;

  <span class="method">setTimeout</span>(() => {
    <span class="variable">msgEl</span>.<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'none'</span>;
  }, <span class="number">3000</span>);
}

<span class="keyword">function</span> <span class="method">escapeHtml</span>(<span class="variable">text</span>) {
  <span class="keyword">const</span> <span class="variable">div</span> = <span class="variable">document</span>.<span class="method">createElement</span>(<span class="string">'div'</span>);
  <span class="variable">div</span>.<span class="variable">textContent</span> = <span class="variable">text</span>;
  <span class="keyword">return</span> <span class="variable">div</span>.<span class="variable">innerHTML</span>;
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>modules/events.js</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ToDoアプリ用イベント処理モジュール

## 実装要件
- 各モジュールから必要な関数をインポート
- `setupEventListeners`: イベントリスナー設定
- フォーム送信処理
- チェックボックスのトグル処理
- 削除ボタンのクリック処理
- イベント委譲で効率的に処理

## 使用するAPI
- `addEventListener()`
- `event.target.closest()`
- `event.preventDefault()`</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">js/modules/events.js</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">import</span> { <span class="variable">MESSAGES</span>, <span class="variable">CONFIG</span> } <span class="keyword">from</span> <span class="string">'../config.js'</span>;
<span class="keyword">import</span> { <span class="variable">createTodo</span>, <span class="variable">toggleTodo</span>, <span class="variable">deleteTodo</span> } <span class="keyword">from</span> <span class="string">'./todo.js'</span>;
<span class="keyword">import</span> { <span class="variable">saveItems</span> } <span class="keyword">from</span> <span class="string">'./storage.js'</span>;
<span class="keyword">import</span> { <span class="variable">renderList</span>, <span class="variable">showMessage</span> } <span class="keyword">from</span> <span class="string">'./ui.js'</span>;

<span class="comment">/**
 * イベントリスナーを設定
 */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="method">setupEventListeners</span>(<span class="variable">elements</span>, <span class="variable">state</span>) {
  <span class="keyword">const</span> { <span class="variable">form</span>, <span class="variable">input</span>, <span class="variable">list</span> } = <span class="variable">elements</span>;

  <span class="comment">// フォーム送信</span>
  <span class="variable">form</span>.<span class="method">addEventListener</span>(<span class="string">'submit'</span>, (<span class="variable">e</span>) => {
    <span class="variable">e</span>.<span class="method">preventDefault</span>();
    <span class="method">handleAdd</span>(<span class="variable">input</span>, <span class="variable">list</span>, <span class="variable">state</span>);
  });

  <span class="comment">// リスト操作（イベント委譲）</span>
  <span class="variable">list</span>.<span class="method">addEventListener</span>(<span class="string">'click'</span>, (<span class="variable">e</span>) => {
    <span class="keyword">const</span> <span class="variable">item</span> = <span class="variable">e</span>.<span class="variable">target</span>.<span class="method">closest</span>(<span class="string">'.todo-item'</span>);
    <span class="keyword">if</span> (!<span class="variable">item</span>) <span class="keyword">return</span>;

    <span class="keyword">const</span> <span class="variable">id</span> = <span class="method">Number</span>(<span class="variable">item</span>.<span class="variable">dataset</span>.<span class="variable">id</span>);

    <span class="keyword">if</span> (<span class="variable">e</span>.<span class="variable">target</span>.<span class="variable">classList</span>.<span class="method">contains</span>(<span class="string">'todo-check'</span>)) {
      <span class="method">handleToggle</span>(<span class="variable">id</span>, <span class="variable">list</span>, <span class="variable">state</span>);
    }

    <span class="keyword">if</span> (<span class="variable">e</span>.<span class="variable">target</span>.<span class="variable">classList</span>.<span class="method">contains</span>(<span class="string">'todo-delete'</span>)) {
      <span class="method">handleDelete</span>(<span class="variable">id</span>, <span class="variable">list</span>, <span class="variable">state</span>);
    }
  });
}

<span class="keyword">function</span> <span class="method">handleAdd</span>(<span class="variable">input</span>, <span class="variable">list</span>, <span class="variable">state</span>) {
  <span class="keyword">const</span> <span class="variable">text</span> = <span class="variable">input</span>.<span class="variable">value</span>.<span class="method">trim</span>();

  <span class="keyword">if</span> (!<span class="variable">text</span>) {
    <span class="method">showMessage</span>(<span class="variable">MESSAGES</span>.<span class="variable">EMPTY</span>);
    <span class="keyword">return</span>;
  }

  <span class="keyword">if</span> (<span class="variable">text</span>.<span class="variable">length</span> > <span class="variable">CONFIG</span>.<span class="variable">MAX_LENGTH</span>) {
    <span class="method">showMessage</span>(<span class="variable">MESSAGES</span>.<span class="variable">TOO_LONG</span>);
    <span class="keyword">return</span>;
  }

  <span class="keyword">const</span> <span class="variable">newTodo</span> = <span class="method">createTodo</span>(<span class="variable">text</span>);
  <span class="variable">state</span>.<span class="variable">items</span>.<span class="method">unshift</span>(<span class="variable">newTodo</span>);

  <span class="method">saveItems</span>(<span class="variable">state</span>.<span class="variable">items</span>);
  <span class="method">renderList</span>(<span class="variable">list</span>, <span class="variable">state</span>.<span class="variable">items</span>);

  <span class="variable">input</span>.<span class="variable">value</span> = <span class="string">''</span>;
  <span class="variable">input</span>.<span class="method">focus</span>();
}

<span class="keyword">function</span> <span class="method">handleToggle</span>(<span class="variable">id</span>, <span class="variable">list</span>, <span class="variable">state</span>) {
  <span class="variable">state</span>.<span class="variable">items</span> = <span class="method">toggleTodo</span>(<span class="variable">state</span>.<span class="variable">items</span>, <span class="variable">id</span>);
  <span class="method">saveItems</span>(<span class="variable">state</span>.<span class="variable">items</span>);
  <span class="method">renderList</span>(<span class="variable">list</span>, <span class="variable">state</span>.<span class="variable">items</span>);
}

<span class="keyword">function</span> <span class="method">handleDelete</span>(<span class="variable">id</span>, <span class="variable">list</span>, <span class="variable">state</span>) {
  <span class="variable">state</span>.<span class="variable">items</span> = <span class="method">deleteTodo</span>(<span class="variable">state</span>.<span class="variable">items</span>, <span class="variable">id</span>);
  <span class="method">saveItems</span>(<span class="variable">state</span>.<span class="variable">items</span>);
  <span class="method">renderList</span>(<span class="variable">list</span>, <span class="variable">state</span>.<span class="variable">items</span>);
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>main.js（エントリーポイント）</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ToDoアプリのエントリーポイント

## 実装要件
- 各モジュールから必要な関数をインポート
- `state`: アプリケーション状態を定義
- `elements`: DOM要素の参照を定義
- `init`: 初期化関数
  - データ読み込み
  - 初期描画
  - イベントリスナー設定

## 使用する構文
- `import { ... } from`
- `document.getElementById()`</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">js/main.js</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">import</span> { <span class="variable">loadItems</span> } <span class="keyword">from</span> <span class="string">'./modules/storage.js'</span>;
<span class="keyword">import</span> { <span class="variable">renderList</span> } <span class="keyword">from</span> <span class="string">'./modules/ui.js'</span>;
<span class="keyword">import</span> { <span class="variable">setupEventListeners</span> } <span class="keyword">from</span> <span class="string">'./modules/events.js'</span>;

<span class="comment">// アプリケーションの状態</span>
<span class="keyword">const</span> <span class="variable">state</span> = {
  <span class="variable">items</span>: []
};

<span class="comment">// DOM要素の参照</span>
<span class="keyword">const</span> <span class="variable">elements</span> = {
  <span class="variable">form</span>: <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'todoForm'</span>),
  <span class="variable">input</span>: <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'todoInput'</span>),
  <span class="variable">list</span>: <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'todoList'</span>)
};

<span class="comment">/**
 * アプリケーション初期化
 */</span>
<span class="keyword">function</span> <span class="method">init</span>() {
  <span class="comment">// 保存されたデータを読み込み</span>
  <span class="variable">state</span>.<span class="variable">items</span> = <span class="method">loadItems</span>();

  <span class="comment">// 画面に表示</span>
  <span class="method">renderList</span>(<span class="variable">elements</span>.<span class="variable">list</span>, <span class="variable">state</span>.<span class="variable">items</span>);

  <span class="comment">// イベントリスナー設定</span>
  <span class="method">setupEventListeners</span>(<span class="variable">elements</span>, <span class="variable">state</span>);

  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">'ToDo App initialized'</span>);
}

<span class="comment">// アプリ起動</span>
<span class="method">init</span>();</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>index.html</h3>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
ES Modules版ToDoアプリのHTML

## 実装要件
- フォーム（入力欄と追加ボタン）
- メッセージ表示エリア
- ToDoリスト表示エリア
- `type="module"`でmain.jsを読み込む
- インラインCSSでシンプルなデザイン

## 使用する構文
- `<script type="module" src="js/main.js">`
- `<form>`, `<input>`, `<button>`
- `<ul>`, `<li>`</pre>
            </div>
          </div>
        </div>
        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">index.html</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">HTML</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="tag">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attr">lang</span>=<span class="value">"ja"</span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">charset</span>=<span class="value">"UTF-8"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">name</span>=<span class="value">"viewport"</span> <span class="attr">content</span>=<span class="value">"width=device-width, initial-scale=1.0"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>モジュール版ToDo App<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;style&gt;</span>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: sans-serif;
      background: #f1f5f9;
      min-height: 100vh;
      padding: 40px 20px;
    }
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    h1 { text-align: center; margin-bottom: 24px; color: #1e293b; }
    .todo-form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .todo-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 16px;
    }
    .todo-input:focus {
      outline: none;
      border-color: #3b82f6;
    }
    .todo-btn {
      padding: 12px 24px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .todo-btn:hover { background: #2563eb; }
    .message {
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: none;
    }
    .message.error { background: #fee2e2; color: #991b1b; }
    .todo-list { list-style: none; }
    .todo-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-bottom: 1px solid #e2e8f0;
    }
    .todo-item.completed .todo-text {
      text-decoration: line-through;
      color: #94a3b8;
    }
    .todo-text { flex: 1; }
    .todo-delete {
      padding: 6px 12px;
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  <span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"container"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;h1&gt;</span>ToDo App<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"message"</span><span class="tag">&gt;&lt;/div&gt;</span>
    <span class="tag">&lt;form</span> <span class="attr">id</span>=<span class="value">"todoForm"</span> <span class="attr">class</span>=<span class="value">"todo-form"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="value">"text"</span> <span class="attr">id</span>=<span class="value">"todoInput"</span> <span class="attr">class</span>=<span class="value">"todo-input"</span> <span class="attr">placeholder</span>=<span class="value">"新しいタスク..."</span><span class="tag">&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">type</span>=<span class="value">"submit"</span> <span class="attr">class</span>=<span class="value">"todo-btn"</span><span class="tag">&gt;</span>追加<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/form&gt;</span>
    <span class="tag">&lt;ul</span> <span class="attr">id</span>=<span class="value">"todoList"</span> <span class="attr">class</span>=<span class="value">"todo-list"</span><span class="tag">&gt;&lt;/ul&gt;</span>
  <span class="tag">&lt;/div&gt;</span>

  <span class="comment">&lt;!-- type="module" でモジュールを読み込み --&gt;</span>
  <span class="tag">&lt;script</span> <span class="attr">type</span>=<span class="value">"module"</span> <span class="attr">src</span>=<span class="value">"js/main.js"</span><span class="tag">&gt;&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">学習ポイント</div>
          <div class="info-box-content">
            <ul>
              <li><strong>関心の分離</strong>：データ操作、DOM操作、イベント処理を別ファイルに</li>
              <li><strong>単一責任</strong>：各モジュールは1つの責任だけを持つ</li>
              <li><strong>依存関係</strong>：必要なモジュールだけをインポート</li>
              <li><strong>状態管理</strong>：アプリの状態はmain.jsで一元管理</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 練習問題 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">練習問題</span>
        <h2 class="section-title">Chapter 11 練習問題</h2>
      </div>

      <div class="exercise-list">
        <div class="exercise-item">
          <div class="exercise-number">Q1</div>
          <div class="exercise-content">
            <p>名前付きエクスポートとデフォルトエクスポートの違いを説明し、それぞれの使い分けの例を挙げてください。</p>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q2</div>
          <div class="exercise-content">
            <p>以下のコードには問題があります。問題点を指摘し、修正してください。</p>
            <div class="code-block">
              <div class="code-content">
<pre>// utils.js
export default function add(a, b) { return a + b; }
export default function subtract(a, b) { return a - b; }</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q3</div>
          <div class="exercise-content">
            <p>ES Modulesを使うためにHTMLで必要な設定は何ですか？また、その設定によってどのような挙動の変化がありますか？</p>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q4</div>
          <div class="exercise-content">
            <p>以下の機能を持つ「ユーティリティモジュール」を作成してください。</p>
            <ol>
              <li>日付をフォーマットする関数（formatDate）</li>
              <li>ランダムな整数を生成する関数（randomInt）</li>
              <li>文字列を省略する関数（truncate）</li>
            </ol>
          </div>
        </div>
      </div>
    </section>

    <!-- 解答 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">解答</span>
        <h2 class="section-title">練習問題の解答</h2>
      </div>

      <div class="answer-list">
        <div class="answer-item">
          <div class="answer-header">Q1の解答</div>
          <div class="answer-content">
            <p><strong>名前付きエクスポート</strong>：1ファイルから複数エクスポート可能。インポート時に同じ名前（またはas）を使う必要がある。ユーティリティ関数や定数に向いている。</p>
            <p><strong>デフォルトエクスポート</strong>：1ファイルに1つだけ。インポート時に任意の名前を付けられる。クラスやメインの関数に向いている。</p>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q2の解答</div>
          <div class="answer-content">
            <p><strong>問題点</strong>：1ファイルに<code>export default</code>は1つしか書けない。</p>
            <div class="code-block">
              <div class="code-content">
<pre>// 修正版（名前付きエクスポートを使う）
export function add(a, b) { return a + b; }
export function subtract(a, b) { return a - b; }

// または
const add = (a, b) => a + b;
const subtract = (a, b) => a - b;
export { add, subtract };</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q3の解答</div>
          <div class="answer-content">
            <p><strong>設定</strong>：<code>&lt;script type="module" src="main.js"&gt;&lt;/script&gt;</code></p>
            <p><strong>挙動の変化</strong>：</p>
            <ul>
              <li>自動的にStrict Modeになる</li>
              <li>defer属性と同様にDOMの読み込み後に実行される</li>
              <li>トップレベル変数がグローバルを汚染しない</li>
              <li>CORS制限が適用される（サーバーが必要）</li>
            </ul>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q4の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>// utils.js

/**
 * 日付をフォーマット
 * @param {Date} date
 * @param {string} format - 'YYYY-MM-DD' or 'YYYY/MM/DD'
 */
export function formatDate(date, format = 'YYYY-MM-DD') {
  const y = date.getFullYear();
  const m = String(date.getMonth() + 1).padStart(2, '0');
  const d = String(date.getDate()).padStart(2, '0');

  return format
    .replace('YYYY', y)
    .replace('MM', m)
    .replace('DD', d);
}

/**
 * min以上max以下のランダムな整数を生成
 */
export function randomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

/**
 * 文字列を指定文字数で省略
 */
export function truncate(str, maxLength, suffix = '...') {
  if (str.length <= maxLength) return str;
  return str.slice(0, maxLength - suffix.length) + suffix;
}</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- コラム -->
    <div class="column">
      <div class="column-header">
        <span class="column-badge">コラム</span>
        <span class="column-title">バンドラーとは</span>
      </div>
      <p>現代のWeb開発では、ES Modulesをそのまま使うのではなく、<strong>バンドラー</strong>というツールを使うことが一般的です。代表的なものにVite、webpack、esbuildなどがあります。</p>
      <p>バンドラーは複数のモジュールを1つ（または少数）のファイルにまとめ、ブラウザで効率よく読み込めるようにします。また、古いブラウザ向けの変換や、コードの最適化なども行います。</p>
      <p>この教材ではブラウザのネイティブES Modulesを使いましたが、実際のプロジェクトではViteなどのバンドラーを使うことで、開発体験とパフォーマンスが向上します。</p>
    </div>
  </div>

  <!-- ページナビゲーション -->
  <div class="page-nav">
    <a href="10js-animation.html" class="page-nav-btn prev">
      <div class="page-nav-label">前へ</div>
      <div class="page-nav-title">アニメーション</div>
    </a>
    <a href="12js-portfolio.html" class="page-nav-btn next">
      <div class="page-nav-label">次へ</div>
      <div class="page-nav-title">総合演習：プロジェクトアーカイブサイト</div>
    </a>
  </div>

  <footer class="footer">
    <p>JavaScript入門 - 職業訓練校教材</p>
  </footer>

  <script src="../../shared/demo.js"></script>
</body>
</html>
