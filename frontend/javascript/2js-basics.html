<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 2: JavaScript基礎文法 - JavaScript入門</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/common.css">
  <style>
    :root {
      --primary: #007ACC;
      --primary-dark: #005A9E;
      --primary-light: #E8F4FD;
      --primary-lighter: #B3D7FF;
    }
    .nav-category-links { display: none; }
  </style>
</head>
<body>
  <nav class="global-nav"></nav>
  <script src="../../shared/js/nav-javascript.js"></script>

  <div class="container">
    <!-- チャプターヘッダー -->
    <header class="chapter-header">
      <div class="chapter-badge">Chapter</div>
      <div class="chapter-number">2</div>
      <h1 class="chapter-title">JavaScript基礎文法</h1>
      <p class="chapter-subtitle">変数、データ型、演算子をマスターしよう</p>
    </header>

    <!-- 目次 -->
    <nav class="toc">
      <h2 class="toc-title">この章の内容</h2>
      <ul class="toc-list">
        <li class="toc-item"><span class="toc-number">2-1</span>変数と定数</li>
        <li class="toc-item"><span class="toc-number">2-2</span>データ型</li>
        <li class="toc-item"><span class="toc-number">2-3</span>演算子</li>
        <li class="toc-item"><span class="toc-number">2-4</span>文字列操作</li>
        <li class="toc-item"><span class="toc-number">2-5</span>実習：電卓アプリ</li>
        <li class="toc-item"><span class="toc-number">練習</span>練習問題</li>
      </ul>
    </nav>

    <!-- Section 2-1 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 2-1</span>
        <h2 class="section-title">変数と定数</h2>
      </div>

      <div class="intro-text">
        <p>変数は、データを一時的に保存しておくための「箱」のようなものです。JavaScriptでは<code>let</code>、<code>const</code>、<code>var</code>の3つのキーワードで変数を宣言できます。</p>
      </div>

      <div class="subsection">
        <h3>let, const, var の違い</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
`const`、`let`、`var`の変数宣言の違いを比較

## 実装要件
- `const`で定数を宣言（再代入不可の例）
- `let`で変数を宣言（再代入可能の例）
- `var`の使用例（非推奨の説明）
- コメントで再代入の可否を明記

## 使用する構文
- const（定数宣言）
- let（変数宣言）
- var（旧式の変数宣言）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">変数宣言の比較</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// const - 再代入不可（定数）</span>
<span class="keyword">const</span> <span class="variable">PI</span> = <span class="number">3.14159</span>;
<span class="comment">// PI = 3.14;  // エラー！再代入できません</span>

<span class="keyword">const</span> <span class="variable">TAX_RATE</span> = <span class="number">0.1</span>;
<span class="keyword">const</span> <span class="variable">APP_NAME</span> = <span class="string">"JavaScript練習"</span>;

<span class="comment">// let - 再代入可能</span>
<span class="keyword">let</span> <span class="variable">count</span> = <span class="number">0</span>;
<span class="variable">count</span> = <span class="number">1</span>;      <span class="comment">// OK</span>
<span class="variable">count</span> = <span class="variable">count</span> + <span class="number">1</span>;  <span class="comment">// OK → 2</span>

<span class="keyword">let</span> <span class="variable">userName</span> = <span class="string">"田中"</span>;
<span class="variable">userName</span> = <span class="string">"山田"</span>;  <span class="comment">// OK</span>

<span class="comment">// var - 古い書き方（非推奨）</span>
<span class="keyword">var</span> <span class="variable">oldStyle</span> = <span class="string">"使用を避けましょう"</span>;</pre>
              </div>
            </div>
            <div class="demo-preview-section">
              <div class="demo-preview-header">
                <span class="demo-preview-label">使い分けガイド</span>
              </div>
              <div class="demo-preview-content">
                <p><strong style="color: #22c55e;">const</strong>：基本的にこれを使う。値が変わらないものに。</p>
                <p><strong style="color: #3b82f6;">let</strong>：値を変更する必要がある場合に使う。</p>
                <p><strong style="color: #ef4444;">var</strong>：使わない。古いコードでのみ見かける。</p>
              </div>
            </div>
          </div>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>キーワード</th>
                <th>再代入</th>
                <th>再宣言</th>
                <th>スコープ</th>
                <th>推奨度</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>const</code></td>
                <td>❌ 不可</td>
                <td>❌ 不可</td>
                <td>ブロック</td>
                <td>⭐⭐⭐</td>
              </tr>
              <tr>
                <td><code>let</code></td>
                <td>✅ 可能</td>
                <td>❌ 不可</td>
                <td>ブロック</td>
                <td>⭐⭐</td>
              </tr>
              <tr>
                <td><code>var</code></td>
                <td>✅ 可能</td>
                <td>✅ 可能</td>
                <td>関数</td>
                <td>❌ 非推奨</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>const（定数宣言）</h4>
              <div class="syntax-pattern">const 変数名 = 値;</div>
              <p>再代入できない変数（定数）を宣言します。値が変わらないことが保証されるため、コードの意図が明確になります。基本的にはconstを使用し、再代入が必要な場合のみletを使いましょう。</p>
            </div>
            <div class="syntax-item">
              <h4>let（変数宣言）</h4>
              <div class="syntax-pattern">let 変数名 = 値;</div>
              <p>再代入可能な変数を宣言します。ループのカウンターや、後から値を更新する必要がある場合に使用します。ブロックスコープを持つため、宣言したブロック内でのみ有効です。</p>
            </div>
            <div class="syntax-item">
              <h4>var（旧式の変数宣言）</h4>
              <div class="syntax-pattern">var 変数名 = 値;</div>
              <p>ES5以前の変数宣言方法です。関数スコープを持ち、ブロックスコープを無視するため予期しない動作を引き起こすことがあります。現在は使用を避け、letまたはconstを使用することが推奨されています。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>変数の命名規則</h3>
        <p>変数名には一定のルールと慣習があります。読みやすく、意味が分かる名前を付けることが重要です。</p>

        <div class="feature-list">
          <div class="feature-item">
            <div class="feature-icon">✅</div>
            <div class="feature-content">
              <h4>使える文字</h4>
              <p>英字、数字、アンダースコア(_)、ドル記号($)。ただし数字で始めることはできません。</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">🐪</div>
            <div class="feature-content">
              <h4>キャメルケース（推奨）</h4>
              <p>複数の単語を繋げる場合、2語目以降の先頭を大文字に。例：<code>userName</code>, <code>totalPrice</code></p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">📝</div>
            <div class="feature-content">
              <h4>定数は大文字＋アンダースコア</h4>
              <p>変更されない値は全て大文字で。例：<code>MAX_COUNT</code>, <code>API_URL</code></p>
            </div>
          </div>
        </div>

        <div class="demo-compare">
          <div class="demo-compare-item good">
            <div class="demo-compare-header">良い例</div>
            <pre style="background: #f8fafc; padding: 12px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 13px;">
userName
totalPrice
isLoggedIn
MAX_RETRY_COUNT
getUserData
</pre>
          </div>
          <div class="demo-compare-item bad">
            <div class="demo-compare-header">悪い例</div>
            <pre style="background: #f8fafc; padding: 12px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 13px;">
1stPlace  // 数字で始まる
user-name // ハイフンは使えない
let       // 予約語
a, b, x   // 意味不明
data      // 抽象的すぎる
</pre>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>スコープ（変数の有効範囲）</h3>
        <p>変数には「使える範囲」があります。これを<strong>スコープ</strong>と呼びます。</p>

        <!-- SVGスコープ図解 -->
        <div class="demo-area" style="padding: 20px; overflow-x: auto;">
          <svg viewBox="0 0 700 300" style="min-width: 600px; width: 100%; height: auto;">
            <!-- グローバルスコープ -->
            <rect x="20" y="20" width="660" height="260" rx="12" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
            <text x="40" y="50" font-size="14" font-weight="bold" fill="#1e40af">グローバルスコープ</text>
            <text x="40" y="70" font-size="12" fill="#1e40af">const globalVar = "全体で使える";</text>

            <!-- 関数スコープ -->
            <rect x="50" y="90" width="280" height="170" rx="10" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
            <text x="70" y="120" font-size="14" font-weight="bold" fill="#166534">関数スコープ (function)</text>
            <text x="70" y="145" font-size="11" fill="#166534">let funcVar = "関数内で使える";</text>

            <!-- ブロックスコープ（関数内） -->
            <rect x="80" y="165" width="220" height="80" rx="8" fill="#fef9c3" stroke="#eab308" stroke-width="2"/>
            <text x="100" y="190" font-size="13" font-weight="bold" fill="#854d0e">ブロックスコープ {}</text>
            <text x="100" y="210" font-size="11" fill="#854d0e">let blockVar = "ブロック内のみ";</text>
            <text x="100" y="230" font-size="11" fill="#854d0e">// varはブロックを無視！</text>

            <!-- 別の関数スコープ -->
            <rect x="370" y="90" width="280" height="170" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
            <text x="390" y="120" font-size="14" font-weight="bold" fill="#9d174d">別の関数スコープ</text>
            <text x="390" y="145" font-size="11" fill="#9d174d">// funcVar は使えない</text>
            <text x="390" y="165" font-size="11" fill="#9d174d">// globalVar は使える！</text>

            <!-- 矢印 -->
            <text x="350" y="180" font-size="24" fill="#64748b">↔</text>
            <text x="345" y="200" font-size="10" fill="#64748b">別空間</text>
          </svg>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
JavaScriptのスコープ（変数の有効範囲）を解説

## 実装要件
- グローバルスコープの変数を定義
- 関数スコープの変数を定義
- ブロックスコープ（if文内）の変数を定義
- `let`と`var`のスコープの違いを比較

## 使用する構文
- const / let（ブロックスコープ）
- var（関数スコープ）
- function（関数定義）
- if文（ブロック）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">スコープの例</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// グローバルスコープ</span>
<span class="keyword">const</span> <span class="variable">globalMessage</span> = <span class="string">"どこからでもアクセス可能"</span>;

<span class="keyword">function</span> <span class="method">example</span>() {
  <span class="comment">// 関数スコープ</span>
  <span class="keyword">let</span> <span class="variable">funcMessage</span> = <span class="string">"この関数内でのみ有効"</span>;

  <span class="keyword">if</span> (<span class="keyword">true</span>) {
    <span class="comment">// ブロックスコープ</span>
    <span class="keyword">let</span> <span class="variable">blockLet</span> = <span class="string">"letはブロック内のみ"</span>;
    <span class="keyword">var</span> <span class="variable">blockVar</span> = <span class="string">"varは関数全体で有効"</span>;

    <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">globalMessage</span>);  <span class="comment">// OK</span>
    <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">funcMessage</span>);    <span class="comment">// OK</span>
    <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">blockLet</span>);       <span class="comment">// OK</span>
  }

  <span class="variable">console</span>.<span class="method">log</span>(<span class="variable">blockVar</span>);  <span class="comment">// OK（varはブロックを無視）</span>
  <span class="comment">// console.log(blockLet);  // エラー！</span>
}

<span class="method">example</span>();
<span class="comment">// console.log(funcMessage);  // エラー！</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-title"><span class="material-icons">warning</span> varを避けるべき理由</div>
          <div class="info-box-content">
            <p><code>var</code>はブロックスコープを持たないため、予期しない動作を引き起こすことがあります。また、同じ名前で再宣言できてしまうため、バグの原因になりやすいです。<code>let</code>と<code>const</code>を使いましょう。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2-2 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 2-2</span>
        <h2 class="section-title">データ型</h2>
      </div>

      <div class="intro-text">
        <p>JavaScriptには様々なデータ型があります。大きく分けて「プリミティブ型」と「オブジェクト型」の2種類があります。</p>
      </div>

      <div class="subsection">
        <h3>プリミティブ型（基本型）</h3>
        <p>変更不可能（イミュータブル）な単純な値です。</p>

        <!-- SVGデータ型分類 -->
        <div class="demo-area" style="padding: 20px; overflow-x: auto;">
          <svg viewBox="0 0 700 320" style="min-width: 600px; width: 100%; height: auto;">
            <!-- タイトル -->
            <text x="350" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#1e293b">JavaScriptのデータ型</text>

            <!-- プリミティブ型 -->
            <rect x="30" y="50" width="300" height="250" rx="12" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
            <text x="180" y="80" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">プリミティブ型</text>

            <rect x="50" y="95" width="120" height="35" rx="6" fill="#3b82f6"/>
            <text x="110" y="118" text-anchor="middle" font-size="12" fill="white">String（文字列）</text>

            <rect x="180" y="95" width="120" height="35" rx="6" fill="#3b82f6"/>
            <text x="240" y="118" text-anchor="middle" font-size="12" fill="white">Number（数値）</text>

            <rect x="50" y="140" width="120" height="35" rx="6" fill="#3b82f6"/>
            <text x="110" y="163" text-anchor="middle" font-size="12" fill="white">Boolean（真偽値）</text>

            <rect x="180" y="140" width="120" height="35" rx="6" fill="#3b82f6"/>
            <text x="240" y="163" text-anchor="middle" font-size="12" fill="white">undefined</text>

            <rect x="50" y="185" width="120" height="35" rx="6" fill="#3b82f6"/>
            <text x="110" y="208" text-anchor="middle" font-size="12" fill="white">null</text>

            <rect x="180" y="185" width="120" height="35" rx="6" fill="#64748b"/>
            <text x="240" y="208" text-anchor="middle" font-size="12" fill="white">Symbol (ES6)</text>

            <rect x="115" y="230" width="120" height="35" rx="6" fill="#64748b"/>
            <text x="175" y="253" text-anchor="middle" font-size="12" fill="white">BigInt (ES2020)</text>

            <!-- オブジェクト型 -->
            <rect x="370" y="50" width="300" height="250" rx="12" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
            <text x="520" y="80" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">オブジェクト型</text>

            <rect x="390" y="95" width="120" height="35" rx="6" fill="#22c55e"/>
            <text x="450" y="118" text-anchor="middle" font-size="12" fill="white">Object</text>

            <rect x="520" y="95" width="120" height="35" rx="6" fill="#22c55e"/>
            <text x="580" y="118" text-anchor="middle" font-size="12" fill="white">Array（配列）</text>

            <rect x="390" y="140" width="120" height="35" rx="6" fill="#22c55e"/>
            <text x="450" y="163" text-anchor="middle" font-size="12" fill="white">Function</text>

            <rect x="520" y="140" width="120" height="35" rx="6" fill="#22c55e"/>
            <text x="580" y="163" text-anchor="middle" font-size="12" fill="white">Date</text>

            <rect x="390" y="185" width="120" height="35" rx="6" fill="#22c55e"/>
            <text x="450" y="208" text-anchor="middle" font-size="12" fill="white">RegExp</text>

            <rect x="520" y="185" width="120" height="35" rx="6" fill="#22c55e"/>
            <text x="580" y="208" text-anchor="middle" font-size="12" fill="white">Map / Set</text>

            <text x="520" y="270" text-anchor="middle" font-size="11" fill="#64748b">...その他多数</text>
          </svg>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
JavaScriptのプリミティブ型（基本データ型）の使用例

## 実装要件
- String（文字列）の宣言と使用
- Number（数値）の宣言と使用
- Boolean（真偽値）の宣言と使用
- undefinedの発生例
- nullの使用例

## 対象データ型
- String: "..." または '...'
- Number: 整数・小数
- Boolean: true / false
- undefined: 値が未定義
- null: 意図的な空値</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">プリミティブ型の例</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// String（文字列）</span>
<span class="keyword">const</span> <span class="variable">name</span> = <span class="string">"田中太郎"</span>;
<span class="keyword">const</span> <span class="variable">greeting</span> = <span class="string">'こんにちは'</span>;

<span class="comment">// Number（数値）- 整数も小数も同じ型</span>
<span class="keyword">const</span> <span class="variable">age</span> = <span class="number">25</span>;
<span class="keyword">const</span> <span class="variable">price</span> = <span class="number">1980.50</span>;
<span class="keyword">const</span> <span class="variable">negative</span> = <span class="number">-100</span>;

<span class="comment">// Boolean（真偽値）</span>
<span class="keyword">const</span> <span class="variable">isActive</span> = <span class="keyword">true</span>;
<span class="keyword">const</span> <span class="variable">isLoggedIn</span> = <span class="keyword">false</span>;

<span class="comment">// undefined - 値が未定義</span>
<span class="keyword">let</span> <span class="variable">notDefined</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">notDefined</span>);  <span class="comment">// undefined</span>

<span class="comment">// null - 値が意図的に空</span>
<span class="keyword">const</span> <span class="variable">emptyValue</span> = <span class="keyword">null</span>;</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>Number（数値型）</h4>
              <div class="syntax-pattern">const 変数名 = 数値;</div>
              <p>整数や小数を表すデータ型です。JavaScriptでは整数と小数の区別がなく、すべてNumber型として扱われます。特殊な値としてInfinity（無限大）やNaN（非数）があります。</p>
            </div>
            <div class="syntax-item">
              <h4>String（文字列型）</h4>
              <div class="syntax-pattern">const 変数名 = "文字列"; / '文字列' / `文字列`</div>
              <p>テキストデータを表す型です。シングルクォート、ダブルクォート、バッククォートのいずれかで囲みます。バッククォートを使うとテンプレートリテラルとして変数の埋め込みが可能です。</p>
            </div>
            <div class="syntax-item">
              <h4>Boolean（真偽値型）</h4>
              <div class="syntax-pattern">const 変数名 = true; / false;</div>
              <p>真（true）または偽（false）の2値のみを持つ型です。条件分岐や論理演算で使用されます。0、空文字列、null、undefinedはfalseとして評価されます（falsyな値）。</p>
            </div>
            <div class="syntax-item">
              <h4>null / undefined</h4>
              <div class="syntax-pattern">const 変数名 = null; / let 変数名;</div>
              <p>nullは「意図的に値がない」ことを示し、undefinedは「値が未定義」であることを示します。変数を宣言しても値を代入しないとundefinedになります。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>typeof演算子</h3>
        <p><code>typeof</code>演算子を使うと、値のデータ型を調べることができます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
`typeof`演算子によるデータ型の判定

## 実装要件
- 各データ型に対して`typeof`を実行
- `console.log()`で結果を出力
- `typeof null`の注意点を含める

## 判定対象
- String → "string"
- Number → "number"
- Boolean → "boolean"
- undefined → "undefined"
- null → "object"（注意！）
- Array → "object"
- Object → "object"
- Function → "function"

## 使用する演算子
- typeof</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">typeof の使い方</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="string">"Hello"</span>);     <span class="comment">// "string"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="number">42</span>);          <span class="comment">// "number"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="number">3.14</span>);        <span class="comment">// "number"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="keyword">true</span>);        <span class="comment">// "boolean"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="keyword">undefined</span>);   <span class="comment">// "undefined"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="keyword">null</span>);        <span class="comment">// "object" ← 注意！</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);   <span class="comment">// "object"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> {<span class="variable">a</span>: <span class="number">1</span>});      <span class="comment">// "object"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">typeof</span> <span class="keyword">function</span>(){}); <span class="comment">// "function"</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-title"><span class="material-icons">warning</span> typeof null の罠</div>
          <div class="info-box-content">
            <p><code>typeof null</code>が<code>"object"</code>を返すのは、JavaScriptの歴史的なバグです。nullかどうかを判定するには<code>=== null</code>を使いましょう。</p>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>型変換</h3>
        <p>JavaScriptでは、異なる型の値を変換することができます。<strong>暗黙的な型変換</strong>（自動）と<strong>明示的な型変換</strong>（手動）があります。</p>

        <h4>明示的な型変換（推奨）</h4>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
明示的な型変換（キャスト）

## 実装要件
- 文字列→数値: `Number()`, `parseInt()`, `parseFloat()`
- 数値→文字列: `String()`, `.toString()`
- 任意→真偽値: `Boolean()`

## 使用する関数/メソッド
- Number()
- parseInt()
- parseFloat()
- String()
- .toString()
- Boolean()

## 変換例
- "123" → 123
- 456 → "456"
- 0 → false, 1 → true</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">明示的な型変換</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 文字列 → 数値</span>
<span class="keyword">const</span> <span class="variable">str</span> = <span class="string">"123"</span>;
<span class="keyword">const</span> <span class="variable">num1</span> = <span class="method">Number</span>(<span class="variable">str</span>);     <span class="comment">// 123</span>
<span class="keyword">const</span> <span class="variable">num2</span> = <span class="method">parseInt</span>(<span class="variable">str</span>);    <span class="comment">// 123（整数）</span>
<span class="keyword">const</span> <span class="variable">num3</span> = <span class="method">parseFloat</span>(<span class="string">"3.14"</span>); <span class="comment">// 3.14（小数）</span>

<span class="comment">// 数値 → 文字列</span>
<span class="keyword">const</span> <span class="variable">num</span> = <span class="number">456</span>;
<span class="keyword">const</span> <span class="variable">str1</span> = <span class="method">String</span>(<span class="variable">num</span>);     <span class="comment">// "456"</span>
<span class="keyword">const</span> <span class="variable">str2</span> = <span class="variable">num</span>.<span class="method">toString</span>();  <span class="comment">// "456"</span>

<span class="comment">// 真偽値への変換</span>
<span class="keyword">const</span> <span class="variable">bool1</span> = <span class="method">Boolean</span>(<span class="number">1</span>);     <span class="comment">// true</span>
<span class="keyword">const</span> <span class="variable">bool2</span> = <span class="method">Boolean</span>(<span class="number">0</span>);     <span class="comment">// false</span>
<span class="keyword">const</span> <span class="variable">bool3</span> = <span class="method">Boolean</span>(<span class="string">""</span>);    <span class="comment">// false</span>
<span class="keyword">const</span> <span class="variable">bool4</span> = <span class="method">Boolean</span>(<span class="string">"abc"</span>); <span class="comment">// true</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>Number() / parseInt() / parseFloat()</h4>
              <div class="syntax-pattern">Number("123") / parseInt("123") / parseFloat("3.14")</div>
              <p>文字列を数値に変換します。Number()は文字列全体を数値に変換し、parseInt()は整数部分のみ、parseFloat()は小数も含めて変換します。変換できない場合はNaNを返します。</p>
            </div>
            <div class="syntax-item">
              <h4>String() / .toString()</h4>
              <div class="syntax-pattern">String(123) / (123).toString()</div>
              <p>値を文字列に変換します。数値の連結や表示用のフォーマットに使用します。toString()は基数を指定して2進数や16進数の文字列に変換することもできます。</p>
            </div>
          </div>
        </div>

        <h4>暗黙的な型変換（注意が必要）</h4>
        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
暗黙的な型変換（型強制: Type Coercion）

## 実装要件
- 文字列 + 数値の演算結果
- 文字列 - 数値の演算結果
- `==`（等価演算子）での比較
- `===`（厳密等価演算子）での比較

## 注意すべき動作
- "5" + 3 → "53"（文字列連結）
- "5" - 3 → 2（数値演算）
- "5" == 5 → true（型変換あり）
- "5" === 5 → false（型変換なし）

## 使用する演算子
- +, -（算術演算子）
- ==（等価演算子）
- ===（厳密等価演算子）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">暗黙的な型変換の例</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 文字列 + 数値 → 文字列に結合</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"合計: "</span> + <span class="number">100</span>);  <span class="comment">// "合計: 100"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"5"</span> + <span class="number">3</span>);         <span class="comment">// "53" ← 注意！</span>

<span class="comment">// 文字列 - 数値 → 数値として計算</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"10"</span> - <span class="number">3</span>);        <span class="comment">// 7</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"10"</span> * <span class="number">2</span>);        <span class="comment">// 20</span>

<span class="comment">// 比較での型変換</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"5"</span> == <span class="number">5</span>);        <span class="comment">// true （型変換あり）</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"5"</span> === <span class="number">5</span>);       <span class="comment">// false（型変換なし）</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2-3 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 2-3</span>
        <h2 class="section-title">演算子</h2>
      </div>

      <div class="intro-text">
        <p>演算子は、値に対して計算や比較などの操作を行うための記号です。算術演算子、比較演算子、論理演算子などがあります。</p>
      </div>

      <div class="subsection">
        <h3>算術演算子</h3>
        <p>数値の計算に使用する演算子です。</p>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>演算子</th>
                <th>名前</th>
                <th>例</th>
                <th>結果</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>+</code></td>
                <td>加算</td>
                <td><code>10 + 3</code></td>
                <td>13</td>
              </tr>
              <tr>
                <td><code>-</code></td>
                <td>減算</td>
                <td><code>10 - 3</code></td>
                <td>7</td>
              </tr>
              <tr>
                <td><code>*</code></td>
                <td>乗算</td>
                <td><code>10 * 3</code></td>
                <td>30</td>
              </tr>
              <tr>
                <td><code>/</code></td>
                <td>除算</td>
                <td><code>10 / 3</code></td>
                <td>3.333...</td>
              </tr>
              <tr>
                <td><code>%</code></td>
                <td>剰余（余り）</td>
                <td><code>10 % 3</code></td>
                <td>1</td>
              </tr>
              <tr>
                <td><code>**</code></td>
                <td>べき乗</td>
                <td><code>2 ** 3</code></td>
                <td>8</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>算術演算子</h4>
              <div class="syntax-pattern">+ - * / % **</div>
              <p>数値の計算に使用します。+（加算）、-（減算）、*（乗算）、/（除算）、%（剰余・余り）、**（べき乗）があります。%は偶奇判定などによく使われます。</p>
            </div>
            <div class="syntax-item">
              <h4>比較演算子</h4>
              <div class="syntax-pattern">== === != !== &lt; &gt; &lt;= &gt;=</div>
              <p>2つの値を比較してtrue/falseを返します。===（厳密等価）は型も含めて比較し、==（等価）は型変換後に比較します。バグを防ぐため===の使用を推奨します。</p>
            </div>
            <div class="syntax-item">
              <h4>論理演算子</h4>
              <div class="syntax-pattern">&amp;&amp; || !</div>
              <p>&amp;&amp;（AND）は両方がtrueの時にtrue、||（OR）はどちらかがtrueならtrue、!（NOT）は真偽値を反転します。条件を組み合わせる際に使用します。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>代入演算子</h3>
        <p>変数に値を代入するための演算子です。複合代入演算子を使うと、計算と代入を同時に行えます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
複合代入演算子とインクリメント/デクリメント

## 実装要件
- 複合代入演算子の使用例
- インクリメント演算子（++）の使用例
- デクリメント演算子（--）の使用例

## 使用する演算子
- +=（加算代入）
- -=（減算代入）
- *=（乗算代入）
- /=（除算代入）
- %=（剰余代入）
- ++（インクリメント）
- --（デクリメント）

## 動作例
- x += 5 は x = x + 5 と同等
- count++ は count = count + 1 と同等</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">代入演算子</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">10</span>;

<span class="variable">x</span> += <span class="number">5</span>;   <span class="comment">// x = x + 5  → 15</span>
<span class="variable">x</span> -= <span class="number">3</span>;   <span class="comment">// x = x - 3  → 12</span>
<span class="variable">x</span> *= <span class="number">2</span>;   <span class="comment">// x = x * 2  → 24</span>
<span class="variable">x</span> /= <span class="number">4</span>;   <span class="comment">// x = x / 4  → 6</span>
<span class="variable">x</span> %= <span class="number">4</span>;   <span class="comment">// x = x % 4  → 2</span>

<span class="comment">// インクリメント・デクリメント</span>
<span class="keyword">let</span> <span class="variable">count</span> = <span class="number">0</span>;
<span class="variable">count</span>++;  <span class="comment">// count = count + 1 → 1</span>
<span class="variable">count</span>--;  <span class="comment">// count = count - 1 → 0</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>比較演算子</h3>
        <p>2つの値を比較して、真偽値（true/false）を返します。</p>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>演算子</th>
                <th>意味</th>
                <th>例</th>
                <th>結果</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>==</code></td>
                <td>等しい（型変換あり）</td>
                <td><code>"5" == 5</code></td>
                <td>true</td>
              </tr>
              <tr>
                <td><code>===</code></td>
                <td>厳密に等しい（型も比較）</td>
                <td><code>"5" === 5</code></td>
                <td>false</td>
              </tr>
              <tr>
                <td><code>!=</code></td>
                <td>等しくない（型変換あり）</td>
                <td><code>"5" != 5</code></td>
                <td>false</td>
              </tr>
              <tr>
                <td><code>!==</code></td>
                <td>厳密に等しくない</td>
                <td><code>"5" !== 5</code></td>
                <td>true</td>
              </tr>
              <tr>
                <td><code>&lt;</code></td>
                <td>より小さい</td>
                <td><code>3 &lt; 5</code></td>
                <td>true</td>
              </tr>
              <tr>
                <td><code>&gt;</code></td>
                <td>より大きい</td>
                <td><code>3 &gt; 5</code></td>
                <td>false</td>
              </tr>
              <tr>
                <td><code>&lt;=</code></td>
                <td>以下</td>
                <td><code>5 &lt;= 5</code></td>
                <td>true</td>
              </tr>
              <tr>
                <td><code>&gt;=</code></td>
                <td>以上</td>
                <td><code>5 &gt;= 5</code></td>
                <td>true</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="info-box">
          <div class="info-box-title"><span class="material-icons">lightbulb</span> == と === の違い（重要！）</div>
          <div class="info-box-content">
            <p><strong>必ず <code>===</code>（厳密等価演算子）を使いましょう！</strong></p>
            <p><code>==</code>は型変換を行ってから比較するため、予期しない結果になることがあります。</p>
          </div>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
`==`と`===`の比較演算子の違い

## 実装要件
- `==`（型変換あり）の比較例
- `===`（型変換なし）の比較例
- 各比較結果を`console.log()`で出力

## 比較パターン
- "5" と 5 の比較
- 0 と false の比較
- "" と false の比較
- null と undefined の比較

## 使用する演算子
- ==（等価演算子）
- ===（厳密等価演算子）

## 推奨事項
- 常に`===`を使用してバグを防止</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">== と === の違い</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// == は型変換してから比較（危険！）</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"5"</span> == <span class="number">5</span>);       <span class="comment">// true</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="number">0</span> == <span class="keyword">false</span>);     <span class="comment">// true</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">""</span> == <span class="keyword">false</span>);    <span class="comment">// true</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">null</span> == <span class="keyword">undefined</span>); <span class="comment">// true</span>

<span class="comment">// === は型も含めて比較（安全！）</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">"5"</span> === <span class="number">5</span>);      <span class="comment">// false</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="number">0</span> === <span class="keyword">false</span>);    <span class="comment">// false</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">""</span> === <span class="keyword">false</span>);   <span class="comment">// false</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="keyword">null</span> === <span class="keyword">undefined</span>); <span class="comment">// false</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>論理演算子</h3>
        <p>複数の条件を組み合わせるための演算子です。</p>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>演算子</th>
                <th>名前</th>
                <th>説明</th>
                <th>例</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>&&</code></td>
                <td>AND（かつ）</td>
                <td>両方trueならtrue</td>
                <td><code>true && false</code> → false</td>
              </tr>
              <tr>
                <td><code>||</code></td>
                <td>OR（または）</td>
                <td>どちらかtrueならtrue</td>
                <td><code>true || false</code> → true</td>
              </tr>
              <tr>
                <td><code>!</code></td>
                <td>NOT（否定）</td>
                <td>true/falseを反転</td>
                <td><code>!true</code> → false</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
論理演算子を使った条件判定

## 実装要件
- AND演算子（&&）で複数条件の判定
- OR演算子（||）で「どちらか」の判定
- NOT演算子（!）で条件の反転

## 実践例
- 運転可否: 年齢 >= 18 && 免許あり
- 休日判定: 土曜 || 日曜 || 祝日
- 未ログイン判定: !isLoggedIn

## 使用する演算子
- &&（論理AND）
- ||（論理OR）
- !（論理NOT）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">論理演算子の使用例</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">age</span> = <span class="number">25</span>;
<span class="keyword">const</span> <span class="variable">hasLicense</span> = <span class="keyword">true</span>;

<span class="comment">// AND: 両方の条件を満たす</span>
<span class="keyword">if</span> (<span class="variable">age</span> >= <span class="number">18</span> && <span class="variable">hasLicense</span>) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"運転できます"</span>);
}

<span class="comment">// OR: どちらかの条件を満たす</span>
<span class="keyword">const</span> <span class="variable">isWeekend</span> = <span class="keyword">true</span>;
<span class="keyword">const</span> <span class="variable">isHoliday</span> = <span class="keyword">false</span>;
<span class="keyword">if</span> (<span class="variable">isWeekend</span> || <span class="variable">isHoliday</span>) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"休みです"</span>);
}

<span class="comment">// NOT: 条件を反転</span>
<span class="keyword">const</span> <span class="variable">isLoggedIn</span> = <span class="keyword">false</span>;
<span class="keyword">if</span> (!<span class="variable">isLoggedIn</span>) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"ログインしてください"</span>);
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>三項演算子</h3>
        <p>条件によって異なる値を返す短い書き方です。if-elseの簡略版として使えます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
三項演算子（条件演算子）による条件分岐

## 実装要件
- 三項演算子の基本構文を使用
- if-else文との比較例
- 実践例（会員割引の計算）

## 構文
条件 ? 真の値 : 偽の値

## 実践例
- 成人/未成年の判定
- 会員割引率の設定（会員: 0.9, 非会員: 1.0）

## 使用する演算子
- ?:（三項演算子）
- >=（比較演算子）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">三項演算子</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// 構文: 条件 ? 真の時の値 : 偽の時の値</span>

<span class="keyword">const</span> <span class="variable">age</span> = <span class="number">20</span>;
<span class="keyword">const</span> <span class="variable">status</span> = <span class="variable">age</span> >= <span class="number">18</span> ? <span class="string">"成人"</span> : <span class="string">"未成年"</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">status</span>);  <span class="comment">// "成人"</span>

<span class="comment">// 同じ意味のif-else</span>
<span class="keyword">let</span> <span class="variable">status2</span>;
<span class="keyword">if</span> (<span class="variable">age</span> >= <span class="number">18</span>) {
  <span class="variable">status2</span> = <span class="string">"成人"</span>;
} <span class="keyword">else</span> {
  <span class="variable">status2</span> = <span class="string">"未成年"</span>;
}

<span class="comment">// 実践例: 税込み価格の計算</span>
<span class="keyword">const</span> <span class="variable">isMember</span> = <span class="keyword">true</span>;
<span class="keyword">const</span> <span class="variable">price</span> = <span class="number">1000</span>;
<span class="keyword">const</span> <span class="variable">discount</span> = <span class="variable">isMember</span> ? <span class="number">0.9</span> : <span class="number">1.0</span>;  <span class="comment">// 会員は10%OFF</span>
<span class="keyword">const</span> <span class="variable">total</span> = <span class="variable">price</span> * <span class="variable">discount</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">total</span>);  <span class="comment">// 900</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2-4 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 2-4</span>
        <h2 class="section-title">文字列操作</h2>
      </div>

      <div class="intro-text">
        <p>文字列はJavaScriptで最もよく使うデータ型の一つです。様々な操作方法を覚えておきましょう。</p>
      </div>

      <div class="subsection">
        <h3>文字列の作成方法</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
文字列の作成方法（3種類の引用符）

## 実装要件
- シングルクォート（'...'）での文字列作成
- ダブルクォート（"..."）での文字列作成
- バッククォート（`...`）での文字列作成
- 引用符のネスト（入れ子）

## 使用する構文
- 'シングルクォート'
- "ダブルクォート"
- `バッククォート`（テンプレートリテラル）

## ネストの例
- "He said 'Hello'"
- 'She said "Hi"'</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">3つの引用符</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="comment">// シングルクォート</span>
<span class="keyword">const</span> <span class="variable">str1</span> = <span class="string">'こんにちは'</span>;

<span class="comment">// ダブルクォート</span>
<span class="keyword">const</span> <span class="variable">str2</span> = <span class="string">"こんにちは"</span>;

<span class="comment">// バッククォート（テンプレートリテラル）</span>
<span class="keyword">const</span> <span class="variable">str3</span> = <span class="string">`こんにちは`</span>;

<span class="comment">// 引用符の中に引用符を含める</span>
<span class="keyword">const</span> <span class="variable">str4</span> = <span class="string">"He said 'Hello'"</span>;
<span class="keyword">const</span> <span class="variable">str5</span> = <span class="string">'She said "Hi"'</span>;</pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>テンプレートリテラル</h3>
        <p>バッククォート（`）で囲むテンプレートリテラルは、変数の埋め込みや改行が簡単にできます。</p>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
テンプレートリテラルによる文字列操作

## 実装要件
- `${変数}`で変数を埋め込み
- `${式}`で計算式を埋め込み
- 複数行文字列の作成
- 従来の文字列連結（+演算子）との比較

## 使用する構文
- `テンプレートリテラル`
- ${...}（式の埋め込み）

## 実践例
- 名前と年齢の表示
- 税込価格の計算表示
- HTMLテンプレートの生成</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">テンプレートリテラル</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">name</span> = <span class="string">"田中"</span>;
<span class="keyword">const</span> <span class="variable">age</span> = <span class="number">25</span>;

<span class="comment">// 従来の書き方（文字列連結）</span>
<span class="keyword">const</span> <span class="variable">message1</span> = <span class="string">"私は"</span> + <span class="variable">name</span> + <span class="string">"です。"</span> + <span class="variable">age</span> + <span class="string">"歳です。"</span>;

<span class="comment">// テンプレートリテラル（${}で変数を埋め込む）</span>
<span class="keyword">const</span> <span class="variable">message2</span> = <span class="string">`私は${<span class="variable">name</span>}です。${<span class="variable">age</span>}歳です。`</span>;

<span class="comment">// 計算式も埋め込める</span>
<span class="keyword">const</span> <span class="variable">price</span> = <span class="number">1000</span>;
<span class="keyword">const</span> <span class="variable">tax</span> = <span class="number">0.1</span>;
<span class="variable">console</span>.<span class="method">log</span>(<span class="string">`税込価格: ${<span class="variable">price</span> * (<span class="number">1</span> + <span class="variable">tax</span>)}円`</span>);
<span class="comment">// → "税込価格: 1100円"</span>

<span class="comment">// 複数行の文字列</span>
<span class="keyword">const</span> <span class="variable">html</span> = <span class="string">`
  &lt;div class="card"&gt;
    &lt;h2&gt;${<span class="variable">name</span>}&lt;/h2&gt;
    &lt;p&gt;年齢: ${<span class="variable">age</span>}歳&lt;/p&gt;
  &lt;/div&gt;
`</span>;</pre>
              </div>
            </div>
          </div>
        </div>

        <div class="syntax-box">
          <div class="syntax-box-header">
            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
            <span class="syntax-box-title">構文説明</span>
          </div>
          <div class="syntax-box-content">
            <div class="syntax-item">
              <h4>テンプレートリテラル</h4>
              <div class="syntax-pattern">`文字列 ${式や変数} 文字列`</div>
              <p>バッククォート（`）で囲んだ文字列です。${...}で変数や式を埋め込むことができ、+演算子で連結するより読みやすくなります。複数行の文字列も改行をそのまま含められます。</p>
            </div>
          </div>
        </div>
      </div>

      <div class="subsection">
        <h3>文字列メソッド</h3>
        <p>文字列には便利なメソッドが多数用意されています。</p>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>メソッド</th>
                <th>説明</th>
                <th>例</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>length</code></td>
                <td>文字数を取得</td>
                <td><code>"Hello".length</code> → 5</td>
              </tr>
              <tr>
                <td><code>toUpperCase()</code></td>
                <td>大文字に変換</td>
                <td><code>"hello".toUpperCase()</code> → "HELLO"</td>
              </tr>
              <tr>
                <td><code>toLowerCase()</code></td>
                <td>小文字に変換</td>
                <td><code>"HELLO".toLowerCase()</code> → "hello"</td>
              </tr>
              <tr>
                <td><code>slice(start, end)</code></td>
                <td>部分文字列を取得</td>
                <td><code>"Hello".slice(0, 2)</code> → "He"</td>
              </tr>
              <tr>
                <td><code>split(区切り)</code></td>
                <td>文字列を配列に分割</td>
                <td><code>"a,b,c".split(",")</code> → ["a","b","c"]</td>
              </tr>
              <tr>
                <td><code>trim()</code></td>
                <td>前後の空白を削除</td>
                <td><code>" Hello ".trim()</code> → "Hello"</td>
              </tr>
              <tr>
                <td><code>includes(検索)</code></td>
                <td>含まれているか判定</td>
                <td><code>"Hello".includes("ell")</code> → true</td>
              </tr>
              <tr>
                <td><code>replace(検索, 置換)</code></td>
                <td>最初の一致を置換</td>
                <td><code>"Hello".replace("l", "L")</code> → "HeLlo"</td>
              </tr>
              <tr>
                <td><code>replaceAll(検索, 置換)</code></td>
                <td>全ての一致を置換</td>
                <td><code>"Hello".replaceAll("l", "L")</code> → "HeLLo"</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
文字列メソッドの実践的な使用例

## 実装要件
- メールアドレスの正規化（空白削除、小文字化）
- 名前の分割（スペース区切り）
- 電話番号のハイフン削除
- メールアドレスの検証（@を含むか）

## 使用するメソッド
- .trim()（前後の空白削除）
- .toLowerCase()（小文字変換）
- .includes()（文字列検索）
- .split()（文字列分割）
- .replaceAll()（全置換）

## 実践例
- "  USER@EXAMPLE.COM  " → "user@example.com"
- "山田 太郎" → ["山田", "太郎"]
- "090-1234-5678" → "09012345678"</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">文字列メソッドの実践</span>
          </div>
          <div class="demo-body">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="keyword">const</span> <span class="variable">email</span> = <span class="string">"  User@Example.COM  "</span>;

<span class="comment">// 前後の空白を削除して小文字に</span>
<span class="keyword">const</span> <span class="variable">cleanEmail</span> = <span class="variable">email</span>.<span class="method">trim</span>().<span class="method">toLowerCase</span>();
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">cleanEmail</span>);  <span class="comment">// "user@example.com"</span>

<span class="comment">// メールアドレスの検証</span>
<span class="keyword">if</span> (<span class="variable">cleanEmail</span>.<span class="method">includes</span>(<span class="string">"@"</span>)) {
  <span class="variable">console</span>.<span class="method">log</span>(<span class="string">"有効なメールアドレス形式です"</span>);
}

<span class="comment">// 名前を分割</span>
<span class="keyword">const</span> <span class="variable">fullName</span> = <span class="string">"山田 太郎"</span>;
<span class="keyword">const</span> <span class="variable">nameParts</span> = <span class="variable">fullName</span>.<span class="method">split</span>(<span class="string">" "</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">nameParts</span>[<span class="number">0</span>]);  <span class="comment">// "山田"</span>
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">nameParts</span>[<span class="number">1</span>]);  <span class="comment">// "太郎"</span>

<span class="comment">// 文字列の置換</span>
<span class="keyword">const</span> <span class="variable">phone</span> = <span class="string">"090-1234-5678"</span>;
<span class="keyword">const</span> <span class="variable">cleanPhone</span> = <span class="variable">phone</span>.<span class="method">replaceAll</span>(<span class="string">"-"</span>, <span class="string">""</span>);
<span class="variable">console</span>.<span class="method">log</span>(<span class="variable">cleanPhone</span>);  <span class="comment">// "09012345678"</span></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2-5 実習 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">Section 2-5</span>
        <h2 class="section-title">実習：電卓アプリ</h2>
      </div>

      <div class="intro-text">
        <p>この章で学んだ知識を使って、シンプルな電卓アプリを作成しましょう。四則演算ができる電卓を実装します。</p>
      </div>

      <div class="subsection">
        <h3>完成イメージ</h3>
        <div class="demo-area" style="padding: 20px;">
          <div style="max-width: 300px; margin: 0 auto; background: #1e293b; padding: 20px; border-radius: 16px;">
            <input type="text" id="calc-display" value="0" readonly style="width: 100%; padding: 15px; font-size: 28px; text-align: right; border: none; border-radius: 8px; background: #0f172a; color: #f1f5f9; margin-bottom: 15px;">
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
              <button onclick="clearCalc()" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #ef4444; color: white; cursor: pointer;">C</button>
              <button onclick="appendToDisplay('(')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #475569; color: white; cursor: pointer;">(</button>
              <button onclick="appendToDisplay(')')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #475569; color: white; cursor: pointer;">)</button>
              <button onclick="appendToDisplay('/')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #f97316; color: white; cursor: pointer;">÷</button>

              <button onclick="appendToDisplay('7')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">7</button>
              <button onclick="appendToDisplay('8')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">8</button>
              <button onclick="appendToDisplay('9')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">9</button>
              <button onclick="appendToDisplay('*')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #f97316; color: white; cursor: pointer;">×</button>

              <button onclick="appendToDisplay('4')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">4</button>
              <button onclick="appendToDisplay('5')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">5</button>
              <button onclick="appendToDisplay('6')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">6</button>
              <button onclick="appendToDisplay('-')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #f97316; color: white; cursor: pointer;">−</button>

              <button onclick="appendToDisplay('1')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">1</button>
              <button onclick="appendToDisplay('2')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">2</button>
              <button onclick="appendToDisplay('3')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">3</button>
              <button onclick="appendToDisplay('+')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #f97316; color: white; cursor: pointer;">+</button>

              <button onclick="appendToDisplay('0')" style="grid-column: span 2; padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">0</button>
              <button onclick="appendToDisplay('.')" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #334155; color: white; cursor: pointer;">.</button>
              <button onclick="calculate()" style="padding: 15px; font-size: 18px; border: none; border-radius: 8px; background: #22c55e; color: white; cursor: pointer;">=</button>
            </div>
          </div>
        </div>

        <script>
          let calcValue = '0';

          function updateDisplay() {
            document.getElementById('calc-display').value = calcValue;
          }

          function appendToDisplay(val) {
            if (calcValue === '0' && val !== '.') {
              calcValue = val;
            } else {
              calcValue += val;
            }
            updateDisplay();
          }

          function clearCalc() {
            calcValue = '0';
            updateDisplay();
          }

          function calculate() {
            try {
              calcValue = String(eval(calcValue));
              updateDisplay();
            } catch(e) {
              calcValue = 'Error';
              updateDisplay();
            }
          }
        </script>
      </div>

      <div class="subsection">
        <h3>実装コード</h3>

        <div class="prompt-box">
          <div class="prompt-box-header">
            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
            <span class="prompt-box-title">プロンプト</span>
            <button class="prompt-copy-btn">コピー</button>
          </div>
          <div class="prompt-box-content">
            <pre>## 機能
HTML/CSS/JavaScriptで電卓アプリを作成

## 実装要件
- 四則演算（+, -, *, /）に対応
- 数字ボタン（0-9）
- 演算子ボタン（+, -, *, /）
- クリアボタン（C）
- イコールボタン（=）
- 小数点ボタン（.）

## UI仕様
- ダークテーマのスタイリング
- CSS Gridでボタン配置
- 入力値を表示するディスプレイ

## 使用するAPI/構文
- document.getElementById()
- onclick イベント
- let（状態管理）
- String()（型変換）
- eval()（計算実行 ※学習用）</pre>
            </div>
          </div>
        </div>

        <div class="demo-container">
          <div class="demo-header">
            <span class="demo-title">calculator.html</span>
          </div>
          <div class="demo-body vertical">
            <div class="demo-code-section">
              <div class="demo-code-header">
                <span class="demo-code-lang">HTML + JavaScript</span>
                <button class="demo-copy-btn">コピー</button>
              </div>
              <pre class="demo-code-content"><code><span class="tag">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attr">lang</span>=<span class="value">"ja"</span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">charset</span>=<span class="value">"UTF-8"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attr">name</span>=<span class="value">"viewport"</span> <span class="attr">content</span>=<span class="value">"width=device-width, initial-scale=1.0"</span><span class="tag">&gt;</span>
  <span class="tag">&lt;title&gt;</span>電卓アプリ<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;style&gt;</span>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0f172a;
      font-family: sans-serif;
    }
    .calculator {
      background: #1e293b;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }
    .display {
      width: 100%;
      padding: 15px;
      font-size: 32px;
      text-align: right;
      border: none;
      border-radius: 8px;
      background: #0f172a;
      color: #f1f5f9;
      margin-bottom: 15px;
    }
    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 70px);
      gap: 10px;
    }
    button {
      padding: 20px;
      font-size: 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.1s, opacity 0.1s;
    }
    button:active {
      transform: scale(0.95);
      opacity: 0.8;
    }
    .num { background: #334155; color: white; }
    .op { background: #f97316; color: white; }
    .clear { background: #ef4444; color: white; }
    .equal { background: #22c55e; color: white; }
    .zero { grid-column: span 2; }
  <span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"calculator"</span><span class="tag">&gt;</span>
    <span class="tag">&lt;input</span> <span class="attr">type</span>=<span class="value">"text"</span> <span class="attr">class</span>=<span class="value">"display"</span> <span class="attr">id</span>=<span class="value">"display"</span> <span class="attr">value</span>=<span class="value">"0"</span> <span class="attr">readonly</span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="value">"buttons"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"clear"</span> <span class="attr">onclick</span>=<span class="value">"clearDisplay()"</span><span class="tag">&gt;</span>C<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"op"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('(')"</span><span class="tag">&gt;</span>(<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"op"</span> <span class="attr">onclick</span>=<span class="value">"appendValue(')')"</span><span class="tag">&gt;</span>)<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"op"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('/')"</span><span class="tag">&gt;</span>÷<span class="tag">&lt;/button&gt;</span>

      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('7')"</span><span class="tag">&gt;</span>7<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('8')"</span><span class="tag">&gt;</span>8<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('9')"</span><span class="tag">&gt;</span>9<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"op"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('*')"</span><span class="tag">&gt;</span>×<span class="tag">&lt;/button&gt;</span>

      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('4')"</span><span class="tag">&gt;</span>4<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('5')"</span><span class="tag">&gt;</span>5<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('6')"</span><span class="tag">&gt;</span>6<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"op"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('-')"</span><span class="tag">&gt;</span>−<span class="tag">&lt;/button&gt;</span>

      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('1')"</span><span class="tag">&gt;</span>1<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('2')"</span><span class="tag">&gt;</span>2<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('3')"</span><span class="tag">&gt;</span>3<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"op"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('+')"</span><span class="tag">&gt;</span>+<span class="tag">&lt;/button&gt;</span>

      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num zero"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('0')"</span><span class="tag">&gt;</span>0<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"num"</span> <span class="attr">onclick</span>=<span class="value">"appendValue('.')"</span><span class="tag">&gt;</span>.<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;button</span> <span class="attr">class</span>=<span class="value">"equal"</span> <span class="attr">onclick</span>=<span class="value">"calculate()"</span><span class="tag">&gt;</span>=<span class="tag">&lt;/button&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>

  <span class="tag">&lt;script&gt;</span>
    <span class="comment">// 現在の表示値を保持する変数</span>
    <span class="keyword">let</span> <span class="variable">currentValue</span> = <span class="string">'0'</span>;

    <span class="comment">// 表示を更新する関数</span>
    <span class="keyword">function</span> <span class="method">updateDisplay</span>() {
      <span class="variable">document</span>.<span class="method">getElementById</span>(<span class="string">'display'</span>).<span class="variable">value</span> = <span class="variable">currentValue</span>;
    }

    <span class="comment">// 値を追加する関数</span>
    <span class="keyword">function</span> <span class="method">appendValue</span>(<span class="variable">value</span>) {
      <span class="comment">// 最初の0を置き換え（小数点以外）</span>
      <span class="keyword">if</span> (<span class="variable">currentValue</span> === <span class="string">'0'</span> && <span class="variable">value</span> !== <span class="string">'.'</span>) {
        <span class="variable">currentValue</span> = <span class="variable">value</span>;
      } <span class="keyword">else</span> {
        <span class="variable">currentValue</span> += <span class="variable">value</span>;
      }
      <span class="method">updateDisplay</span>();
    }

    <span class="comment">// 表示をクリアする関数</span>
    <span class="keyword">function</span> <span class="method">clearDisplay</span>() {
      <span class="variable">currentValue</span> = <span class="string">'0'</span>;
      <span class="method">updateDisplay</span>();
    }

    <span class="comment">// 計算を実行する関数</span>
    <span class="keyword">function</span> <span class="method">calculate</span>() {
      <span class="keyword">try</span> {
        <span class="comment">// eval()で計算式を評価</span>
        <span class="keyword">const</span> <span class="variable">result</span> = <span class="method">eval</span>(<span class="variable">currentValue</span>);
        <span class="variable">currentValue</span> = <span class="method">String</span>(<span class="variable">result</span>);
        <span class="method">updateDisplay</span>();
      } <span class="keyword">catch</span> (<span class="variable">error</span>) {
        <span class="variable">currentValue</span> = <span class="string">'Error'</span>;
        <span class="method">updateDisplay</span>();
      }
    }
  <span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title"><span class="material-icons">lightbulb</span> 学習ポイント</div>
          <div class="info-box-content">
            <ul>
              <li><strong>変数</strong>：<code>let currentValue</code> で計算中の値を保持</li>
              <li><strong>文字列操作</strong>：<code>+=</code> で数字を連結、<code>String()</code> で型変換</li>
              <li><strong>関数</strong>：処理を関数にまとめて再利用</li>
              <li><strong>DOM操作</strong>：<code>getElementById</code> で要素を取得し、<code>value</code> を更新</li>
            </ul>
          </div>
        </div>

        <div class="info-box warning">
          <div class="info-box-title"><span class="material-icons">warning</span> eval() について</div>
          <div class="info-box-content">
            <p><code>eval()</code> は文字列をJavaScriptコードとして実行する危険な関数です。この例では学習用に使用していますが、実際のアプリケーションでは使用を避け、数式パーサーを使うなどの対策が必要です。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 練習問題 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">練習問題</span>
        <h2 class="section-title">Chapter 2 練習問題</h2>
      </div>

      <div class="exercise-list">
        <div class="exercise-item">
          <div class="exercise-number">Q1</div>
          <div class="exercise-content">
            <p><code>const</code>と<code>let</code>の違いを説明し、それぞれどのような場面で使うべきか述べてください。</p>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q2</div>
          <div class="exercise-content">
            <p>以下のコードの出力結果を予想してください。</p>
            <div class="code-block">
              <div class="code-content">
<pre>console.log("5" + 3);
console.log("5" - 3);
console.log("5" === 5);
console.log("5" == 5);</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q3</div>
          <div class="exercise-content">
            <p>以下の変数を使って、「田中太郎さん（25歳）」という文字列をテンプレートリテラルで作成してください。</p>
            <div class="code-block">
              <div class="code-content">
<pre>const lastName = "田中";
const firstName = "太郎";
const age = 25;</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="exercise-item">
          <div class="exercise-number">Q4</div>
          <div class="exercise-content">
            <p>メールアドレス "USER@EXAMPLE.COM " を、適切な形式（小文字、前後の空白なし）に変換するコードを書いてください。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 解答 -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">解答</span>
        <h2 class="section-title">練習問題の解答</h2>
      </div>

      <div class="answer-list">
        <div class="answer-item">
          <div class="answer-header">Q1の解答</div>
          <div class="answer-content">
            <p><strong>const</strong>：再代入ができない（定数）。変更されない値に使用。例：API_URL, TAX_RATE</p>
            <p><strong>let</strong>：再代入が可能。ループカウンタや状態管理など、値が変わる場合に使用。例：count, currentPage</p>
            <p><strong>基本方針</strong>：まず<code>const</code>で宣言し、再代入が必要な場合のみ<code>let</code>に変更する。</p>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q2の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>"5" + 3    // "53"（文字列連結）
"5" - 3    // 2（数値として計算）
"5" === 5  // false（型が違う）
"5" == 5   // true（型変換して比較）</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q3の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>const lastName = "田中";
const firstName = "太郎";
const age = 25;

const message = `${lastName}${firstName}さん（${age}歳）`;
console.log(message); // "田中太郎さん（25歳）"</pre>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="answer-item">
          <div class="answer-header">Q4の解答</div>
          <div class="answer-content">
            <div class="code-block">
              <div class="code-content">
<pre>const email = "USER@EXAMPLE.COM ";
const cleanEmail = email.trim().toLowerCase();
console.log(cleanEmail); // "user@example.com"</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- コラム -->
    <div class="column">
      <div class="column-header">
        <span class="column-badge">コラム</span>
        <span class="column-title">なぜ === を使うべきなのか</span>
      </div>
      <p>JavaScript の <code>==</code>（等価演算子）は、比較の前に型変換を行います。これは「型強制（Type Coercion）」と呼ばれ、予期しない結果を生むことがあります。</p>
      <p>例えば、<code>0 == false</code> は <code>true</code> になりますが、<code>0 === false</code> は <code>false</code> です。前者は 0 が false に変換されてから比較されるためです。</p>
      <p>プロの開発現場では、バグを防ぐために<code>===</code>（厳密等価演算子）を使うことがほぼ必須とされています。ESLintなどのツールでも、<code>==</code>の使用は警告されることが多いです。</p>
    </div>
  </div>

  <!-- ページナビゲーション -->
  <div class="page-nav">
    <a href="1js-introduction.html" class="page-nav-btn prev">
      <div class="page-nav-label">前へ</div>
      <div class="page-nav-title">JavaScriptの世界へようこそ</div>
    </a>
    <a href="3js-control-flow.html" class="page-nav-btn next">
      <div class="page-nav-label">次へ</div>
      <div class="page-nav-title">条件分岐と繰り返し</div>
    </a>
  </div>

  <footer class="footer">
    <p>JavaScript入門 - 職業訓練校教材</p>
  </footer>

  <script src="../../shared/demo.js"></script>
</body>
</html>
