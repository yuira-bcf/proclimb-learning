<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>円グラフ - Admin Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="common.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="wrapper">
    <div id="sidebar-container"></div>

    <main class="main">
      <header class="header">
        <div class="header-left">
          <button class="menu-toggle" id="menuToggle">
            <span class="material-icons">menu</span>
          </button>
          <nav class="breadcrumb">
            <a href="sample-3-dashboard.html">ホーム</a>
            <span class="material-icons" style="font-size: 16px;">chevron_right</span>
            <a href="charts.html">チャート</a>
            <span class="material-icons" style="font-size: 16px;">chevron_right</span>
            <span>円グラフ</span>
          </nav>
        </div>
        <div class="header-right">
          <button class="header-btn">
            <span class="material-icons">notifications_none</span>
          </button>
          <div class="header-user">
            <div class="header-user-avatar">
              <span class="material-icons" style="font-size: 16px;">person</span>
            </div>
            <span class="header-user-name">山田 太郎</span>
          </div>
        </div>
      </header>

      <div class="content">
        <div class="page-header">
          <h1 class="page-title">
              <span class="page-num-badge">2-4</span>円グラフ
              <button class="prompt-btn" data-prompt-id="2-4" data-prompt="Chart.jsを使用した円グラフページを作成してください。

【要件】
- 基本円グラフ
- ドーナツチャート
- 半円グラフ
- ネストドーナツ
- グラデーション円グラフ

【技術】
- Chart.js使用
- cutout設定でドーナツの太さ調整
- rotation/circumference設定で半円表示
- ホバー時のセグメント強調" onclick="openPromptModal('2-4')">
                <span class="material-icons">auto_awesome</span>
                プロンプト
              </button>
              <button class="source-btn" data-source-id="2-4" onclick="openSourceModal('2-4')">
                <span class="material-icons">code</span>
                ソース
              </button>
            </h1>
          <p class="page-subtitle">Chart.jsを使用した円グラフ・ドーナツチャートのサンプル</p>
        </div>

        <div class="grid-2">
          <!-- Basic Pie Chart -->
          <div class="card" id="sec-2-4-1">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-1</span>
                <span class="material-icons">pie_chart</span>
                基本円グラフ
                <button class="prompt-btn" data-prompt-id="2-4-1" data-prompt="Chart.jsを使用した基本円グラフを作成してください。

【チャート仕様】
- type: 'pie'
- labels: ['電子機器', 'アパレル', '食品', '家具', '化粧品', 'その他']

【データセット】
- data: [350, 250, 200, 150, 100, 50]
- backgroundColor（6色）:
  - rgba(23, 162, 184, 1)
  - rgba(40, 167, 69, 1)
  - rgba(255, 193, 7, 1)
  - rgba(220, 53, 69, 1)
  - rgba(111, 66, 193, 1)
  - rgba(253, 126, 20, 1)
- borderWidth: 0

【オプション】
- responsive: true
- legend: position 'right'" onclick="openPromptModal('2-4-1')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-1" onclick="openSourceModal('2-4-1')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <canvas id="basicPieChart"></canvas>
            </div>
          </div>

          <!-- Doughnut Chart -->
          <div class="card" id="sec-2-4-2">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-2</span>
                <span class="material-icons">donut_large</span>
                ドーナツチャート
                <button class="prompt-btn" data-prompt-id="2-4-2" data-prompt="Chart.jsを使用したドーナツチャートを作成してください。

【チャート仕様】
- type: 'doughnut'
- cutout: '60%'（中央の穴）

【データセット】
- labels: ['電子機器', 'アパレル', '食品', '家具', '化粧品', 'その他']
- data: [350, 250, 200, 150, 100, 50]
- backgroundColor: 6色カラーパレット
- borderWidth: 0

【オプション】
- responsive: true
- legend: position 'right'" onclick="openPromptModal('2-4-2')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-2" onclick="openSourceModal('2-4-2')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <canvas id="doughnutChart"></canvas>
            </div>
          </div>
        </div>

        <div class="grid-2">
          <!-- Doughnut with Center Text -->
          <div class="card" id="sec-2-4-3">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-3</span>
                <span class="material-icons">donut_small</span>
                中央テキスト付きドーナツ
                <button class="prompt-btn" data-prompt-id="2-4-3" data-prompt="Chart.jsを使用した中央テキスト付きドーナツチャートを作成してください。

【チャート仕様】
- type: 'doughnut'
- cutout: '70%'
- legend: display: false

【中央テキスト（CSS配置）】
- position: absolute
- top: 50%, left: 50%
- transform: translate(-50%, -50%)
- 値: font-size 24px, font-weight 700, color #333
- ラベル: font-size 14px, color #6c757d

【表示例】
- 値: ¥1,050
- ラベル: 総売上（万円）" onclick="openPromptModal('2-4-3')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-3" onclick="openSourceModal('2-4-3')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body" style="position: relative;">
              <canvas id="doughnutCenterText"></canvas>
              <div id="centerText" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #333;">¥1,050</div>
                <div style="font-size: 14px; color: #6c757d;">総売上（万円）</div>
              </div>
            </div>
          </div>

          <!-- Semi-Circle Gauge -->
          <div class="card" id="sec-2-4-4">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-4</span>
                <span class="material-icons">speed</span>
                半円ゲージ
                <button class="prompt-btn" data-prompt-id="2-4-4" data-prompt="Chart.jsを使用した半円ゲージを作成してください。

【チャート仕様】
- type: 'doughnut'
- rotation: -90（開始角度を上部に）
- circumference: 180（半円表示）
- cutout: '75%'

【データセット】
- labels: ['使用済み', '空き容量']
- data: [72, 28]
- backgroundColor: [メインカラー, グレー]
- borderWidth: 0

【オプション】
- responsive: true
- legend: position 'bottom'
- tooltip: パーセント表示" onclick="openPromptModal('2-4-4')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-4" onclick="openSourceModal('2-4-4')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <canvas id="semiCircleChart"></canvas>
            </div>
          </div>
        </div>

        <div class="grid-2">
          <!-- Multi-Series Doughnut -->
          <div class="card" id="sec-2-4-5">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-5</span>
                <span class="material-icons">layers</span>
                多重ドーナツ
                <button class="prompt-btn" data-prompt-id="2-4-5" data-prompt="Chart.jsを使用した多重ドーナツチャートを作成してください。

【チャート仕様】
- type: 'doughnut'
- cutout: '40%'（内側の穴を小さく）
- 複数のdatasetsで多重リング表現

【データセット（2つのリング）】
- 外側リング（2024年）:
  - data: [40, 30, 20, 10]
  - backgroundColor: 濃い色4色
- 内側リング（2023年）:
  - data: [35, 25, 25, 15]
  - backgroundColor: 薄い色4色
- borderWidth: 0

【オプション】
- responsive: true
- legend: position 'right'" onclick="openPromptModal('2-4-5')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-5" onclick="openSourceModal('2-4-5')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <canvas id="multiSeriesDoughnut"></canvas>
            </div>
          </div>

          <!-- Gradient Pie -->
          <div class="card" id="sec-2-4-6">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-6</span>
                <span class="material-icons">gradient</span>
                グラデーション円グラフ
                <button class="prompt-btn" data-prompt-id="2-4-6" data-prompt="Chart.jsを使用したグラデーション円グラフを作成してください。

【チャート仕様】
- type: 'pie'
- ホバー時に色が濃くなるエフェクト

【データセット】
- labels: ['プロダクトA', 'プロダクトB', 'プロダクトC', 'プロダクトD']
- data: [40, 30, 20, 10]
- backgroundColor: rgba形式で透明度0.9
  - rgba(23, 162, 184, 0.9)
  - rgba(40, 167, 69, 0.9)
  - rgba(255, 193, 7, 0.9)
  - rgba(220, 53, 69, 0.9)
- hoverBackgroundColor: 透明度1.0
- borderWidth: 0

【オプション】
- responsive: true
- legend: position 'right'" onclick="openPromptModal('2-4-6')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-6" onclick="openSourceModal('2-4-6')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <canvas id="gradientPieChart"></canvas>
            </div>
          </div>
        </div>

        <div class="grid-2">
          <!-- Pattern Fill -->
          <div class="card" id="sec-2-4-7">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-7</span>
                <span class="material-icons">texture</span>
                ボーダー付き円グラフ
                <button class="prompt-btn" data-prompt-id="2-4-7" data-prompt="Chart.jsを使用したボーダー付き円グラフを作成してください。

【チャート仕様】
- type: 'pie'
- セグメント間に白いボーダー
- ホバー時にセグメントが浮き出るエフェクト

【データセット】
- labels: 6カテゴリ
- data: [350, 250, 200, 150, 100, 50]
- backgroundColor: 6色カラーパレット
- borderColor: '#fff'
- borderWidth: 3
- hoverBorderWidth: 5
- hoverOffset: 10（ホバー時の浮き出し量）

【オプション】
- responsive: true
- legend: position 'right'" onclick="openPromptModal('2-4-7')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-7" onclick="openSourceModal('2-4-7')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <canvas id="borderPieChart"></canvas>
            </div>
          </div>

          <!-- Animated Ring -->
          <div class="card" id="sec-2-4-8">
            <div class="card-header">
              <h3 class="card-title">
                <span class="section-num-badge">2-4-8</span>
                <span class="material-icons">track_changes</span>
                進捗リング
                <button class="prompt-btn" data-prompt-id="2-4-8" data-prompt="Chart.jsを使用した進捗リングを作成してください。

【チャート仕様】
- type: 'doughnut'
- cutout: '75%'（細いリング）
- 3つの進捗リングを横並び表示

【各リングのデータ】
- リング1: 75%（完了）- 緑色
- リング2: 45%（進行中）- 黄色
- リング3: 90%（目標）- 青色
- 残りはグレー背景

【中央テキスト（CSS配置）】
- position: absolute
- パーセント値: font-size 18px, font-weight 700
- ラベル: font-size 12px, color #6c757d

【オプション】
- legend: display: false
- tooltip: enabled: false" onclick="openPromptModal('2-4-8')">
                  <span class="material-icons">auto_awesome</span>
                  プロンプト
                </button>
                <button class="source-btn" data-source-id="2-4-8" onclick="openSourceModal('2-4-8')">
                  <span class="material-icons">code</span>
                  ソース
                </button>
              </h3>
            </div>
            <div class="card-body">
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                <div style="position: relative;">
                  <canvas id="progressRing1"></canvas>
                  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                    <div style="font-size: 18px; font-weight: 700;">75%</div>
                    <div style="font-size: 12px; color: #6c757d;">完了</div>
                  </div>
                </div>
                <div style="position: relative;">
                  <canvas id="progressRing2"></canvas>
                  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                    <div style="font-size: 18px; font-weight: 700;">45%</div>
                    <div style="font-size: 12px; color: #6c757d;">進行中</div>
                  </div>
                </div>
                <div style="position: relative;">
                  <canvas id="progressRing3"></canvas>
                  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                    <div style="font-size: 18px; font-weight: 700;">90%</div>
                    <div style="font-size: 12px; color: #6c757d;">目標</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <script src="common.js"></script>
  <script>
    // Chart.js default settings
    Chart.defaults.font.family = "'Noto Sans JP', sans-serif";
    Chart.defaults.color = '#6c757d';

    // Color palette
    const colors = {
      primary: 'rgba(23, 162, 184, 1)',
      primaryLight: 'rgba(23, 162, 184, 0.7)',
      success: 'rgba(40, 167, 69, 1)',
      successLight: 'rgba(40, 167, 69, 0.7)',
      warning: 'rgba(255, 193, 7, 1)',
      warningLight: 'rgba(255, 193, 7, 0.7)',
      danger: 'rgba(220, 53, 69, 1)',
      dangerLight: 'rgba(220, 53, 69, 0.7)',
      purple: 'rgba(111, 66, 193, 1)',
      purpleLight: 'rgba(111, 66, 193, 0.7)',
      orange: 'rgba(253, 126, 20, 1)',
      gray: 'rgba(108, 117, 125, 0.3)'
    };

    const labels = ['電子機器', 'アパレル', '食品', '家具', '化粧品', 'その他'];
    const data = [350, 250, 200, 150, 100, 50];
    const bgColors = [colors.primary, colors.success, colors.warning, colors.danger, colors.purple, colors.orange];

    // ========== Basic Pie Chart ==========
    new Chart(document.getElementById('basicPieChart'), {
      type: 'pie',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: bgColors,
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'right' }
        }
      }
    });

    // ========== Doughnut Chart ==========
    new Chart(document.getElementById('doughnutChart'), {
      type: 'doughnut',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: bgColors,
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        cutout: '60%',
        plugins: {
          legend: { position: 'right' }
        }
      }
    });

    // ========== Doughnut with Center Text ==========
    new Chart(document.getElementById('doughnutCenterText'), {
      type: 'doughnut',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: bgColors,
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        cutout: '70%',
        plugins: {
          legend: { display: false }
        }
      }
    });

    // ========== Semi-Circle Gauge ==========
    new Chart(document.getElementById('semiCircleChart'), {
      type: 'doughnut',
      data: {
        labels: ['使用済み', '空き容量'],
        datasets: [{
          data: [72, 28],
          backgroundColor: [colors.primary, colors.gray],
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        rotation: -90,
        circumference: 180,
        cutout: '75%',
        plugins: {
          legend: { position: 'bottom' },
          tooltip: {
            callbacks: {
              label: function(context) {
                return context.label + ': ' + context.raw + '%';
              }
            }
          }
        }
      }
    });

    // ========== Multi-Series Doughnut ==========
    new Chart(document.getElementById('multiSeriesDoughnut'), {
      type: 'doughnut',
      data: {
        labels: ['A', 'B', 'C', 'D'],
        datasets: [
          {
            label: '2024年',
            data: [40, 30, 20, 10],
            backgroundColor: [colors.primary, colors.success, colors.warning, colors.danger],
            borderWidth: 0
          },
          {
            label: '2023年',
            data: [35, 25, 25, 15],
            backgroundColor: [colors.primaryLight, colors.successLight, colors.warningLight, colors.dangerLight],
            borderWidth: 0
          }
        ]
      },
      options: {
        responsive: true,
        cutout: '40%',
        plugins: {
          legend: { position: 'right' }
        }
      }
    });

    // ========== Gradient Pie Chart ==========
    const gradientCtx = document.getElementById('gradientPieChart').getContext('2d');

    function createGradient(ctx, color1, color2) {
      const gradient = ctx.createRadialGradient(150, 150, 0, 150, 150, 150);
      gradient.addColorStop(0, color1);
      gradient.addColorStop(1, color2);
      return gradient;
    }

    new Chart(gradientCtx, {
      type: 'pie',
      data: {
        labels: ['プロダクトA', 'プロダクトB', 'プロダクトC', 'プロダクトD'],
        datasets: [{
          data: [40, 30, 20, 10],
          backgroundColor: [
            'rgba(23, 162, 184, 0.9)',
            'rgba(40, 167, 69, 0.9)',
            'rgba(255, 193, 7, 0.9)',
            'rgba(220, 53, 69, 0.9)'
          ],
          hoverBackgroundColor: [
            'rgba(23, 162, 184, 1)',
            'rgba(40, 167, 69, 1)',
            'rgba(255, 193, 7, 1)',
            'rgba(220, 53, 69, 1)'
          ],
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'right' }
        }
      }
    });

    // ========== Border Pie Chart ==========
    new Chart(document.getElementById('borderPieChart'), {
      type: 'pie',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: bgColors,
          borderColor: '#fff',
          borderWidth: 3,
          hoverBorderWidth: 5,
          hoverOffset: 10
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'right' }
        }
      }
    });

    // ========== Progress Rings ==========
    function createProgressRing(canvasId, value, color) {
      new Chart(document.getElementById(canvasId), {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [value, 100 - value],
            backgroundColor: [color, colors.gray],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          cutout: '75%',
          plugins: {
            legend: { display: false },
            tooltip: { enabled: false }
          }
        }
      });
    }

    createProgressRing('progressRing1', 75, colors.success);
    createProgressRing('progressRing2', 45, colors.warning);
    createProgressRing('progressRing3', 90, colors.primary);
  </script>
</body>
</html>
