<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Step 4: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š</title>

        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&family=M+PLUS+Rounded+1c:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../shared/common.css" />
        <style>
  :root {
    --primary: #AF52DE;
    --primary-dark: #9333EA;
    --primary-light: #FAF5FF;
    --primary-lighter: #E9D5FF;
  }
  .nav-category-links { display: none; }
</style>
        <style>
            .download-btn {
                background: #22c55e;
                color: white;
                border: none;
                padding: 6px 14px;
                border-radius: 6px;
                font-size: 12px;
                font-weight: 600;
                cursor: pointer;
                margin-left: auto;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                gap: 4px;
            }
            .download-btn:hover {
                background: #16a34a;
                transform: translateY(-1px);
            }
            .code-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            .step-indicator {
                display: flex;
                justify-content: center;
                gap: 0.5rem;
                margin: 2rem 0;
                flex-wrap: wrap;
            }
            .step-dot {
                width: 36px;
                height: 36px;
                border-radius: 50%;
                background: #e2e8f0;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
                font-weight: bold;
                color: #64748b;
            }
            .step-dot.active {
                background: #3b82f6;
                color: white;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            }
            .step-dot.completed {
                background: #22c55e;
                color: white;
            }
            .file-badge {
                display: inline-block;
                background: #3b82f6;
                color: white;
                padding: 2px 8px;
                border-radius: 4px;
                font-size: 12px;
                margin-right: 8px;
            }
            .file-badge.new { background: #22c55e; }
            .file-badge.modified { background: #f59e0b; }
        </style>
    </head>
    <body>
        <nav class="global-nav"></nav>
        <script src="../shared/js/nav-promptpg-step.js"></script>

        <div class="container">
            <div class="step-indicator">
                <div class="step-dot completed">1</div>
                <div class="step-dot completed">2</div>
                <div class="step-dot completed">3</div>
                <div class="step-dot active">4</div>
                <div class="step-dot">5</div>
                <div class="step-dot">6</div>
                <div class="step-dot">7</div>
                <div class="step-dot">8</div>
            </div>

            <header class="chapter-header">
                <div class="chapter-badge">ğŸš€ Step</div>
                <div class="chapter-number">4</div>
                <h1 class="chapter-title">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š</h1>
            </header>

            <nav class="toc">
                <h2 class="toc-title"><span class="material-icons">list_alt</span> ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å†…å®¹</h2>
                <ul class="toc-list">
                    <li class="toc-item"><span class="toc-number">4-1</span><span>æ¦‚è¦</span></li>
                    <li class="toc-item"><span class="toc-number">4-2</span><span>ä»•æ§˜</span></li>
                    <li class="toc-item"><span class="toc-number">4-3</span><span>ã‚¢ãƒ—ãƒªä»•æ§˜</span></li>
                    <li class="toc-item"><span class="toc-number">4-4</span><span>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç”Ÿæˆ</span></li>
                    <li class="toc-item"><span class="toc-number">4-5</span><span>è¿½åŠ ãƒ»å¤‰æ›´ç®‡æ‰€ã®è§£èª¬</span></li>
                </ul>
            </nav>

            <!-- æ¦‚è¦ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 4-1</span>
                    <h2 class="section-title">æ¦‚è¦</h2>
                </div>

                <div class="intro-text">
                    <p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€<strong>H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¨­å®š</strong>ã¨<strong>Entityãƒ»Repositoryã®ä½œæˆ</strong>ã‚’è¡Œã„ã¾ã™ã€‚</p>
                    <p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æº–å‚™ã‚’æ•´ãˆã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ‡ãƒ¼ã‚¿ç™»éŒ²ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
                </div>

                <h3>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å­¦ã¶ã“ã¨</h3>
                <div class="module-list">
                    <div class="module-item">
                        <div class="module-icon">ğŸ’¾</div>
                        <div class="module-content">
                            <h4>H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</h4>
                            <p>ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¨­å®šæ–¹æ³•</p>
                        </div>
                    </div>
                    <div class="module-item">
                        <div class="module-icon">ğŸ“¦</div>
                        <div class="module-content">
                            <h4>Entityï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰</h4>
                            <p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹</p>
                        </div>
                    </div>
                    <div class="module-item">
                        <div class="module-icon">ğŸ”</div>
                        <div class="module-content">
                            <h4>Repositoryï¼ˆãƒªãƒã‚¸ãƒˆãƒªï¼‰</h4>
                            <p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã‚’è¡Œã†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</p>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-box-header">
                        <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                        <span class="info-box-title">ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚´ãƒ¼ãƒ«</span>
                    </div>
                    <p>H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆ<code>http://localhost:8080/h2-console</code>ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€<br>
                    todoãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚Œã°OKã§ã™ï¼</p>
                </div>
            </section>

            <!-- ä»•æ§˜ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 4-2</span>
                    <h2 class="section-title">ä»•æ§˜</h2>
                </div>

                <h3>ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ã‚«ãƒ©ãƒ å</th>
                            <th>å‹</th>
                            <th>åˆ¶ç´„</th>
                            <th>èª¬æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>id</td><td>Long</td><td>PRIMARY KEY, AUTO INCREMENT</td><td>ID</td></tr>
                        <tr><td>author</td><td>String</td><td>NOT NULL</td><td>ç™»éŒ²è€…</td></tr>
                        <tr><td>title</td><td>String</td><td>NOT NULL</td><td>ã‚¿ã‚¤ãƒˆãƒ«</td></tr>
                        <tr><td>detail</td><td>String</td><td></td><td>è©³ç´°</td></tr>
                        <tr><td>created_at</td><td>LocalDateTime</td><td></td><td>ä½œæˆæ—¥æ™‚</td></tr>
                        <tr><td>updated_at</td><td>LocalDateTime</td><td></td><td>æ›´æ–°æ—¥æ™‚</td></tr>
                    </tbody>
                </table>

                <h3>å¿…è¦ãªä¾å­˜é–¢ä¿‚</h3>
                <table class="data-table">
                    <thead><tr><th>ä¾å­˜é–¢ä¿‚</th><th>ç”¨é€”</th></tr></thead>
                    <tbody>
                        <tr><td>Spring Data JPA</td><td>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ</td></tr>
                        <tr><td>H2 Database</td><td>ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- ã‚¢ãƒ—ãƒªä»•æ§˜ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 4-3</span>
                    <h2 class="section-title">ã‚¢ãƒ—ãƒªä»•æ§˜</h2>
                </div>

                <h3>ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ</h3>
                <div class="code-block">
                    <div class="code-header"><span class="code-title">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ</span></div>
                    <div class="code-content">
                        <pre>src/main/java/com/example/todo/
â”œâ”€â”€ TodoApplication.java
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ TodoController.java
â”œâ”€â”€ form/
â”‚   â””â”€â”€ TodoForm.java
â”œâ”€â”€ entity/
â”‚   â””â”€â”€ Todo.java                â† æ–°è¦è¿½åŠ 
â””â”€â”€ repository/
    â””â”€â”€ TodoRepository.java      â† æ–°è¦è¿½åŠ 

src/main/resources/
â”œâ”€â”€ application.properties       â† å¤‰æ›´ï¼ˆDBè¨­å®šè¿½åŠ ï¼‰
â””â”€â”€ templates/...</pre>
                    </div>
                </div>
            </section>

            <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 4-4</span>
                    <h2 class="section-title">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç”Ÿæˆ</h2>
                </div>

                <div class="code-block" id="prompt-1">
                    <div class="code-header">
                        <span class="code-title">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹</span>
                        <button class="download-btn" onclick="downloadPrompt('prompt-1', 'step4_database.txt')">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                    </div>
                    <div class="code-content">
                        <pre>ã‚ãªãŸã¯Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã§ã™ã€‚

Step 3ã§ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã€H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¨­å®šã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

ã€è¦ä»¶ã€‘
1. H2ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹
2. H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹ï¼ˆURL: /h2-consoleï¼‰
3. Todoã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆã™ã‚‹
4. TodoRepositoryã‚’ä½œæˆã™ã‚‹

ã€pom.xmlã«è¿½åŠ ã™ã‚‹ä¾å­˜é–¢ä¿‚ã€‘
- spring-boot-starter-data-jpa
- h2database

ã€Entityã‚¯ãƒ©ã‚¹ï¼ˆTodo.javaï¼‰ã€‘
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: com.example.todo.entity
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- id (Long) - ä¸»ã‚­ãƒ¼ã€è‡ªå‹•æ¡ç•ª
- author (String) - ç™»éŒ²è€…
- title (String) - ã‚¿ã‚¤ãƒˆãƒ«
- detail (String) - è©³ç´°
- createdAt (LocalDateTime) - ä½œæˆæ—¥æ™‚
- updatedAt (LocalDateTime) - æ›´æ–°æ—¥æ™‚

ã€Repositoryã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆTodoRepository.javaï¼‰ã€‘
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: com.example.todo.repository
- JpaRepositoryã‚’ç¶™æ‰¿

ã€application.propertiesã€‘
- H2ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ¥ç¶šè¨­å®š
- H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®æœ‰åŠ¹åŒ–
- JPA/Hibernateã®è¨­å®š

å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚</pre>
                    </div>
                </div>
            </section>

            <!-- è§£èª¬ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 4-5</span>
                    <h2 class="section-title">è¿½åŠ ãƒ»å¤‰æ›´ç®‡æ‰€ã®è§£èª¬</h2>
                </div>

                <h3>ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ä¸€è¦§</h3>
                <table class="data-table">
                    <thead><tr><th>ãƒ•ã‚¡ã‚¤ãƒ«</th><th>çŠ¶æ…‹</th><th>å¤‰æ›´å†…å®¹</th></tr></thead>
                    <tbody>
                        <tr><td><code>pom.xml</code></td><td><span class="file-badge modified">å¤‰æ›´</span></td><td>JPA, H2ä¾å­˜é–¢ä¿‚è¿½åŠ </td></tr>
                        <tr><td><code>application.properties</code></td><td><span class="file-badge modified">å¤‰æ›´</span></td><td>DBè¨­å®šè¿½åŠ </td></tr>
                        <tr><td><code>Todo.java</code></td><td><span class="file-badge new">æ–°è¦</span></td><td>Entityã‚¯ãƒ©ã‚¹</td></tr>
                        <tr><td><code>TodoRepository.java</code></td><td><span class="file-badge new">æ–°è¦</span></td><td>Repositoryã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</td></tr>
                    </tbody>
                </table>

                <h3>application.propertiesã®ä¾‹</h3>
                <div class="code-block">
                    <div class="code-header"><span class="code-title">application.properties</span></div>
                    <div class="code-content">
                        <pre># H2 Database
spring.datasource.url=jdbc:h2:mem:todo
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true</pre>
                    </div>
                </div>

                <div class="column">
                    <div class="column-header">
                        <span class="column-badge">Column</span>
                        <span class="column-title">H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ä½¿ã„æ–¹</span>
                    </div>
                    <ol class="step-list">
                        <li>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•</li>
                        <li><code>http://localhost:8080/h2-console</code> ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
                        <li>JDBC URL ã« <code>jdbc:h2:mem:todo</code> ã‚’å…¥åŠ›</li>
                        <li>Connect ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                        <li>å·¦å´ã®TODOãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç¢ºèª</li>
                    </ol>
                </div>

                <div class="info-box" style="background: #f0fdf4; border-color: #22c55e;">
                    <div class="info-box-header">
                        <span class="info-box-icon">âœ…</span>
                        <span class="info-box-title">å®Œäº†ãƒã‚§ãƒƒã‚¯</span>
                    </div>
                    <ul style="margin: 0.5rem 0 0 0; padding-left: 1.5rem;">
                        <li>H2ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹</li>
                        <li>TODOãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹</li>
                        <li>ã‚¨ãƒ©ãƒ¼ãªãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã™ã‚‹</li>
                    </ul>
                </div>
            </section>
        </div>

        <footer class="footer"><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</p></footer>

        <div class="page-nav">
            <a href="promptpg-3.html" class="page-nav-btn prev">
                <span>â†</span>
                <div><div class="page-nav-label">å‰ã®ã‚¹ãƒ†ãƒƒãƒ—</div><div class="page-nav-title">Step 3: ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æŒã¡å›ã‚Š</div></div>
            </a>
            <a href="promptpg-5.html" class="page-nav-btn next">
                <div><div class="page-nav-label">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</div><div class="page-nav-title">Step 5: ãƒ‡ãƒ¼ã‚¿ç™»éŒ²</div></div>
                <span>â†’</span>
            </a>
        </div>

        <script>
            function toggleMenu() {
                const toggle = document.querySelector(".nav-toggle");
                const menu = document.querySelector(".nav-menu");
                toggle.classList.toggle("active");
                menu.classList.toggle("active");
            }
            function downloadPrompt(elementId, filename) {
                const element = document.getElementById(elementId);
                const preElement = element.querySelector('pre');
                const text = preElement.textContent;
                const blob = new Blob([text], { type: 'text/plain; charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        </script>
    </body>
</html>
