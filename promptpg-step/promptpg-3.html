<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Step 3: ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æŒã¡å›ã‚Š</title>

        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&family=M+PLUS+Rounded+1c:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../shared/common.css" />
        <style>
  :root {
    --primary: #AF52DE;
    --primary-dark: #9333EA;
    --primary-light: #FAF5FF;
    --primary-lighter: #E9D5FF;
  }
  .nav-category-links { display: none; }
</style>
        <style>
            .download-btn {
                background: #22c55e;
                color: white;
                border: none;
                padding: 6px 14px;
                border-radius: 6px;
                font-size: 12px;
                font-weight: 600;
                cursor: pointer;
                margin-left: auto;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                gap: 4px;
            }
            .download-btn:hover {
                background: #16a34a;
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
            }
            .code-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            .step-indicator {
                display: flex;
                justify-content: center;
                gap: 0.5rem;
                margin: 2rem 0;
                flex-wrap: wrap;
            }
            .step-dot {
                width: 36px;
                height: 36px;
                border-radius: 50%;
                background: #e2e8f0;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
                font-weight: bold;
                color: #64748b;
            }
            .step-dot.active {
                background: #3b82f6;
                color: white;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            }
            .step-dot.completed {
                background: #22c55e;
                color: white;
            }
            .file-badge {
                display: inline-block;
                background: #3b82f6;
                color: white;
                padding: 2px 8px;
                border-radius: 4px;
                font-size: 12px;
                margin-right: 8px;
            }
            .file-badge.new { background: #22c55e; }
            .file-badge.modified { background: #f59e0b; }
        </style>
    </head>
    <body>
        <nav class="global-nav"></nav>
        <script src="../shared/js/nav-promptpg-step.js"></script>

        <div class="container">
            <div class="step-indicator">
                <div class="step-dot completed">1</div>
                <div class="step-dot completed">2</div>
                <div class="step-dot active">3</div>
                <div class="step-dot">4</div>
                <div class="step-dot">5</div>
                <div class="step-dot">6</div>
                <div class="step-dot">7</div>
                <div class="step-dot">8</div>
            </div>

            <header class="chapter-header">
                <div class="chapter-badge">ğŸš€ Step</div>
                <div class="chapter-number">3</div>
                <h1 class="chapter-title">ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æŒã¡å›ã‚Š</h1>
            </header>

            <nav class="toc">
                <h2 class="toc-title"><span class="material-icons">list_alt</span> ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å†…å®¹</h2>
                <ul class="toc-list">
                    <li class="toc-item"><span class="toc-number">3-1</span><span>æ¦‚è¦</span></li>
                    <li class="toc-item"><span class="toc-number">3-2</span><span>ä»•æ§˜</span></li>
                    <li class="toc-item"><span class="toc-number">3-3</span><span>ã‚¢ãƒ—ãƒªä»•æ§˜</span></li>
                    <li class="toc-item"><span class="toc-number">3-4</span><span>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç”Ÿæˆ</span></li>
                    <li class="toc-item"><span class="toc-number">3-5</span><span>è¿½åŠ ãƒ»å¤‰æ›´ç®‡æ‰€ã®è§£èª¬</span></li>
                </ul>
            </nav>

            <!-- æ¦‚è¦ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 3-1</span>
                    <h2 class="section-title">æ¦‚è¦</h2>
                </div>

                <div class="intro-text">
                    <p>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€<strong>ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¬¡ã®ç”»é¢ã«æ¸¡ã™</strong>æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚</p>
                    <p>å…¥åŠ›ç”»é¢ â†’ ç¢ºèªç”»é¢ â†’ å®Œäº†ç”»é¢ã¨ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¡å›ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
                </div>

                <h3>ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å­¦ã¶ã“ã¨</h3>
                <div class="module-list">
                    <div class="module-item">
                        <div class="module-icon">ğŸ“</div>
                        <div class="module-content">
                            <h4>Formã‚¯ãƒ©ã‚¹ã®ä½œæˆ</h4>
                            <p>å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®Javaã‚¯ãƒ©ã‚¹</p>
                        </div>
                    </div>
                    <div class="module-item">
                        <div class="module-icon">ğŸ“¤</div>
                        <div class="module-content">
                            <h4>POSTã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡</h4>
                            <p>formã‚¿ã‚°ã¨POSTãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡</p>
                        </div>
                    </div>
                    <div class="module-item">
                        <div class="module-icon">ğŸ”„</div>
                        <div class="module-content">
                            <h4>Modelã§ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—</h4>
                            <p>Controlleré–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¡å›ã™æ–¹æ³•</p>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-box-header">
                        <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                        <span class="info-box-title">ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚´ãƒ¼ãƒ«</span>
                    </div>
                    <p>å…¥åŠ›ç”»é¢ã§å…¥åŠ›ã—ãŸå†…å®¹ãŒã€ç¢ºèªç”»é¢ãƒ»å®Œäº†ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚Œã°OKã§ã™ï¼</p>
                </div>
            </section>

            <!-- ä»•æ§˜ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 3-2</span>
                    <h2 class="section-title">ä»•æ§˜</h2>
                </div>

                <h3>ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œ</h3>
                <div class="screen-flow-diagram" style="display: flex; justify-content: center; margin: 2rem 0;">
                    <svg viewBox="0 0 600 150" width="600" height="150">
                        <rect width="600" height="150" fill="#f8fafc" rx="8" />

                        <rect x="20" y="50" width="120" height="60" rx="6" fill="#22c55e" />
                        <text x="80" y="75" text-anchor="middle" font-size="11" fill="white" font-weight="bold">å…¥åŠ›ç”»é¢</text>
                        <text x="80" y="95" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.8)">formé€ä¿¡(POST)</text>

                        <rect x="200" y="50" width="120" height="60" rx="6" fill="#f59e0b" />
                        <text x="260" y="75" text-anchor="middle" font-size="11" fill="white" font-weight="bold">ç¢ºèªç”»é¢</text>
                        <text x="260" y="95" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.8)">ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</text>

                        <rect x="380" y="50" width="120" height="60" rx="6" fill="#8b5cf6" />
                        <text x="440" y="75" text-anchor="middle" font-size="11" fill="white" font-weight="bold">å®Œäº†ç”»é¢</text>
                        <text x="440" y="95" text-anchor="middle" font-size="9" fill="rgba(255,255,255,0.8)">ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</text>

                        <path d="M 140 80 L 195 80" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)" />
                        <path d="M 320 80 L 375 80" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)" />

                        <text x="167" y="70" text-anchor="middle" font-size="9" fill="#64748b">POST</text>
                        <text x="347" y="70" text-anchor="middle" font-size="9" fill="#64748b">POST</text>

                        <defs>
                            <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                                <polygon points="0 0, 8 3, 0 6" fill="#64748b" />
                            </marker>
                        </defs>
                    </svg>
                </div>

                <h3>Formã‚¯ãƒ©ã‚¹</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å</th>
                            <th>å‹</th>
                            <th>èª¬æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>author</td><td>String</td><td>ç™»éŒ²è€…å</td></tr>
                        <tr><td>title</td><td>String</td><td>ã‚¿ã‚¤ãƒˆãƒ«</td></tr>
                        <tr><td>detail</td><td>String</td><td>è©³ç´°</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- ã‚¢ãƒ—ãƒªä»•æ§˜ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 3-3</span>
                    <h2 class="section-title">ã‚¢ãƒ—ãƒªä»•æ§˜</h2>
                </div>

                <h3>ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-title">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ</span>
                    </div>
                    <div class="code-content">
                        <pre>src/main/java/com/example/todo/
â”œâ”€â”€ TodoApplication.java
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ TodoController.java      â† å¤‰æ›´
â””â”€â”€ form/
    â””â”€â”€ TodoForm.java            â† æ–°è¦è¿½åŠ 

src/main/resources/templates/
â”œâ”€â”€ index.html
â”œâ”€â”€ edit.html                    â† å¤‰æ›´ï¼ˆformé€ä¿¡ï¼‰
â”œâ”€â”€ confirm.html                 â† å¤‰æ›´ï¼ˆãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºï¼‰
â””â”€â”€ complete.html                â† å¤‰æ›´ï¼ˆãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºï¼‰</pre>
                    </div>
                </div>
            </section>

            <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 3-4</span>
                    <h2 class="section-title">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç”Ÿæˆ</h2>
                </div>

                <div class="code-block" id="prompt-1">
                    <div class="code-header">
                        <span class="code-title">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹</span>
                        <button class="download-btn" onclick="downloadPrompt('prompt-1', 'step3_form.txt')">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                    </div>
                    <div class="code-content">
                        <pre>ã‚ãªãŸã¯Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã§ã™ã€‚

Step 2ã§ä½œæˆã—ãŸ4ç”»é¢ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã€ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®æŒã¡å›ã‚Šæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

ã€è¦ä»¶ã€‘
1. å…¥åŠ›ç”»é¢ã§ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã€ç¢ºèªç”»é¢ãƒ»å®Œäº†ç”»é¢ã§è¡¨ç¤ºã™ã‚‹
2. POSTãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’é€ä¿¡ã™ã‚‹
3. Formã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹

ã€ä½œæˆã™ã‚‹Formã‚¯ãƒ©ã‚¹ã€‘
- ã‚¯ãƒ©ã‚¹å: TodoForm
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: com.example.todo.form
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
  - author (String) - ç™»éŒ²è€…
  - title (String) - ã‚¿ã‚¤ãƒˆãƒ«
  - detail (String) - è©³ç´°
- getter/setterã‚’ä½œæˆ

ã€Controllerã®å¤‰æ›´ã€‘
- å…¥åŠ›ç”»é¢(edit): GETã§è¡¨ç¤ºã€ç©ºã®Formã‚’Modelã«è¿½åŠ 
- ç¢ºèªç”»é¢(confirm): POSTã§å—ã‘å–ã‚Šã€Formã®å†…å®¹ã‚’è¡¨ç¤º
- å®Œäº†ç”»é¢(complete): POSTã§å—ã‘å–ã‚Šã€Formã®å†…å®¹ã‚’è¡¨ç¤º

ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ›´ã€‘
- edit.html: th:objectã¨th:fieldã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒã‚¤ãƒ³ãƒ‰
- confirm.html: Formã®å†…å®¹ã‚’è¡¨ç¤ºã€hiddenãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒ
- complete.html: Formã®å†…å®¹ã‚’è¡¨ç¤º

å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚</pre>
                    </div>
                </div>
            </section>

            <!-- è§£èª¬ -->
            <section class="section">
                <div class="section-header">
                    <span class="section-number">Section 3-5</span>
                    <h2 class="section-title">è¿½åŠ ãƒ»å¤‰æ›´ç®‡æ‰€ã®è§£èª¬</h2>
                </div>

                <h3>ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ä¸€è¦§</h3>
                <table class="data-table">
                    <thead>
                        <tr><th>ãƒ•ã‚¡ã‚¤ãƒ«</th><th>çŠ¶æ…‹</th><th>å¤‰æ›´å†…å®¹</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><code>TodoForm.java</code></td><td><span class="file-badge new">æ–°è¦</span></td><td>ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æ ¼ç´ã‚¯ãƒ©ã‚¹</td></tr>
                        <tr><td><code>TodoController.java</code></td><td><span class="file-badge modified">å¤‰æ›´</span></td><td>POSTå¯¾å¿œã€Formå—ã‘å–ã‚Š</td></tr>
                        <tr><td><code>edit.html</code></td><td><span class="file-badge modified">å¤‰æ›´</span></td><td>formé€ä¿¡æ©Ÿèƒ½è¿½åŠ </td></tr>
                        <tr><td><code>confirm.html</code></td><td><span class="file-badge modified">å¤‰æ›´</span></td><td>ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã€hiddenè¿½åŠ </td></tr>
                        <tr><td><code>complete.html</code></td><td><span class="file-badge modified">å¤‰æ›´</span></td><td>ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</td></tr>
                    </tbody>
                </table>

                <h3>Formã‚¯ãƒ©ã‚¹ã®ä¾‹</h3>
                <div class="code-block">
                    <div class="code-header"><span class="code-title">TodoForm.java</span></div>
                    <div class="code-content">
                        <pre>public class TodoForm {
    private String author;
    private String title;
    private String detail;

    // getter/setter
    public String getAuthor() { return author; }
    public void setAuthor(String author) { this.author = author; }
    // ... ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚‚åŒæ§˜
}</pre>
                    </div>
                </div>

                <h3>Thymeleafã§ã®ãƒ•ã‚©ãƒ¼ãƒ ãƒã‚¤ãƒ³ãƒ‰</h3>
                <div class="code-block">
                    <div class="code-header"><span class="code-title">edit.htmlï¼ˆæŠœç²‹ï¼‰</span></div>
                    <div class="code-content">
                        <pre>&lt;form th:action="@{/confirm}" th:object="${todoForm}" method="post"&gt;
    &lt;input type="text" th:field="*{author}" /&gt;
    &lt;input type="text" th:field="*{title}" /&gt;
    &lt;textarea th:field="*{detail}"&gt;&lt;/textarea&gt;
    &lt;button type="submit"&gt;ç¢ºèª&lt;/button&gt;
&lt;/form&gt;</pre>
                    </div>
                </div>

                <div class="info-box" style="background: #f0fdf4; border-color: #22c55e;">
                    <div class="info-box-header">
                        <span class="info-box-icon">âœ…</span>
                        <span class="info-box-title">å®Œäº†ãƒã‚§ãƒƒã‚¯</span>
                    </div>
                    <ul style="margin: 0.5rem 0 0 0; padding-left: 1.5rem;">
                        <li>å…¥åŠ›ç”»é¢ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã§ãã‚‹</li>
                        <li>ç¢ºèªç”»é¢ã§å…¥åŠ›å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                        <li>å®Œäº†ç”»é¢ã§å…¥åŠ›å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                    </ul>
                </div>
            </section>
        </div>

        <footer class="footer"><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</p></footer>

        <div class="page-nav">
            <a href="promptpg-2.html" class="page-nav-btn prev">
                <span>â†</span>
                <div><div class="page-nav-label">å‰ã®ã‚¹ãƒ†ãƒƒãƒ—</div><div class="page-nav-title">Step 2: ç”»é¢ä½œæˆ</div></div>
            </a>
            <a href="promptpg-4.html" class="page-nav-btn next">
                <div><div class="page-nav-label">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</div><div class="page-nav-title">Step 4: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š</div></div>
                <span>â†’</span>
            </a>
        </div>

        <script>
            function toggleMenu() {
                const toggle = document.querySelector(".nav-toggle");
                const menu = document.querySelector(".nav-menu");
                toggle.classList.toggle("active");
                menu.classList.toggle("active");
            }
            function downloadPrompt(elementId, filename) {
                const element = document.getElementById(elementId);
                const preElement = element.querySelector('pre');
                const text = preElement.textContent;
                const blob = new Blob([text], { type: 'text/plain; charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        </script>
    </body>
</html>
