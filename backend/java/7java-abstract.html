<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第7章 抽象クラス</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../shared/common.css">
    <style>
      :root {
        --primary: #0097A7;
        --primary-dark: #00838F;
        --primary-light: #E0F7FA;
        --primary-lighter: #B2EBF2;
      }
      .nav-category-links { display: none; }
    </style>
</head>
<body>
    <nav class="global-nav"></nav>
    <script src="../../shared/js/nav-java.js"></script>

    <div class="container">
        <header class="chapter-header">
            <div class="chapter-badge"><span class="material-icons">menu_book</span> Chapter</div>
            <div class="chapter-number">7</div>
            <h1 class="chapter-title">抽象クラス</h1>
        </header>

        <nav class="toc">
            <h2 class="toc-title"><span class="material-icons">list_alt</span> この章の内容</h2>
            <ul class="toc-list">
                <li class="toc-item"><span class="toc-number">7-1</span><span>抽象クラスと抽象メソッド</span></li>
            </ul>
        </nav>

        <!-- セクション 7-1 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 7-1</span>
                <h2 class="section-title">抽象クラスと抽象メソッド</h2>
            </div>

            <!-- 概要 -->
            <div class="intro-text">
                <p>抽象クラスは「未完成の設計図」で、サブクラスに実装を強制します。共通の処理は親クラスで実装し、サブクラスごとに異なる処理は抽象メソッドとして宣言します。テンプレートメソッドパターンなど、設計パターンの基盤としても重要です。</p>
            </div>

            <!-- 説明 -->
            <div class="content-block">
                <p><code>abstract</code>クラスは直接<code>new</code>できません。抽象メソッド（本体のないメソッド）を含み、子クラスがそのメソッドを必ず実装する必要があります。通常のメソッドも持てるため、「共通処理は親で実装、個別処理は子に任せる」という設計ができます。</p>
            </div>

            <!-- 図解 -->
            <div class="content-block">
                <div class="figure" style="margin: 20px 0;">
                    <div class="figure-caption">抽象クラス ― 「未完成の設計図」を子クラスが完成させる</div>
                    <svg viewBox="0 0 700 400" style="max-width: 700px; width: 100%; height: auto;">
                        <!-- ===== 抽象クラス Shape ===== -->
                        <rect x="200" y="10" width="300" height="160" rx="14" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2.5" stroke-dasharray="8,4"/>
                        <rect x="200" y="10" width="300" height="40" rx="14" fill="#8b5cf6"/>
                        <rect x="200" y="36" width="300" height="14" fill="#8b5cf6"/>
                        <text x="350" y="36" text-anchor="middle" font-size="14" font-weight="700" fill="white">abstract Shape（抽象クラス）</text>
                        <text x="220" y="72" font-size="11" fill="#5b21b6">抽象メソッド（未実装）</text>
                        <rect x="220" y="80" width="260" height="26" rx="6" fill="white" stroke="#ddd6fe" stroke-width="1"/>
                        <text x="350" y="98" text-anchor="middle" font-size="12" fill="#7c3aed" font-family="monospace" font-style="italic">abstract double getArea();</text>
                        <text x="220" y="126" font-size="11" fill="#5b21b6">通常メソッド（実装あり）</text>
                        <rect x="220" y="134" width="260" height="26" rx="6" fill="white" stroke="#ddd6fe" stroke-width="1"/>
                        <text x="350" y="152" text-anchor="middle" font-size="12" fill="#1e293b" font-family="monospace">void printColor() { ... }</text>

                        <!-- ===== 点線ボーダーの注釈 ===== -->
                        <rect x="530" y="56" width="160" height="50" rx="8" fill="#faf5ff" stroke="#c4b5fd" stroke-width="1"/>
                        <text x="610" y="76" text-anchor="middle" font-size="11" fill="#7c3aed">点線 = 直接 new できない</text>
                        <text x="610" y="94" text-anchor="middle" font-size="11" fill="#7c3aed">（未完成だから）</text>

                        <!-- ===== extends 矢印 ===== -->
                        <line x1="200" y1="170" x2="200" y2="210" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="200" y1="210" x2="130" y2="210" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="130" y1="210" x2="130" y2="250" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowAbst)"/>
                        <line x1="500" y1="170" x2="500" y2="210" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="500" y1="210" x2="570" y2="210" stroke="#8b5cf6" stroke-width="2"/>
                        <line x1="570" y1="210" x2="570" y2="250" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowAbst)"/>
                        <text x="350" y="224" text-anchor="middle" font-size="11" font-weight="600" fill="#8b5cf6">extends（実装を完成させる）</text>

                        <!-- ===== 具象クラス Circle ===== -->
                        <rect x="10" y="250" width="260" height="140" rx="14" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                        <rect x="10" y="250" width="260" height="36" rx="14" fill="#10b981"/>
                        <rect x="10" y="272" width="260" height="14" fill="#10b981"/>
                        <text x="140" y="274" text-anchor="middle" font-size="14" font-weight="700" fill="white">Circle（具象クラス）</text>
                        <text x="30" y="306" font-size="11" font-weight="600" fill="#065f46">抽象メソッドを実装</text>
                        <rect x="30" y="314" width="220" height="26" rx="6" fill="white" stroke="#a7f3d0" stroke-width="1"/>
                        <text x="140" y="332" text-anchor="middle" font-size="12" fill="#166534" font-family="monospace">π × r × r</text>
                        <text x="30" y="358" font-size="11" fill="#64748b">printColor() も使える</text>
                        <text x="30" y="376" font-size="11" fill="#64748b">（親から継承）</text>

                        <!-- ===== 具象クラス Rectangle ===== -->
                        <rect x="430" y="250" width="260" height="140" rx="14" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                        <rect x="430" y="250" width="260" height="36" rx="14" fill="#f59e0b"/>
                        <rect x="430" y="272" width="260" height="14" fill="#f59e0b"/>
                        <text x="560" y="274" text-anchor="middle" font-size="14" font-weight="700" fill="white">Rectangle（具象クラス）</text>
                        <text x="450" y="306" font-size="11" font-weight="600" fill="#92400e">抽象メソッドを実装</text>
                        <rect x="450" y="314" width="220" height="26" rx="6" fill="white" stroke="#fde68a" stroke-width="1"/>
                        <text x="560" y="332" text-anchor="middle" font-size="12" fill="#92400e" font-family="monospace">width × height</text>
                        <text x="450" y="358" font-size="11" fill="#64748b">printColor() も使える</text>
                        <text x="450" y="376" font-size="11" fill="#64748b">（親から継承）</text>

                        <defs>
                            <marker id="arrowAbst" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
                                <path d="M 0 0 L 10 5 L 0 10 z" fill="#8b5cf6"/>
                            </marker>
                        </defs>
                    </svg>
                </div>
            </div>

            <!-- プロンプト -->
            <div class="prompt-box">
                <div class="prompt-box-header">
                    <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                    <span class="prompt-box-title">プロンプト</span>
                    <button class="prompt-copy-btn">コピー</button>
                </div>
                <div class="prompt-box-content">
                    <pre><code>## 機能
抽象クラスを使った図形クラスの階層の動作を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter07
- ファイル名: AbstractDemo.java

## 実装要件
- 抽象クラスShapeを定義（abstract修飾子）
- 抽象メソッドgetArea()を宣言（サブクラスで実装必須）
- 通常のメソッドprintColor()も含める
- 具象クラスCircleでShapeを継承しgetArea()を実装
- 面積計算のロジックをCircleクラスで実装


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする
- 1ファイルで完結するよう、必要なクラスをすべて含める

## 使用するJava構文
- abstract クラス宣言
- abstract メソッド宣言
- 抽象クラスの継承と抽象メソッドの実装</code></pre>
                </div>
            </div>

            <!-- ソースコード -->
            <div class="code-block">
                <div class="code-header"><span class="code-title">chapter07/AbstractDemo.java</span><span class="code-lang">Java</span></div>
                <pre class="code-content"><code>abstract class Shape {
    protected String color;

    // 抽象メソッド（実装なし）
    public abstract double getArea();

    // 通常のメソッド
    public void printColor() {
        System.out.println("色: " + color);
    }
}

class Circle extends Shape {
    private double radius;

    public Circle(double radius) {
        this.radius = radius;
    }

    @Override
    public double getArea() {
        return Math.PI * radius * radius;
    }
}

public class AbstractDemo {
    public static void main(String[] args) {
        Circle circle = new Circle(5.0);
        System.out.println("面積: " + circle.getArea());
        circle.color = "赤";
        circle.printColor();  // 色: 赤
    }
}</code></pre>
            </div>

            <!-- 構文 -->
            <div class="syntax-box">
                <div class="syntax-box-header">
                    <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                    <span class="syntax-box-title">構文説明</span>
                </div>
                <div class="syntax-box-content">
                    <div class="syntax-item">
                        <h4>抽象クラス（abstract class）</h4>
                        <div class="syntax-pattern">public abstract class クラス名 { }</div>
                        <p>abstractを付けたクラスは直接インスタンス化できません。共通の処理を定義し、サブクラスで具体的な実装を行うための「設計図」として使用します。</p>
                    </div>
                    <div class="syntax-item">
                        <h4>抽象メソッド（abstract method）</h4>
                        <div class="syntax-pattern">public abstract 戻り値型 メソッド名();</div>
                        <p>abstractを付けたメソッドは本体を持たず、サブクラスで必ずオーバーライドして実装する必要があります。セミコロンで終わり、中括弧は書きません。</p>
                    </div>
                </div>
            </div>

            <!-- 実際のユースケース -->
            <div class="info-box">
                <div class="info-box-header"><span class="info-box-icon"><span class="material-icons">work</span></span><span class="info-box-title">実際のユースケース</span></div>
                <ul class="bullet-list">
                    <li><strong>Spring の AbstractController</strong>：共通のリクエスト処理（認証チェック・ログ記録）を親クラスに実装し、各コントローラが抽象メソッド <code>handleRequest()</code> だけを実装する設計で使われます。</li>
                    <li><strong>バッチ処理の共通フロー</strong>：抽象クラスで「データ取得→変換→保存」の流れを定義し、変換処理だけを子クラスで実装します。CSV 取り込み、API 連携など、複数のバッチ処理で共通の枠組みを再利用できます。</li>
                    <li><strong>決済処理の設計</strong>：<code>abstract class Payment</code> で共通のバリデーションとログ処理を持ち、<code>CreditCardPayment</code>、<code>BankTransferPayment</code> が決済固有の処理を実装します。</li>
                </ul>
            </div>
        </section>
    </div>

    <footer class="footer"><p>Java Silver 試験対策 教科書</p></footer>

    <div class="page-nav">
        <a href="6java-inheritance.html" class="page-nav-btn prev"><span>&#8592;</span><div><div class="page-nav-label">前の章</div><div class="page-nav-title">第6章</div></div></a>
        <a href="8java-interface.html" class="page-nav-btn next"><div><div class="page-nav-label">次の章</div><div class="page-nav-title">第8章</div></div><span>&#8594;</span></a>
    </div>

    <script>
        function toggleMenu() {
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            toggle.classList.toggle('active');
            menu.classList.toggle('active');
        }
        document.addEventListener('click', function(e) {
            const nav = document.querySelector('.global-nav');
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            if (!nav.contains(e.target) && menu.classList.contains('active')) {
                toggle.classList.remove('active');
                menu.classList.remove('active');
            }
        });
    </script>
    <script src="../../shared/demo.js"></script>
</body>
</html>
