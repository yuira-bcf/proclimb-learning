<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第9章 繰り返しと制御文の組み合わせ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../shared/common.css">
    <style>
      :root {
        --primary: #0097A7;
        --primary-dark: #00838F;
        --primary-light: #E0F7FA;
        --primary-lighter: #B2EBF2;
      }
      .nav-category-links { display: none; }
    </style>
</head>
<body>
    <!-- グローバルナビゲーション -->
    <nav class="global-nav"></nav>
    <script src="../../shared/js/nav-java.js"></script>

    <div class="container">
        <header class="chapter-header">
            <div class="chapter-badge"><span class="material-icons">menu_book</span> Chapter</div>
            <div class="chapter-number">9</div>
            <h1 class="chapter-title">繰り返しと制御文の組み合わせ</h1>
        </header>

        <nav class="toc">
            <h2 class="toc-title"><span class="material-icons">list_alt</span> この章の内容</h2>
            <ul class="toc-list">
                <li class="toc-item"><span class="toc-number">9-1</span><span>whileによる繰り返し</span></li>
                <li class="toc-item"><span class="toc-number">9-2</span><span>forによる繰り返し</span></li>
                <li class="toc-item"><span class="toc-number">9-3</span><span>制御文の組み合わせ</span></li>
                <li class="toc-item"><span class="toc-number">9-4</span><span>繰り返しの制御</span></li>
            </ul>
        </nav>

        <!-- セクション 9-1 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 9-1</span>
                <h2 class="section-title">whileによる繰り返し</h2>
            </div>

            <div class="intro-text">
                <p>繰り返し処理は、同じような処理を何度も実行する場合に使います。while文は「条件が満たされている間」繰り返すため、繰り返し回数が事前にわからない場合（ユーザー入力待ち、ファイル読み込みなど）に適しています。</p>
            </div>

            <!-- 図解: while vs do-while フロー比較 -->
            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin: 24px 0;">
                <h4 style="margin: 0 0 16px 0; font-size: 1.1rem; color: #1e293b; display: flex; align-items: center; gap: 8px;">
                    <span class="material-icons" style="color: #3b82f6;">swap_horiz</span>
                    while vs do-while ― 判定タイミングの違い
                </h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- while -->
                    <div style="background: #dbeafe; border-radius: 12px; padding: 16px;">
                        <div style="font-weight: 700; color: #1e40af; margin-bottom: 12px; text-align: center; font-size: 0.95rem;">while文（前判定）</div>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 6px;">
                            <div style="background: white; border-radius: 8px; padding: 6px 16px; font-size: 0.85rem; color: #334155;">開始</div>
                            <div style="font-size: 1.1rem;">↓</div>
                            <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 50%; width: 100px; height: 50px; display: flex; align-items: center; justify-content: center; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: 600;">条件判定</div>
                            <div style="display: flex; gap: 40px;">
                                <div style="text-align: center;">
                                    <span style="font-size: 0.75rem; color: #16a34a; font-weight: 600;">true</span>
                                    <div style="font-size: 1.1rem;">↓</div>
                                </div>
                                <div style="text-align: center;">
                                    <span style="font-size: 0.75rem; color: #dc2626; font-weight: 600;">false</span>
                                    <div style="font-size: 1.1rem;">↓</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 24px;">
                                <div style="background: #bbf7d0; border-radius: 8px; padding: 6px 12px; font-size: 0.8rem;">処理実行 ↩</div>
                                <div style="background: #f1f5f9; border-radius: 8px; padding: 6px 12px; font-size: 0.8rem;">終了</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; background: #eff6ff; border-radius: 6px; padding: 6px 10px; font-size: 0.8rem; color: #1e40af; text-align: center;">
                            条件が最初からfalse → <strong>0回実行</strong>
                        </div>
                    </div>
                    <!-- do-while -->
                    <div style="background: #dcfce7; border-radius: 12px; padding: 16px;">
                        <div style="font-weight: 700; color: #166534; margin-bottom: 12px; text-align: center; font-size: 0.95rem;">do-while文（後判定）</div>
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 6px;">
                            <div style="background: white; border-radius: 8px; padding: 6px 16px; font-size: 0.85rem; color: #334155;">開始</div>
                            <div style="font-size: 1.1rem;">↓</div>
                            <div style="background: #bbf7d0; border: 2px solid #22c55e; border-radius: 8px; padding: 6px 16px; font-size: 0.85rem; font-weight: 600;">処理実行</div>
                            <div style="font-size: 1.1rem;">↓</div>
                            <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 50%; width: 100px; height: 50px; display: flex; align-items: center; justify-content: center; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: 600;">条件判定</div>
                            <div style="display: flex; gap: 40px;">
                                <div style="text-align: center;">
                                    <span style="font-size: 0.75rem; color: #16a34a; font-weight: 600;">true ↩</span>
                                </div>
                                <div style="text-align: center;">
                                    <span style="font-size: 0.75rem; color: #dc2626; font-weight: 600;">false →</span>
                                    <span style="font-size: 0.8rem;"> 終了</span>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; background: #f0fdf4; border-radius: 6px; padding: 6px 10px; font-size: 0.8rem; color: #166534; text-align: center;">
                            条件が最初からfalse → <strong>1回は実行</strong>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 12px; padding: 8px 12px; background: #fef3c7; border-radius: 8px; font-size: 0.85rem; color: #92400e;">
                    <strong>試験頻出:</strong> do-while は「最低1回は実行される」点がwhile との決定的な違いです
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.1 while文</h3>
                <div class="content-block">
                    <p>条件がtrueの間、処理を繰り返します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
while文による基本的な繰り返し処理を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: WhileDemo.java

## 実装要件
- カウンタ変数を0で初期化
- 条件が真の間ループを継続
- ループ内でカウンタをインクリメント


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- while文
- 関係演算子（<）
- インクリメント演算子（++）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/WhileDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class WhileDemo {
    public static void main(String[] args) {
        int i = 0;
        while (i &lt; 5) {
            System.out.println(i);  // 0, 1, 2, 3, 4
            i++;
        }
    }
}</code></pre>
                    </div>

                    <div class="mermaid-box" style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px; margin: 16px 0;">
                        <pre class="mermaid">
flowchart TD
    A([開始]) --> B["int i = 0"]
    B --> C{"i < 5 ?"}
    C -- "true" --> D["println: i"]
    D --> E["i++"]
    E --> C
    C -- "false" --> F([終了])
    style A fill:#1e293b,stroke:#1e293b,color:#fff
    style B fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style C fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style D fill:#dcfce7,stroke:#22c55e,color:#166534
    style E fill:#e0f2fe,stroke:#0ea5e9,color:#0369a1
    style F fill:#1e293b,stroke:#1e293b,color:#fff
                        </pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>while文</h4>
                                <div class="syntax-pattern">while (条件) {
  処理
}</div>
                                <p>条件がtrueの間、ブロック内の処理を繰り返し実行します。条件がfalseなら1回も実行されません。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.2 do-while文</h3>
                <div class="content-block">
                    <p>最低1回は処理を実行し、その後条件を判定します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
do-while文による繰り返し処理を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: DoWhileDemo.java

## 実装要件
- 最低1回は処理を実行してから条件判定
- 通常のループと条件がfalseでも1回実行される例を示す
- whileとの違いを明確にする


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- do-while文
- 関係演算子（<）
- インクリメント演算子（++）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/DoWhileDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class DoWhileDemo {
    public static void main(String[] args) {
        int i = 0;
        do {
            System.out.println(i);  // 0, 1, 2, 3, 4
            i++;
        } while (i &lt; 5);

        // 条件がfalseでも1回は実行
        int j = 10;
        do {
            System.out.println(j);  // 10（1回は実行）
        } while (j &lt; 5);
    }
}</code></pre>
                    </div>

                    <div class="mermaid-box" style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px; margin: 16px 0;">
                        <pre class="mermaid">
flowchart TD
    A([開始]) --> B["int i = 0"]
    B --> C["println: i"]
    C --> D["i++"]
    D --> E{"i < 5 ?"}
    E -- "true" --> C
    E -- "false" --> F([終了])
    style A fill:#1e293b,stroke:#1e293b,color:#fff
    style B fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style C fill:#dcfce7,stroke:#22c55e,color:#166534
    style D fill:#e0f2fe,stroke:#0ea5e9,color:#0369a1
    style E fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style F fill:#1e293b,stroke:#1e293b,color:#fff
                        </pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>do-while文</h4>
                                <div class="syntax-pattern">do {
  処理
} while (条件);</div>
                                <p>最低1回は処理を実行してから条件を判定します。条件がfalseでも1回は必ず実行されます。最後にセミコロンが必要です。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 9-2 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 9-2</span>
                <h2 class="section-title">forによる繰り返し</h2>
            </div>

            <div class="intro-text">
                <p>for文は繰り返し回数が明確な場合に最適です。配列やリストの全要素を処理する場面で最も頻繁に使われます。拡張for文（for-each）を使えば、インデックスを意識せずに簡潔にコードが書けます。</p>
            </div>

            <!-- 図解: for文の実行順序 -->
            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin: 24px 0;">
                <h4 style="margin: 0 0 16px 0; font-size: 1.1rem; color: #1e293b; display: flex; align-items: center; gap: 8px;">
                    <span class="material-icons" style="color: #a855f7;">loop</span>
                    for文の実行順序 ― 4つのステップ
                </h4>
                <div style="background: white; border-radius: 12px; padding: 16px; margin-bottom: 16px; text-align: center;">
                    <div style="font-family: 'JetBrains Mono', monospace; font-size: 1rem; color: #334155; margin-bottom: 16px;">
                        for (<span style="color: #2563eb; font-weight: 700;">int i = 0</span>; <span style="color: #dc2626; font-weight: 700;">i &lt; 5</span>; <span style="color: #16a34a; font-weight: 700;">i++</span>) { <span style="color: #a855f7; font-weight: 700;">処理</span> }
                    </div>
                    <div style="display: flex; justify-content: center; align-items: center; gap: 8px; flex-wrap: wrap;">
                        <!-- Step 1 -->
                        <div style="background: #dbeafe; border: 2px solid #3b82f6; border-radius: 10px; padding: 10px 14px; min-width: 100px;">
                            <div style="font-size: 0.7rem; color: #6b7280; margin-bottom: 4px;">STEP 1</div>
                            <div style="font-weight: 700; color: #1e40af; font-size: 0.9rem;">初期化</div>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #2563eb; margin-top: 4px;">int i = 0</div>
                            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 2px;">最初に1回だけ</div>
                        </div>
                        <div style="font-size: 1.5rem; color: #94a3b8;">→</div>
                        <!-- Step 2 -->
                        <div style="background: #fef2f2; border: 2px solid #ef4444; border-radius: 10px; padding: 10px 14px; min-width: 100px;">
                            <div style="font-size: 0.7rem; color: #6b7280; margin-bottom: 4px;">STEP 2</div>
                            <div style="font-weight: 700; color: #991b1b; font-size: 0.9rem;">条件判定</div>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #dc2626; margin-top: 4px;">i &lt; 5 ?</div>
                            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 2px;">false → 終了</div>
                        </div>
                        <div style="font-size: 1.5rem; color: #94a3b8;">→</div>
                        <!-- Step 3 -->
                        <div style="background: #f3e8ff; border: 2px solid #a855f7; border-radius: 10px; padding: 10px 14px; min-width: 100px;">
                            <div style="font-size: 0.7rem; color: #6b7280; margin-bottom: 4px;">STEP 3</div>
                            <div style="font-weight: 700; color: #6b21a8; font-size: 0.9rem;">処理実行</div>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #a855f7; margin-top: 4px;">{ ... }</div>
                            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 2px;">ループ本体</div>
                        </div>
                        <div style="font-size: 1.5rem; color: #94a3b8;">→</div>
                        <!-- Step 4 -->
                        <div style="background: #dcfce7; border: 2px solid #22c55e; border-radius: 10px; padding: 10px 14px; min-width: 100px;">
                            <div style="font-size: 0.7rem; color: #6b7280; margin-bottom: 4px;">STEP 4</div>
                            <div style="font-weight: 700; color: #166534; font-size: 0.9rem;">更新</div>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #16a34a; margin-top: 4px;">i++</div>
                            <div style="font-size: 0.7rem; color: #6b7280; margin-top: 2px;">→ STEP 2 へ</div>
                        </div>
                    </div>
                </div>
                <div style="background: #f1f5f9; border-radius: 10px; padding: 12px 16px;">
                    <div style="font-size: 0.85rem; color: #334155; font-weight: 600; margin-bottom: 8px;">実行トレース（i &lt; 3 の場合）:</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;">
                        <span style="background: #dbeafe; border-radius: 4px; padding: 3px 8px;">i=0 初期化</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #fef2f2; border-radius: 4px; padding: 3px 8px;">0&lt;3 true</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #f3e8ff; border-radius: 4px; padding: 3px 8px;">出力:0</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #dcfce7; border-radius: 4px; padding: 3px 8px;">i=1</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #fef2f2; border-radius: 4px; padding: 3px 8px;">1&lt;3 true</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #f3e8ff; border-radius: 4px; padding: 3px 8px;">出力:1</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #dcfce7; border-radius: 4px; padding: 3px 8px;">i=2</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #fef2f2; border-radius: 4px; padding: 3px 8px;">2&lt;3 true</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #f3e8ff; border-radius: 4px; padding: 3px 8px;">出力:2</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #dcfce7; border-radius: 4px; padding: 3px 8px;">i=3</span>
                        <span style="color: #94a3b8;">→</span>
                        <span style="background: #fecaca; border-radius: 4px; padding: 3px 8px; font-weight: 600;">3&lt;3 false → 終了</span>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.1 for文</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
基本的なfor文による繰り返し処理を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: ForDemo.java

## 実装要件
- for文の基本構文（初期化; 条件; 更新）を示す
- 0から4までの数値を出力
- 複数変数を使用した応用例も示す


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- for文
- 関係演算子（<）
- インクリメント/デクリメント演算子（++, --）
- カンマ演算子（複数変数の初期化・更新）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/ForDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class ForDemo {
    public static void main(String[] args) {
        // 構文: for (初期化; 条件; 更新) { 処理 }
        for (int i = 0; i &lt; 5; i++) {
            System.out.println(i);  // 0, 1, 2, 3, 4
        }

        // 複数の変数を使用
        for (int i = 0, j = 10; i &lt; j; i++, j--) {
            System.out.println(i + " " + j);
        }
    }
}</code></pre>
                    </div>

                    <div class="mermaid-box" style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px; margin: 16px 0;">
                        <pre class="mermaid">
flowchart TD
    A([開始]) --> B["int i = 0 （初期化）"]
    B --> C{"i < 5 ? （条件）"}
    C -- "true" --> D["println: i （処理）"]
    D --> E["i++ （更新）"]
    E --> C
    C -- "false" --> F([終了])
    style A fill:#1e293b,stroke:#1e293b,color:#fff
    style B fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style C fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style D fill:#f3e8ff,stroke:#a855f7,color:#6b21a8
    style E fill:#dcfce7,stroke:#22c55e,color:#166534
    style F fill:#1e293b,stroke:#1e293b,color:#fff
                        </pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>for文</h4>
                                <div class="syntax-pattern">for (初期化; 条件; 更新) {
  処理
}</div>
                                <p>初期化は最初に1回実行、条件がtrueの間繰り返し、更新は各反復の最後に実行されます。回数が決まっている繰り返しに最適です。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.2 拡張for文（for-each）</h3>
                <div class="content-block">
                    <p>配列やコレクションの全要素を順番に処理します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
拡張for文（for-each）による配列・リストの要素処理を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: ForEachDemo.java

## 実装要件
- 配列の全要素を順番に処理する例
- Listの全要素を順番に処理する例
- インデックスを使わない簡潔な記述


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- 拡張for文（for-each）: for (型 変数 : 配列/コレクション)
- 配列リテラル
- Arrays.asList()メソッド
- List&lt;String&gt;</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/ForEachDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>import java.util.Arrays;
import java.util.List;

public class ForEachDemo {
    public static void main(String[] args) {
        // 配列の処理
        int[] numbers = {1, 2, 3, 4, 5};
        for (int num : numbers) {
            System.out.println(num);
        }

        // リストの処理
        List&lt;String&gt; names = Arrays.asList("Alice", "Bob", "Charlie");
        for (String name : names) {
            System.out.println(name);
        }
    }
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>拡張for文（for-each）</h4>
                                <div class="syntax-pattern">for (型 変数 : 配列/コレクション) {
  処理
}</div>
                                <p>配列やコレクションの全要素を順番に処理します。インデックスを使わずに簡潔に書けますが、要素の削除はできません。</p>
                            </div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-header">
                            <span class="warning-box-icon"><span class="material-icons">warning</span></span>
                            <span class="warning-box-title">拡張for文の制限</span>
                        </div>
                        <p>拡張for文ではインデックスを取得できません。また、ループ中に要素を削除すると<code>ConcurrentModificationException</code>が発生します。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 9-3 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 9-3</span>
                <h2 class="section-title">制御文の組み合わせ</h2>
            </div>

            <div class="intro-text">
                <p>実際のプログラムでは、ループの中にif文を入れたり、ループを入れ子にしたりすることがよくあります。このとき、変数のスコープ（有効範囲）を正しく理解していないと、予期せぬエラーが発生します。二重ループは表形式のデータ処理や座標計算で頻出します。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.1 制御文のネストと変数のスコープ</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
for文における変数のスコープ（有効範囲）を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: ScopeDemo.java

## 実装要件
- ループ変数iがループ内でのみ有効であることを示す
- ループ内で宣言した変数tempのスコープを示す
- スコープ外でのアクセスがエラーになることをコメントで説明


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- for文
- 変数のスコープ（ブロックスコープ）
- 算術演算子（*）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/ScopeDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class ScopeDemo {
    public static void main(String[] args) {
        for (int i = 0; i &lt; 3; i++) {
            int temp = i * 2;  // ループ内でのみ有効
            System.out.println(temp);
        }
        // System.out.println(i);     // エラー：iはスコープ外
        // System.out.println(temp);  // エラー：tempもスコープ外
    }
}</code></pre>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.2 繰り返し文のネスト</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
二重ループ（ネストしたfor文）で九九表を出力するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: MultiplicationTable.java

## 実装要件
- 外側ループで行（1-9）を制御
- 内側ループで列（1-9）を制御
- 3桁右揃えで掛け算の結果を出力


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- ネストしたfor文（二重ループ）
- System.out.printf()（書式指定出力）
- 算術演算子（*）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/MultiplicationTable.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class MultiplicationTable {
    public static void main(String[] args) {
        for (int i = 1; i &lt;= 9; i++) {
            for (int j = 1; j &lt;= 9; j++) {
                System.out.printf("%3d", i * j);
            }
            System.out.println();
        }
    }
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 9-4 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 9-4</span>
                <h2 class="section-title">繰り返しの制御</h2>
            </div>

            <div class="intro-text">
                <p>ループの途中で処理を中断したり、特定の条件をスキップしたりする制御が必要な場面があります。break文とcontinue文を使いこなすことで、複雑なループ処理も効率的に書けるようになります。ラベル付きbreakは多重ループから一気に抜ける際に便利です。</p>
            </div>

            <!-- 図解: break vs continue の動き -->
            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin: 24px 0;">
                <h4 style="margin: 0 0 16px 0; font-size: 1.1rem; color: #1e293b; display: flex; align-items: center; gap: 8px;">
                    <span class="material-icons" style="color: #ef4444;">compare_arrows</span>
                    break vs continue ― ループ内での動作の違い
                </h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <!-- break -->
                    <div style="background: #fef2f2; border-radius: 12px; padding: 16px;">
                        <div style="font-weight: 700; color: #991b1b; margin-bottom: 10px; text-align: center; font-size: 0.95rem;">break ― ループ終了</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.82rem; text-align: center; color: #64748b; margin-bottom: 8px;">for (i = 0; i &lt; 5; i++)</div>
                        <div style="display: flex; flex-direction: column; gap: 3px;">
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=0 → 出力 0</div>
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=1 → 出力 1</div>
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=2 → 出力 2</div>
                            <div style="background: #fecaca; border: 2px solid #ef4444; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center; font-weight: 600;">i=3 → <span style="color: #dc2626;">break!</span> ループ脱出</div>
                            <div style="background: #f1f5f9; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center; opacity: 0.4; text-decoration: line-through;">i=4 → 実行されない</div>
                        </div>
                        <div style="margin-top: 10px; text-align: center; font-size: 0.85rem; font-weight: 600; color: #991b1b;">出力: 0, 1, 2</div>
                    </div>
                    <!-- continue -->
                    <div style="background: #dbeafe; border-radius: 12px; padding: 16px;">
                        <div style="font-weight: 700; color: #1e40af; margin-bottom: 10px; text-align: center; font-size: 0.95rem;">continue ― 1回スキップ</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.82rem; text-align: center; color: #64748b; margin-bottom: 8px;">for (i = 0; i &lt; 5; i++)</div>
                        <div style="display: flex; flex-direction: column; gap: 3px;">
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=0 → 出力 0</div>
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=1 → 出力 1</div>
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=2 → 出力 2</div>
                            <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center; font-weight: 600;">i=3 → <span style="color: #d97706;">continue!</span> スキップ</div>
                            <div style="background: #bbf7d0; border-radius: 6px; padding: 4px 12px; font-size: 0.82rem; text-align: center;">i=4 → 出力 4</div>
                        </div>
                        <div style="margin-top: 10px; text-align: center; font-size: 0.85rem; font-weight: 600; color: #1e40af;">出力: 0, 1, 2, 4</div>
                    </div>
                </div>
                <div style="margin-top: 12px; padding: 8px 12px; background: #eff6ff; border-radius: 8px; font-size: 0.85rem; color: #1e40af;">
                    <strong>違い:</strong> break は<strong>ループ全体を終了</strong>、continue は<strong>今の回だけスキップ</strong>して次の反復に進みます
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.1 無限ループ</h3>
                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
無限ループの書き方とbreak文による終了を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: InfiniteLoopDemo.java

## 実装要件
- while(true)による無限ループ
- for(;;)による無限ループ
- break文による終了条件の設定方法


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- while文（無限ループ: while(true)）
- for文（無限ループ: for(;;)）
- break文</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/InfiniteLoopDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class InfiniteLoopDemo {
    public static void main(String[] args) {
        // while版
        while (true) {
            // 処理
            if (条件) break;  // 終了条件でbreak
        }

        // for版
        for (;;) {
            // 処理
        }
    }
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>無限ループ</h4>
                                <div class="syntax-pattern">while (true) {
  処理
}

// または
for (;;) {
  処理
}</div>
                                <p>条件が常にtrueのため永久に繰り返します。必ずbreak文で終了条件を設定しないとプログラムが停止しません。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.2 break文</h3>
                <div class="content-block">
                    <p>ループを即座に終了します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
break文によるループの中断を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: BreakDemo.java

## 実装要件
- for文で0から9まで繰り返し
- 特定条件（i==5）でループを終了
- breakによりループから抜けることを確認


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- for文
- if文
- break文
- 関係演算子（<, ==）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/BreakDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class BreakDemo {
    public static void main(String[] args) {
        for (int i = 0; i &lt; 10; i++) {
            if (i == 5) {
                break;  // i==5でループ終了
            }
            System.out.println(i);  // 0, 1, 2, 3, 4
        }
    }
}</code></pre>
                    </div>

                    <div class="mermaid-box" style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px; margin: 16px 0;">
                        <pre class="mermaid">
flowchart TD
    A([開始]) --> B["int i = 0"]
    B --> C{"i < 10 ?"}
    C -- "true" --> D{"i == 5 ?"}
    D -- "true" --> E["break"]
    E --> G([終了])
    D -- "false" --> F["println: i"]
    F --> H["i++"]
    H --> C
    C -- "false" --> G
    style A fill:#1e293b,stroke:#1e293b,color:#fff
    style B fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style C fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style D fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style E fill:#fef2f2,stroke:#ef4444,color:#991b1b
    style F fill:#dcfce7,stroke:#22c55e,color:#166534
    style H fill:#e0f2fe,stroke:#0ea5e9,color:#0369a1
    style G fill:#1e293b,stroke:#1e293b,color:#fff
                        </pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>break文</h4>
                                <div class="syntax-pattern">break;</div>
                                <p>現在のループを即座に終了し、ループの直後の処理に移動します。switch文でも使用されます。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.3 continue文</h3>
                <div class="content-block">
                    <p>現在の反復をスキップし、次の反復に進みます。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
continue文による特定の反復のスキップを確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: ContinueDemo.java

## 実装要件
- for文で0から4まで繰り返し
- 特定条件（i==2）で現在の反復をスキップ
- continueにより次のループに進むことを確認


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- for文
- if文
- continue文
- 関係演算子（<, ==）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/ContinueDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class ContinueDemo {
    public static void main(String[] args) {
        for (int i = 0; i &lt; 5; i++) {
            if (i == 2) {
                continue;  // i==2をスキップ
            }
            System.out.println(i);  // 0, 1, 3, 4
        }
    }
}</code></pre>
                    </div>

                    <div class="mermaid-box" style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px; margin: 16px 0;">
                        <pre class="mermaid">
flowchart TD
    A([開始]) --> B["int i = 0"]
    B --> C{"i < 5 ?"}
    C -- "true" --> D{"i == 2 ?"}
    D -- "true" --> E["continue （スキップ）"]
    E --> H["i++"]
    D -- "false" --> F["println: i"]
    F --> H
    H --> C
    C -- "false" --> G([終了])
    style A fill:#1e293b,stroke:#1e293b,color:#fff
    style B fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style C fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style D fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style E fill:#fef3c7,stroke:#f59e0b,color:#d97706
    style F fill:#dcfce7,stroke:#22c55e,color:#166534
    style H fill:#e0f2fe,stroke:#0ea5e9,color:#0369a1
    style G fill:#1e293b,stroke:#1e293b,color:#fff
                        </pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>continue文</h4>
                                <div class="syntax-pattern">continue;</div>
                                <p>現在の反復の残りの処理をスキップし、次の反復に進みます。ループ自体は終了しません。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.4 ラベルによる制御</h3>
                <div class="content-block">
                    <p>ネストしたループで外側のループを制御する場合に使用します。</p>
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
ラベル付きbreak文による多重ループの制御を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter04
- ファイル名: LabelBreakDemo.java

## 実装要件
- 二重ループに対してラベル（outer）を付与
- 特定条件で外側のループを一気に終了
- 通常のbreakとの違いを示す


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- ネストしたfor文（二重ループ）
- ラベル（outer:）
- ラベル付きbreak文（break outer）
- 論理AND演算子（&&）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter04/LabelBreakDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class LabelBreakDemo {
    public static void main(String[] args) {
        outer:
        for (int i = 0; i &lt; 3; i++) {
            for (int j = 0; j &lt; 3; j++) {
                if (i == 1 &amp;&amp; j == 1) {
                    break outer;  // 外側のループを終了
                }
                System.out.println(i + ", " + j);
            }
        }
        // 出力: 0,0  0,1  0,2  1,0
    }
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>ラベル付きbreak/continue</h4>
                                <div class="syntax-pattern">ラベル名:
for (...) {
  ...
  break ラベル名;
}</div>
                                <p>多重ループで外側のループを制御する場合に使用します。ラベルを指定することで、どのループを終了/スキップするか明示できます。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 練習問題・解答 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Exercise</span>
                <h2 class="section-title">9章 練習問題</h2>
            </div>
            <div class="exercise-list">
                <div class="exercise-item">
                    <div class="exercise-number">Q1</div>
                    <div class="exercise-content">
                        <p>以下のコードの出力回数は何回ですか？</p>
                        <div class="code-block">
                            <pre class="code-content"><code>int i = 10;
do {
    System.out.println(i);
    i++;
} while (i &lt; 5);</code></pre>
                        </div>
                        <ol type="A"><li>0回</li><li>1回</li><li>5回</li><li>10回</li></ol>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <span class="section-number">Answer</span>
                <h2 class="section-title">9章 解説・解答</h2>
            </div>
            <div class="answer-list">
                <div class="answer-item">
                    <div class="answer-header">Q1の解答: B</div>
                    <div class="answer-content">
                        <p>do-while文は条件判定前に最低1回処理を実行します。iは10から始まり、条件(i &lt; 5)はfalseですが、1回は出力されます。</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer"><p>Java Silver 試験対策 教科書</p></footer>

    <div class="page-nav">
        <a href="8java-condition.html" class="page-nav-btn prev"><span>&#8592;</span><div><div class="page-nav-label">前の章</div><div class="page-nav-title">第8章</div></div></a>
        <a href="10java-class.html" class="page-nav-btn next"><div><div class="page-nav-label">次の章</div><div class="page-nav-title">第10章</div></div><span>&#8594;</span></a>
    </div>

    <script>
        function toggleMenu() {
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            toggle.classList.toggle('active');
            menu.classList.toggle('active');
        }
        document.addEventListener('click', function(e) {
            const nav = document.querySelector('.global-nav');
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            if (!nav.contains(e.target) && menu.classList.contains('active')) {
                toggle.classList.remove('active');
                menu.classList.remove('active');
            }
        });
    </script>
    <script src="../../shared/demo.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                fontFamily: '"Noto Sans JP", "JetBrains Mono", sans-serif',
                fontSize: '14px'
            },
            flowchart: { curve: 'basis', padding: 16, nodeSpacing: 30, rankSpacing: 40 }
        });
    </script>
</body>
</html>
