<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第5章 文字列の操作</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../shared/common.css">
    <style>
      :root {
        --primary: #0097A7;
        --primary-dark: #00838F;
        --primary-light: #E0F7FA;
        --primary-lighter: #B2EBF2;
      }
      .nav-category-links { display: none; }
    </style>
</head>
<body>
    <!-- グローバルナビゲーション -->
    <nav class="global-nav"></nav>
    <script src="../../shared/js/nav-java.js"></script>

    <div class="container">
        <!-- ヘッダー -->
        <header class="chapter-header">
            <div class="chapter-badge"><span class="material-icons">menu_book</span> Chapter</div>
            <div class="chapter-number">5</div>
            <h1 class="chapter-title">文字列の操作</h1>
        </header>

        <!-- 目次 -->
        <nav class="toc">
            <h2 class="toc-title"><span class="material-icons">list_alt</span> この章の内容</h2>
            <ul class="toc-list">
                <li class="toc-item"><span class="toc-number">5-1</span><span>文字列の操作</span></li>
            </ul>
        </nav>

        <!-- セクション 5-1 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 5-1</span>
                <h2 class="section-title">文字列の操作</h2>
            </div>

            <div class="intro-text">
                <p>文字列操作はほぼすべてのプログラムで必要になります。ユーザー入力の処理、ファイル名の生成、ログ出力、API通信など、文字列を扱わないプログラムはほとんどありません。Stringクラスのメソッドを使いこなすことで、効率的なコードが書けるようになります。</p>
            </div>

            <!-- 1.1 Stringクラスの特徴 -->
            <div class="subsection">
                <h3 class="subsection-title">1.1 Stringクラスの特徴</h3>

                <div class="content-block">
                    <p>Stringクラスの重要な特徴：</p>
                    <ul class="bullet-list">
                        <li><strong>イミュータブル（不変）</strong>：一度作成された文字列は変更できない</li>
                        <li><strong>文字列プール</strong>：同じ文字列リテラルは共有される</li>
                    </ul>

                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
Stringクラスのイミュータブル（不変）性を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter02
- ファイル名: StringImmutableDemo.java

## 実装要件
- 文字列に対してtoUpperCase()を呼び出しても元の文字列は変更されないことを示す
- 変更結果を使用するには戻り値を変数に代入する必要があることを示す


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- String型
- toUpperCase()メソッド
- System.out.println()</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter02/StringImmutableDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class StringImmutableDemo {
    public static void main(String[] args) {
        String s = "Hello";
        s.toUpperCase();  // 元の文字列は変更されない
        System.out.println(s);  // "Hello"

        s = s.toUpperCase();  // 新しい文字列を代入
        System.out.println(s);  // "HELLO"
    }
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>Stringメソッドの呼び出し</h4>
                                <div class="syntax-pattern">文字列変数.メソッド名(引数)</div>
                                <p>Stringのメソッドは元の文字列を変更せず、新しい文字列を返します。結果を使用するには戻り値を変数に代入する必要があります。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 1.2 Stringクラスのメソッド -->
            <div class="subsection">
                <h3 class="subsection-title">1.2 Stringクラスのメソッド</h3>

                <div class="content-block">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>メソッド</th>
                                <th>説明</th>
                                <th>例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>length()</code></td>
                                <td>文字列の長さ</td>
                                <td><code>"Hello".length()</code> → 5</td>
                            </tr>
                            <tr>
                                <td><code>charAt(int)</code></td>
                                <td>指定位置の文字</td>
                                <td><code>"Hello".charAt(0)</code> → 'H'</td>
                            </tr>
                            <tr>
                                <td><code>substring(int)</code></td>
                                <td>部分文字列</td>
                                <td><code>"Hello".substring(2)</code> → "llo"</td>
                            </tr>
                            <tr>
                                <td><code>indexOf(String)</code></td>
                                <td>文字列の位置</td>
                                <td><code>"Hello".indexOf("l")</code> → 2</td>
                            </tr>
                            <tr>
                                <td><code>toUpperCase()</code></td>
                                <td>大文字変換</td>
                                <td><code>"Hello".toUpperCase()</code> → "HELLO"</td>
                            </tr>
                            <tr>
                                <td><code>toLowerCase()</code></td>
                                <td>小文字変換</td>
                                <td><code>"Hello".toLowerCase()</code> → "hello"</td>
                            </tr>
                            <tr>
                                <td><code>trim()</code></td>
                                <td>前後の空白除去</td>
                                <td><code>" Hi ".trim()</code> → "Hi"</td>
                            </tr>
                            <tr>
                                <td><code>replace(old, new)</code></td>
                                <td>置換</td>
                                <td><code>"Hello".replace('l', 'L')</code> → "HeLLo"</td>
                            </tr>
                            <tr>
                                <td><code>equals(Object)</code></td>
                                <td>等価比較</td>
                                <td><code>"Hello".equals("Hello")</code> → true</td>
                            </tr>
                            <tr>
                                <td><code>contains(String)</code></td>
                                <td>含むか判定</td>
                                <td><code>"Hello".contains("ell")</code> → true</td>
                            </tr>
                            <tr>
                                <td><code>startsWith(String)</code></td>
                                <td>先頭判定</td>
                                <td><code>"Hello".startsWith("He")</code> → true</td>
                            </tr>
                            <tr>
                                <td><code>split(String)</code></td>
                                <td>分割</td>
                                <td><code>"a,b,c".split(",")</code> → ["a","b","c"]</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>length() - 文字列の長さを取得</h4>
                                <div class="syntax-pattern">文字列.length()</div>
                                <p>文字列に含まれる文字数を<code>int</code>で返します。空文字列<code>""</code>の場合は0を返します。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>charAt() - 指定位置の文字を取得</h4>
                                <div class="syntax-pattern">文字列.charAt(インデックス)</div>
                                <p>0から始まるインデックスで指定した位置の文字を<code>char</code>で返します。範囲外のインデックスを指定すると<code>StringIndexOutOfBoundsException</code>が発生します。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>substring() - 部分文字列を取得</h4>
                                <div class="syntax-pattern">文字列.substring(開始インデックス)
// または
文字列.substring(開始, 終了)</div>
                                <p>指定した範囲の部分文字列を返します。終了インデックスは含まれません（開始以上、終了未満）。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>equals() - 文字列の等価比較</h4>
                                <div class="syntax-pattern">文字列1.equals(文字列2)</div>
                                <p>文字列の内容が等しいかを<code>boolean</code>で返します。<code>==</code>は参照の比較なので、文字列の比較には<code>equals()</code>を使用します。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 1.3 テキストブロックの操作 -->
            <div class="subsection">
                <h3 class="subsection-title">1.3 テキストブロックの操作</h3>

                <div class="content-block">
                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
テキストブロックの操作メソッドを確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter02
- ファイル名: TextBlockMethodDemo.java

## 実装要件
- テキストブロックを使って複数行文字列を作成
- stripIndent()でインデントを調整
- formatted()メソッドで値を埋め込む


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- テキストブロック（"""）
- stripIndent()メソッド
- formatted()メソッド（%s, %dプレースホルダー）</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter02/TextBlockMethodDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class TextBlockMethodDemo {
    public static void main(String[] args) {
        String text = """
            Hello
            World
            """;

        // インデントの調整
        String stripped = text.stripIndent();

        // フォーマット
        String formatted = """
            Name: %s
            Age: %d
            """.formatted("Alice", 25);

        System.out.println("--- text ---");
        System.out.println(text);
        System.out.println("--- stripped ---");
        System.out.println(stripped);
        System.out.println("--- formatted ---");
        System.out.println(formatted);
    }
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>stripIndent() - インデントの調整</h4>
                                <div class="syntax-pattern">テキストブロック.stripIndent()</div>
                                <p>テキストブロックの先頭の共通インデントを除去します。コード内のインデントと実際の文字列のインデントを分離できます。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>formatted() - 値の埋め込み</h4>
                                <div class="syntax-pattern">テキストブロック.formatted(引数1, 引数2, ...)</div>
                                <p><code>%s</code>（文字列）、<code>%d</code>（整数）などのプレースホルダーに値を埋め込みます。<code>String.format()</code>と同様の書式指定が使えます。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 1.4 StringBuilderクラス -->
            <div class="subsection">
                <h3 class="subsection-title">1.4 StringBuilderクラス</h3>

                <div class="content-block">
                    <p>頻繁に文字列を変更する場合は、<code>StringBuilder</code>を使用すると効率的です。</p>

                    <div class="prompt-box">
                        <div class="prompt-box-header">
                            <span class="prompt-box-icon"><span class="material-icons">chat</span></span>
                            <span class="prompt-box-title">プロンプト</span>
                            <button class="prompt-copy-btn">コピー</button>
                        </div>
                        <div class="prompt-box-content">
                            <pre><code>## 機能
StringBuilderを使った効率的な文字列操作を確認するサンプルプロジェクト

## 生成先
- ディレクトリ: chapter02
- ファイル名: StringBuilderDemo.java

## 実装要件
- StringBuilderオブジェクトを生成
- append()で文字列を追加
- メソッドチェーンで連続した操作を実行
- insert()、delete()、replace()、reverse()の各操作を実行
- toString()でString型に変換


- mainメソッドを含め、System.out.printlnで各処理の実行結果を出力して動作確認できるようにする

## 使用するJava構文
- StringBuilderクラス
- append()、insert()、delete()、replace()、reverse()メソッド
- メソッドチェーン
- toString()メソッド</code></pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">chapter02/StringBuilderDemo.java</span>
                            <span class="code-lang">Java</span>
                        </div>
                        <pre class="code-content"><code>public class StringBuilderDemo {
    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder();

        // 文字列の追加
        sb.append("Hello");
        sb.append(" ");
        sb.append("World");
        System.out.println("append後: " + sb);

        // メソッドチェーン
        sb.append("!").append(" ").append("Java");
        System.out.println("チェーン後: " + sb);

        // 挿入
        sb.insert(0, "[");  // 先頭に挿入
        System.out.println("insert後: " + sb);

        // 削除
        sb.delete(0, 1);    // 範囲削除
        System.out.println("delete後: " + sb);

        // 置換
        sb.replace(0, 5, "Hi");
        System.out.println("replace後: " + sb);

        // 反転
        sb.reverse();
        System.out.println("reverse後: " + sb);

        // Stringに変換
        String result = sb.toString();
        System.out.println("結果: " + result);
    }
}</code></pre>
                    </div>

                    <div class="syntax-box">
                        <div class="syntax-box-header">
                            <span class="syntax-box-icon"><span class="material-icons">menu_book</span></span>
                            <span class="syntax-box-title">構文説明</span>
                        </div>
                        <div class="syntax-box-content">
                            <div class="syntax-item">
                                <h4>StringBuilderの生成</h4>
                                <div class="syntax-pattern">StringBuilder sb = new StringBuilder();</div>
                                <p>変更可能な文字列を扱うクラスです。頻繁な文字列操作では<code>String</code>より効率的です。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>append() - 文字列の追加</h4>
                                <div class="syntax-pattern">sb.append(追加する値);</div>
                                <p>末尾に文字列を追加します。数値やオブジェクトも自動的に文字列に変換されます。<code>StringBuilder</code>自身を返すため、メソッドチェーンが可能です。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>insert() - 文字列の挿入</h4>
                                <div class="syntax-pattern">sb.insert(位置, 挿入する値);</div>
                                <p>指定した位置に文字列を挿入します。既存の文字は後ろにずれます。</p>
                            </div>
                            <div class="syntax-item">
                                <h4>toString() - Stringへの変換</h4>
                                <div class="syntax-pattern">sb.toString()</div>
                                <p><code>StringBuilder</code>の内容を<code>String</code>オブジェクトに変換します。最終結果を取得する際に使用します。</p>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">StringBufferとの違い</span>
                        </div>
                        <p><code>StringBuffer</code>はスレッドセーフですが、<code>StringBuilder</code>より遅いです。シングルスレッド環境では<code>StringBuilder</code>を推奨します。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 練習問題 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Exercise</span>
                <h2 class="section-title">5章 練習問題</h2>
            </div>

            <div class="exercise-list">
                <div class="exercise-item">
                    <div class="exercise-number">Q1</div>
                    <div class="exercise-content">
                        <p>次のうち、有効な変数宣言はどれですか？（複数選択）</p>
                        <ol type="A">
                            <li><code>int 2ndValue = 10;</code></li>
                            <li><code>String _name = "test";</code></li>
                            <li><code>double $price = 100.0;</code></li>
                            <li><code>boolean class = true;</code></li>
                        </ol>
                    </div>
                </div>

                <div class="exercise-item">
                    <div class="exercise-number">Q2</div>
                    <div class="exercise-content">
                        <p>以下のコードの出力は何ですか？</p>
                        <div class="code-block">
                            <pre class="code-content"><code>String s = "Hello";
s.toUpperCase();
System.out.println(s);</code></pre>
                        </div>
                        <ol type="A">
                            <li>HELLO</li>
                            <li>Hello</li>
                            <li>hello</li>
                            <li>コンパイルエラー</li>
                        </ol>
                    </div>
                </div>

                <div class="exercise-item">
                    <div class="exercise-number">Q3</div>
                    <div class="exercise-content">
                        <p><code>int[] arr = new int[3];</code>で生成された配列の各要素の初期値は何ですか？</p>
                        <ol type="A">
                            <li>null</li>
                            <li>0</li>
                            <li>未定義（ランダム）</li>
                            <li>コンパイルエラー</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <!-- 解答 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Answer</span>
                <h2 class="section-title">5章 解説・解答</h2>
            </div>

            <div class="answer-list">
                <div class="answer-item">
                    <div class="answer-header">Q1の解答: B, C</div>
                    <div class="answer-content">
                        <p>A: 変数名は数字で始められません。D: <code>class</code>は予約語です。B: アンダースコアで始まる名前は有効です。C: ドル記号で始まる名前も有効です。</p>
                    </div>
                </div>

                <div class="answer-item">
                    <div class="answer-header">Q2の解答: B</div>
                    <div class="answer-content">
                        <p>Stringはイミュータブル（不変）なので、<code>toUpperCase()</code>は新しい文字列を返しますが、元の変数<code>s</code>は変更されません。結果を反映するには<code>s = s.toUpperCase();</code>とする必要があります。</p>
                    </div>
                </div>

                <div class="answer-item">
                    <div class="answer-header">Q3の解答: B</div>
                    <div class="answer-content">
                        <p>int型配列を<code>new</code>で生成すると、各要素はデフォルト値の0で初期化されます。参照型の場合はnull、booleanの場合はfalseになります。</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer">
        <p>Java Silver 試験対策 教科書</p>
    </footer>

    <div class="page-nav">
        <a href="4java-array.html" class="page-nav-btn prev">
            <span>&#8592;</span>
            <div>
                <div class="page-nav-label">前の章</div>
                <div class="page-nav-title">第4章</div>
            </div>
        </a>
        <a href="6java-operator.html" class="page-nav-btn next">
            <div>
                <div class="page-nav-label">次の章</div>
                <div class="page-nav-title">第6章</div>
            </div>
            <span>&#8594;</span>
        </a>
    </div>

    <script>
        function toggleMenu() {
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');
            toggle.classList.toggle('active');
            menu.classList.toggle('active');
        }

        document.addEventListener('click', function(e) {
            const nav = document.querySelector('.global-nav');
            const toggle = document.querySelector('.nav-toggle');
            const menu = document.querySelector('.nav-menu');

            if (!nav.contains(e.target) && menu.classList.contains('active')) {
                toggle.classList.remove('active');
                menu.classList.remove('active');
            }
        });
    </script>
    <script src="../../shared/demo.js"></script>
</body>
</html>
