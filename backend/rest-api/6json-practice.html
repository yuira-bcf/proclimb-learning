<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第6章 JSONデータの実践操作 - REST API & JSON入門</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../shared/common.css">
    <style>
      :root {
        --primary: #0097A7;
        --primary-dark: #00838F;
        --primary-light: #E0F7FA;
        --primary-lighter: #B2EBF2;
      }
      body { padding-top: 48px; }
      .nav-category-links { display: none; }
      /* 図解用スタイル */
      .visual-diagram {
        margin: 28px 0;
        padding: 28px 20px;
        background: linear-gradient(135deg, #f8fdfe 0%, #e6f7f9 100%);
        border-radius: 16px;
        border: 1px solid #b2ebf2;
      }
      .visual-diagram-title {
        text-align: center;
        font-size: 0.82rem;
        font-weight: 700;
        color: #0097A7;
        margin-bottom: 20px;
        letter-spacing: 0.05em;
      }
      .convert-flow {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 14px;
        flex-wrap: wrap;
      }
      .convert-box {
        background: white;
        border: 2px solid #0097A7;
        border-radius: 14px;
        padding: 18px 16px;
        text-align: center;
        min-width: 140px;
        box-shadow: 0 2px 8px rgba(0,151,167,0.08);
      }
      .convert-box.json-side {
        border-color: #FF6B35;
        background: #FFF8F5;
      }
      .convert-box.js-side {
        border-color: #0097A7;
        background: #F5FDFE;
      }
      .convert-box .box-icon { font-size: 2rem; display: block; margin-bottom: 6px; }
      .convert-box .box-label { font-size: 0.82rem; font-weight: 700; display: block; }
      .convert-box .box-sub { font-size: 0.68rem; opacity: 0.7; display: block; margin-top: 2px; }
      .convert-arrow {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        color: #0097A7;
        font-weight: 700;
      }
      .convert-arrow .arrow-icon { font-size: 1.4rem; }
      .convert-arrow .arrow-label { font-size: 0.62rem; white-space: nowrap; background: #E0F7FA; padding: 2px 8px; border-radius: 8px; }
      .lifecycle-flow {
        display: flex;
        flex-direction: column;
        gap: 0;
        align-items: center;
        max-width: 360px;
        margin: 0 auto;
      }
      .lifecycle-step {
        background: white;
        border: 2px solid #b2ebf2;
        border-radius: 12px;
        padding: 14px 18px;
        text-align: center;
        width: 100%;
        position: relative;
      }
      .lifecycle-step.active {
        border-color: #0097A7;
        background: #0097A7;
        color: white;
      }
      .lifecycle-step .step-num {
        font-size: 0.65rem;
        font-weight: 700;
        opacity: 0.6;
        display: block;
      }
      .lifecycle-step .step-label {
        font-size: 0.8rem;
        font-weight: 700;
        display: block;
      }
      .lifecycle-step .step-code {
        font-size: 0.68rem;
        font-family: 'JetBrains Mono', monospace;
        opacity: 0.8;
        display: block;
        margin-top: 2px;
      }
      .lifecycle-connector {
        width: 2px;
        height: 18px;
        background: #b2ebf2;
        position: relative;
      }
      .lifecycle-connector::after {
        content: '▼';
        position: absolute;
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.6rem;
        color: #0097A7;
      }
      .compare-cards {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }
      @media (max-width: 480px) {
        .compare-cards { grid-template-columns: 1fr; }
      }
      .compare-card {
        background: white;
        border: 2px solid #b2ebf2;
        border-radius: 14px;
        padding: 18px 14px;
        text-align: center;
      }
      .compare-card .card-icon { font-size: 1.8rem; display: block; margin-bottom: 6px; }
      .compare-card .card-title { font-size: 0.8rem; font-weight: 700; color: #0097A7; display: block; }
      .compare-card .card-code {
        font-size: 0.7rem;
        font-family: 'JetBrains Mono', monospace;
        background: #f5f5f5;
        padding: 8px;
        border-radius: 8px;
        margin-top: 8px;
        text-align: left;
        line-height: 1.6;
      }
    </style>
</head>
<body>
    <nav class="global-nav"></nav>
    <script src="../../shared/js/nav-rest-api.js"></script>

    <div class="container">
        <header class="chapter-header">
            <div class="chapter-badge"><span class="material-icons">menu_book</span> Chapter</div>
            <div class="chapter-number">6</div>
            <h1 class="chapter-title">JSONデータの実践操作</h1>
        </header>

        <nav class="toc">
            <h2 class="toc-title"><span class="material-icons">list_alt</span> この章の内容</h2>
            <ul class="toc-list">
                <li class="toc-item"><span class="toc-number">6-1</span><span>JSON.parse と JSON.stringify</span></li>
                <li class="toc-item"><span class="toc-number">6-2</span><span>fetch APIの基本</span></li>
                <li class="toc-item"><span class="toc-number">6-3</span><span>async / await</span></li>
                <li class="toc-item"><span class="toc-number">6-4</span><span>取得データのDOM描画</span></li>
                <li class="toc-item"><span class="toc-number">6-5</span><span>デバッグとトラブルシューティング</span></li>
            </ul>
        </nav>

        <!-- セクション 6-1 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 6-1</span>
                <h2 class="section-title">JSON.parse と JSON.stringify</h2>
            </div>

            <div class="intro-text">
                <p>JavaScriptでは、JSON文字列とJavaScriptオブジェクトの相互変換を行うための組み込みメソッドが用意されています。API通信の基本となる操作です。</p>
            </div>

            <!-- 図解: JSON変換フロー -->
            <div class="visual-diagram">
                <div class="visual-diagram-title">JSON.parse と JSON.stringify の変換フロー</div>
                <div class="convert-flow">
                    <div class="convert-box json-side">
                        <span class="box-icon">{ }</span>
                        <span class="box-label">JSON文字列</span>
                        <span class="box-sub">'{"name":"田中"}'</span>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:16px;align-items:center;">
                        <div class="convert-arrow">
                            <span class="arrow-label">JSON.parse()</span>
                            <span class="arrow-icon">→</span>
                        </div>
                        <div class="convert-arrow">
                            <span class="arrow-icon">←</span>
                            <span class="arrow-label">JSON.stringify()</span>
                        </div>
                    </div>
                    <div class="convert-box js-side">
                        <span class="box-icon">JS</span>
                        <span class="box-label">JSオブジェクト</span>
                        <span class="box-sub">{name: "田中"}</span>
                    </div>
                </div>
                <p style="text-align:center;font-size:0.7rem;color:#666;margin-top:14px;">APIからデータを<strong>受け取る</strong>ときは parse、<strong>送る</strong>ときは stringify</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.1 JSON.parse — 文字列 → オブジェクト</h3>
                <div class="content-block">
                    <p>JSON文字列をJavaScriptオブジェクトに変換します。APIから受け取ったデータを操作する際に使います。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">JSON.parse の使い方</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>// JSON文字列
const jsonString = '{"name": "田中太郎", "age": 28, "skills": ["HTML", "CSS"]}';

// JavaScriptオブジェクトに変換
const user = JSON.parse(jsonString);

console.log(user.name);    // "田中太郎"
console.log(user.age);     // 28
console.log(user.skills);  // ["HTML", "CSS"]</code></pre>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-header">
                            <span class="warning-box-icon"><span class="material-icons">warning</span></span>
                            <span class="warning-box-title">不正なJSONのエラー</span>
                        </div>
                        <p>不正なJSON文字列を<code>JSON.parse</code>に渡すと<code>SyntaxError</code>が発生します。APIからのレスポンスを解析する際は、try-catchでエラーハンドリングすることを推奨します。</p>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.2 JSON.stringify — オブジェクト → 文字列</h3>
                <div class="content-block">
                    <p>JavaScriptオブジェクトをJSON文字列に変換します。APIにデータを送信する際に使います。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">JSON.stringify の使い方</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>const user = {
  name: "田中太郎",
  age: 28,
  skills: ["HTML", "CSS"]
};

// JSON文字列に変換
const jsonString = JSON.stringify(user);
console.log(jsonString);
// '{"name":"田中太郎","age":28,"skills":["HTML","CSS"]}'

// 整形して出力（第3引数でインデント指定）
const pretty = JSON.stringify(user, null, 2);
console.log(pretty);
// {
//   "name": "田中太郎",
//   "age": 28,
//   "skills": ["HTML", "CSS"]
// }</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 6-2 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 6-2</span>
                <h2 class="section-title">fetch APIの基本</h2>
            </div>

            <div class="intro-text">
                <p>fetch APIは、ブラウザに組み込まれたHTTP通信の機能です。外部APIからデータを取得したり、データを送信したりするために使用します。</p>
            </div>

            <!-- 図解: fetch APIライフサイクル -->
            <div class="visual-diagram">
                <div class="visual-diagram-title">fetch API の処理フロー</div>
                <div class="lifecycle-flow">
                    <div class="lifecycle-step">
                        <span class="step-num">STEP 1</span>
                        <span class="step-label">fetch() でリクエスト送信</span>
                        <span class="step-code">fetch('https://api.example.com/data')</span>
                    </div>
                    <div class="lifecycle-connector"></div>
                    <div class="lifecycle-step">
                        <span class="step-num">STEP 2</span>
                        <span class="step-label">Promiseが返される（非同期）</span>
                        <span class="step-code">→ Promise&lt;Response&gt;</span>
                    </div>
                    <div class="lifecycle-connector"></div>
                    <div class="lifecycle-step active">
                        <span class="step-num">STEP 3</span>
                        <span class="step-label">レスポンスをJSONに変換</span>
                        <span class="step-code">.then(res =&gt; res.json())</span>
                    </div>
                    <div class="lifecycle-connector"></div>
                    <div class="lifecycle-step">
                        <span class="step-num">STEP 4</span>
                        <span class="step-label">データを使って処理</span>
                        <span class="step-code">.then(data =&gt; console.log(data))</span>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.1 GETリクエスト</h3>
                <div class="content-block">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">fetch でデータを取得</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>// GETリクエスト（最もシンプルな形）
fetch('https://jsonplaceholder.typicode.com/users/1')
  .then(response =&gt; response.json())  // レスポンスをJSONとして解析
  .then(data =&gt; {
    console.log(data.name);   // "Leanne Graham"
    console.log(data.email);  // "Sincere@april.biz"
  })
  .catch(error =&gt; {
    console.error('エラー:', error);
  });</code></pre>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">JSONPlaceholder</span>
                        </div>
                        <p><a href="https://jsonplaceholder.typicode.com" target="_blank">JSONPlaceholder</a>は、REST APIの学習やテストに使える無料のフェイクAPIです。ユーザー、投稿、コメントなどのダミーデータを返してくれます。</p>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.2 POSTリクエスト</h3>
                <div class="content-block">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">fetch でデータを送信</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>// POSTリクエスト（データの新規作成）
fetch('https://jsonplaceholder.typicode.com/posts', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    title: 'REST APIの学習',
    body: 'fetchを使ってAPIを呼び出す方法を学びました。',
    userId: 1
  })
})
  .then(response =&gt; response.json())
  .then(data =&gt; {
    console.log('作成されたデータ:', data);
  })
  .catch(error =&gt; {
    console.error('エラー:', error);
  });</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 6-3 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 6-3</span>
                <h2 class="section-title">async / await</h2>
            </div>

            <div class="intro-text">
                <p>async/awaitは、非同期処理をより読みやすく書くためのJavaScriptの構文です。Promiseチェーン（.then）の代わりに使えます。</p>
            </div>

            <!-- 図解: Promise vs async/await 比較 -->
            <div class="visual-diagram">
                <div class="visual-diagram-title">Promise チェーン vs async/await の書き方比較</div>
                <div class="compare-cards">
                    <div class="compare-card">
                        <span class="card-icon">&#128279;</span>
                        <span class="card-title">Promiseチェーン (.then)</span>
                        <div class="card-code">
                            fetch(url)<br>
                            &nbsp;&nbsp;.then(res =&gt; res.json())<br>
                            &nbsp;&nbsp;.then(data =&gt; { ... })<br>
                            &nbsp;&nbsp;.catch(err =&gt; { ... })
                        </div>
                    </div>
                    <div class="compare-card" style="border-color: #0097A7;">
                        <span class="card-icon">&#9889;</span>
                        <span class="card-title">async/await</span>
                        <div class="card-code">
                            const res = <strong>await</strong> fetch(url)<br>
                            const data = <strong>await</strong> res.json()<br>
                            // data をそのまま使える
                        </div>
                    </div>
                </div>
                <p style="text-align:center;font-size:0.7rem;color:#666;margin-top:14px;">async/awaitは同じ処理をより<strong>直感的</strong>に書ける。try-catchでエラーハンドリング</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.1 基本的な書き方</h3>
                <div class="content-block">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">async/await でAPIを呼び出す</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>// async関数の定義
async function getUser(userId) {
  try {
    // awaitでレスポンスを待つ
    const response = await fetch(
      `https://jsonplaceholder.typicode.com/users/${userId}`
    );

    // ステータスコードのチェック
    if (!response.ok) {
      throw new Error(`HTTP Error: ${response.status}`);
    }

    // JSONとして解析
    const user = await response.json();
    console.log(user.name);
    return user;

  } catch (error) {
    console.error('データ取得に失敗:', error.message);
  }
}

// 関数を呼び出す
getUser(1);</code></pre>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">response.ok とは</span>
                        </div>
                        <p><code>response.ok</code>は、ステータスコードが200〜299の範囲内かをチェックするプロパティです。fetchは404や500エラーでもPromiseをrejectしないため、<code>response.ok</code>で明示的にチェックする必要があります。</p>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.2 POSTリクエストの async/await 版</h3>
                <div class="content-block">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">async/await でデータ送信</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>async function createPost(postData) {
  try {
    const response = await fetch(
      'https://jsonplaceholder.typicode.com/posts',
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(postData)
      }
    );

    if (!response.ok) {
      throw new Error(`HTTP Error: ${response.status}`);
    }

    const created = await response.json();
    console.log('作成成功:', created);
    return created;

  } catch (error) {
    console.error('作成失敗:', error.message);
  }
}

// 使用例
createPost({
  title: 'async/awaitの学習',
  body: '非同期処理が読みやすくなりました。',
  userId: 1
});</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 6-4 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 6-4</span>
                <h2 class="section-title">取得データのDOM描画</h2>
            </div>

            <div class="intro-text">
                <p>APIから取得したデータをHTMLページに表示する方法を学びます。fetchで取得したJSONデータをDOM操作で画面に描画します。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.1 ユーザー一覧を表示する例</h3>
                <div class="content-block">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">HTML（表示先の要素）</span>
                            <span class="code-lang">HTML</span>
                        </div>
                        <pre class="code-content"><code>&lt;div id="user-list"&gt;読み込み中...&lt;/div&gt;</code></pre>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">JavaScript（データ取得 &amp; 描画）</span>
                            <span class="code-lang">JavaScript</span>
                        </div>
                        <pre class="code-content"><code>async function displayUsers() {
  const container = document.getElementById('user-list');

  try {
    const response = await fetch(
      'https://jsonplaceholder.typicode.com/users'
    );
    const users = await response.json();

    // HTMLを組み立て
    const html = users.map(user =&gt; `
      &lt;div class="user-card"&gt;
        &lt;h3&gt;${user.name}&lt;/h3&gt;
        &lt;p&gt;Email: ${user.email}&lt;/p&gt;
        &lt;p&gt;City: ${user.address.city}&lt;/p&gt;
      &lt;/div&gt;
    `).join('');

    container.innerHTML = html;

  } catch (error) {
    container.innerHTML = '&lt;p&gt;データの読み込みに失敗しました&lt;/p&gt;';
    console.error(error);
  }
}

// ページ読み込み時に実行
displayUsers();</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 6-5 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 6-5</span>
                <h2 class="section-title">デバッグとトラブルシューティング</h2>
            </div>

            <div class="intro-text">
                <p>API通信で問題が起きた時の調査方法と、よくあるエラーへの対処法を学びます。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">5.1 開発者ツールのNetworkタブ</h3>
                <div class="content-block">
                    <p>ブラウザの開発者ツール（F12）のNetworkタブで、API通信の詳細を確認できます。</p>

                    <div class="step-list">
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Networkタブを開く</h4>
                                <p>F12（またはCtrl+Shift+I）で開発者ツールを開き、「Network」タブを選択します。</p>
                            </div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>通信の一覧を確認</h4>
                                <p>APIリクエストを行うと、通信の一覧が表示されます。「XHR」や「Fetch」でフィルタすると見やすくなります。</p>
                            </div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>詳細を確認</h4>
                                <p>各リクエストをクリックすると、Headers（ヘッダー）、Preview（プレビュー）、Response（レスポンス本文）を確認できます。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">5.2 よくあるエラーと対処法</h3>
                <div class="content-block">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>エラー</th>
                                <th>原因</th>
                                <th>対処法</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>CORSエラー</strong></td>
                                <td>異なるオリジン間の通信がサーバーで許可されていない</td>
                                <td>サーバー側でCORSヘッダーを設定、またはプロキシを利用</td>
                            </tr>
                            <tr>
                                <td><strong>SyntaxError</strong></td>
                                <td>レスポンスがJSONではない（HTMLエラーページ等）</td>
                                <td>response.okを確認してからjson()を呼ぶ</td>
                            </tr>
                            <tr>
                                <td><strong>TypeError: Failed to fetch</strong></td>
                                <td>ネットワーク接続エラー、URLの間違い</td>
                                <td>URLを確認、ネットワーク接続を確認</td>
                            </tr>
                            <tr>
                                <td><strong>401 Unauthorized</strong></td>
                                <td>認証トークンが未送信・期限切れ</td>
                                <td>Authorizationヘッダーを正しく設定</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">CORSとは</span>
                        </div>
                        <p>CORS（Cross-Origin Resource Sharing）は、異なるドメイン間でのリソース共有を制御するブラウザのセキュリティ機能です。例えば、<code>localhost:3000</code>から<code>api.example.com</code>へのリクエストは、サーバーが明示的に許可しないとブラウザにブロックされます。詳しくは第8章で解説します。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 練習問題 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Exercise</span>
                <h2 class="section-title">6章 練習問題</h2>
            </div>

            <div class="exercise-list">
                <div class="exercise-item">
                    <div class="exercise-number">Q1</div>
                    <div class="exercise-content">
                        <p><code>JSON.parse()</code>の役割として正しいものはどれですか？</p>
                        <ol type="A">
                            <li>JavaScriptオブジェクトをJSON文字列に変換する</li>
                            <li>JSON文字列をJavaScriptオブジェクトに変換する</li>
                            <li>JSONファイルを読み込む</li>
                            <li>JSONデータをサーバーに送信する</li>
                        </ol>
                    </div>
                </div>

                <div class="exercise-item">
                    <div class="exercise-number">Q2</div>
                    <div class="exercise-content">
                        <p>fetch APIでPOSTリクエストを送信する際、ボディのJSON文字列化に使うメソッドはどれですか？</p>
                        <ol type="A">
                            <li><code>JSON.parse()</code></li>
                            <li><code>JSON.stringify()</code></li>
                            <li><code>JSON.encode()</code></li>
                            <li><code>JSON.toText()</code></li>
                        </ol>
                    </div>
                </div>

                <div class="exercise-item">
                    <div class="exercise-number">Q3</div>
                    <div class="exercise-content">
                        <p>fetchが404エラーを返した場合の動作として正しいものはどれですか？</p>
                        <ol type="A">
                            <li>Promiseが自動的にrejectされる</li>
                            <li>Promiseはresolveされるが、response.okがfalseになる</li>
                            <li>SyntaxErrorが発生する</li>
                            <li>ネットワークエラーが発生する</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <!-- 解答 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Answer</span>
                <h2 class="section-title">6章 解説・解答</h2>
            </div>

            <div class="answer-list">
                <div class="answer-item">
                    <div class="answer-header">Q1の解答: B</div>
                    <div class="answer-content">
                        <p><code>JSON.parse()</code>はJSON文字列をJavaScriptオブジェクトに変換します。逆方向（オブジェクト→文字列）は<code>JSON.stringify()</code>です。</p>
                    </div>
                </div>

                <div class="answer-item">
                    <div class="answer-header">Q2の解答: B</div>
                    <div class="answer-content">
                        <p>fetchのbodyにはJSON文字列を渡す必要があるため、<code>JSON.stringify()</code>でJavaScriptオブジェクトをJSON文字列に変換します。<code>JSON.encode()</code>や<code>JSON.toText()</code>はJavaScriptには存在しません。</p>
                    </div>
                </div>

                <div class="answer-item">
                    <div class="answer-header">Q3の解答: B</div>
                    <div class="answer-content">
                        <p>fetchは404や500のHTTPエラーでもPromiseをrejectしません。Promiseはresolveされますが、<code>response.ok</code>が<code>false</code>になります。Promiseがrejectされるのは、ネットワーク接続エラーなどの場合のみです。</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div class="page-nav">
        <a href="5rest-api-design.html" class="page-nav-btn prev">
            <span>&#8592;</span>
            <div>
                <div class="page-nav-label">前の章</div>
                <div class="page-nav-title">第5章 REST APIの設計</div>
            </div>
        </a>
        <a href="7api-testing.html" class="page-nav-btn next">
            <div>
                <div class="page-nav-label">次の章</div>
                <div class="page-nav-title">第7章 APIテストツール</div>
            </div>
            <span>&#8594;</span>
        </a>
    </div>

    <footer class="global-footer"></footer>
    <script src="../../shared/footer.js"></script>
    <script>
        document.addEventListener('click', function(e) {
            const header = document.querySelector('.global-header');
            const nav = document.querySelector('.tutorial-nav');
            const toggle = document.querySelector('.header-nav-toggle');
            if (header && nav && toggle && !header.contains(e.target) && !nav.contains(e.target) && nav.classList.contains('active')) {
                toggle.classList.remove('active');
                nav.classList.remove('active');
            }
        });
    </script>
    <script src="../../shared/demo.js"></script>
</body>
</html>
