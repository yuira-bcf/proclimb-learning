<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第7章 マージとリベース - Git & GitHub完全ガイド</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../shared/common.css">
    <style>
      :root {
        --primary: #F5A623;
        --primary-dark: #D4891D;
        --primary-light: #FEF7E8;
        --primary-lighter: #FDE4A8;
      }
      body { padding-top: 48px; }
      .nav-category-links { display: none; }
      /* 図解用スタイル */
      .visual-diagram {
        margin: 28px 0; padding: 28px 20px;
        background: linear-gradient(135deg, #fef7e8 0%, #fef7e8 100%);
        border-radius: 16px; border: 1px solid #fde4a8;
      }
      .visual-diagram-title {
        text-align: center; font-size: 0.82rem; font-weight: 700;
        color: #F5A623; margin-bottom: 20px; letter-spacing: 0.05em;
      }
      .vd-flow {
        display: flex; align-items: center; justify-content: center;
        gap: 10px; flex-wrap: wrap;
      }
      .vd-box {
        background: white; border: 2px solid #F5A623; border-radius: 14px;
        padding: 16px 14px; text-align: center; min-width: 110px;
        box-shadow: 0 2px 8px rgba(245,166,35,0.08);
      }
      .vd-box.accent { background: #F5A623; color: white; }
      .vd-box .vd-icon { font-size: 1.6rem; display: block; margin-bottom: 4px; }
      .vd-box .vd-label { font-size: 0.78rem; font-weight: 700; display: block; }
      .vd-box .vd-sub { font-size: 0.68rem; opacity: 0.7; display: block; margin-top: 2px; }
      .vd-arrow { color: #F5A623; font-size: 1.3rem; font-weight: 700; }
      .vd-grid {
        display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 12px;
      }
      .vd-card {
        background: white; border-radius: 12px; padding: 16px; text-align: center;
        border: 2px solid #fef7e8; box-shadow: 0 1px 4px rgba(0,0,0,0.04);
      }
      .vd-card .vd-icon { font-size: 1.8rem; display: block; margin-bottom: 6px; }
      .vd-card .vd-label { font-size: 0.78rem; font-weight: 700; display: block; color: #F5A623; }
      .vd-card .vd-sub { font-size: 0.68rem; color: #666; display: block; margin-top: 4px; }
      .vd-card.green { border-color: #a5d6a7; background: #f1f8e9; }
      .vd-card.red { border-color: #ef9a9a; background: #fce4ec; }
      .vd-card.blue { border-color: #90caf9; background: #e3f2fd; }
      .vd-card.amber { border-color: #ffe082; background: #fff8e1; }
      .vd-card.purple { border-color: #ce93d8; background: #f3e5f5; }
      .vd-bar {
        display: flex; border-radius: 12px; overflow: hidden; margin: 16px 0;
      }
      .vd-bar-seg {
        flex: 1; padding: 14px 8px; text-align: center; font-size: 0.72rem; font-weight: 600; color: white;
      }
      @media (max-width: 560px) {
        .vd-flow { flex-direction: column; }
        .vd-arrow { transform: rotate(90deg); }
        .vd-grid { grid-template-columns: repeat(2, 1fr); }
      }
    </style>
</head>
<body>
    <nav class="global-nav"></nav>
    <script src="../../shared/js/nav-git.js"></script>

    <div class="container">
        <header class="chapter-header">
            <div class="chapter-badge"><span class="material-icons">menu_book</span> Chapter</div>
            <div class="chapter-number">7</div>
            <h1 class="chapter-title">マージとリベース</h1>
        </header>

        <nav class="toc">
            <h2 class="toc-title"><span class="material-icons">list_alt</span> この章の内容</h2>
            <ul class="toc-list">
                <li class="toc-item"><span class="toc-number">7-1</span><span>マージとは（git merge）</span></li>
                <li class="toc-item"><span class="toc-number">7-2</span><span>Fast-forwardマージ</span></li>
                <li class="toc-item"><span class="toc-number">7-3</span><span>3-wayマージ</span></li>
                <li class="toc-item"><span class="toc-number">7-4</span><span>リベースとは（git rebase）</span></li>
                <li class="toc-item"><span class="toc-number">7-5</span><span>マージとリベースの使い分け</span></li>
            </ul>
        </nav>

        <!-- セクション 7-1 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 7-1</span>
                <h2 class="section-title">マージとは（git merge）</h2>
            </div>

            <div class="intro-text">
                <p>マージ（merge）は、あるブランチの変更を別のブランチに統合する操作です。例えば、<code>feature/login</code>ブランチで開発したログイン機能を<code>main</code>ブランチに取り込む場合にマージを使います。Gitにはいくつかのマージ方法があり、状況に応じて自動的に最適な方法が選択されます。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">1.1 マージの基本操作</h3>
                <div class="content-block">
                    <p>マージの基本的な流れは、<strong>取り込み先のブランチに切り替えてから</strong>、取り込みたいブランチを指定してマージします。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">マージの基本コマンド</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># 1. 取り込み先のブランチ（main）に切り替え
git switch main

# 2. feature/login ブランチの変更を main に取り込む
git merge feature/login
# 出力例:
# Updating a1b2c3d..e4f5g6h
# Fast-forward
#  login.html | 50 +++++++++++++++++++++
#  1 file changed, 50 insertions(+)

# 3. マージ完了後、不要になったブランチを削除
git branch -d feature/login</code></pre>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-header">
                            <span class="warning-box-icon"><span class="material-icons">warning</span></span>
                            <span class="warning-box-title">マージの方向に注意</span>
                        </div>
                        <p>マージは<strong>「現在いるブランチ」に「指定したブランチ」を取り込む</strong>操作です。<code>main</code>にfeatureブランチをマージしたい場合は、必ず先に<code>git switch main</code>で<code>main</code>ブランチに切り替えてください。逆にすると、featureブランチにmainの変更が取り込まれてしまいます。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 7-2 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 7-2</span>
                <h2 class="section-title">Fast-forwardマージ</h2>
            </div>

            <div class="intro-text">
                <p>Fast-forward（早送り）マージは、最もシンプルなマージの形式です。分岐後にmainブランチに新しいコミットがない場合に発生します。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">2.1 Fast-forwardマージの仕組み</h3>
                <div class="content-block">
                    <p>featureブランチが分岐した後、mainブランチに新しいコミットが追加されていなければ、Gitは単にmainのポインタをfeatureブランチの先端まで「早送り」するだけで統合が完了します。マージコミットは作成されません。</p>

<div class="visual-diagram">
    <div class="visual-diagram-title">&#9193; Fast-forward マージ vs 3-way マージ</div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <div style="background: white; border-radius: 12px; padding: 18px; border: 2px solid #a5d6a7;">
            <div style="text-align:center; font-weight:700; color:#2e7d32; font-size:0.8rem; margin-bottom:12px;">Fast-forward マージ</div>
            <div style="font-family:'JetBrains Mono',monospace; font-size:0.72rem; line-height:1.8; color:#333;">
                <div>main: A --- B</div>
                <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\</div>
                <div>feature: &nbsp;&nbsp;&nbsp;&nbsp;C --- D</div>
                <div style="color:#2e7d32; margin-top:8px;">&#8595; merge</div>
                <div style="margin-top:4px;">main: A --- B --- C --- D</div>
            </div>
            <div style="font-size:0.68rem; color:#666; margin-top:10px; text-align:center;">ポインタを移動するだけ<br>マージコミットなし</div>
        </div>
        <div style="background: white; border-radius: 12px; padding: 18px; border: 2px solid #90caf9;">
            <div style="text-align:center; font-weight:700; color:#1565c0; font-size:0.8rem; margin-bottom:12px;">3-way マージ</div>
            <div style="font-family:'JetBrains Mono',monospace; font-size:0.72rem; line-height:1.8; color:#333;">
                <div>main: &nbsp;&nbsp;&nbsp;A --- B --- E</div>
                <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\</div>
                <div>feature: &nbsp;&nbsp;&nbsp;&nbsp;C --- D</div>
                <div style="color:#1565c0; margin-top:8px;">&#8595; merge</div>
                <div style="margin-top:4px;">main: A--B--E------M</div>
                <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</div>
                <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C---D</div>
            </div>
            <div style="font-size:0.68rem; color:#666; margin-top:10px; text-align:center;">マージコミット(M)が作成される<br>両方の履歴を保持</div>
        </div>
    </div>
</div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Fast-forwardマージの例</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># mainブランチからfeatureブランチを作成
git switch main
git switch -c feature/add-footer

# featureブランチでコミット
echo "&lt;footer&gt;Copyright 2026&lt;/footer&gt;" >> index.html
git add index.html
git commit -m "フッターを追加"

# mainに戻ってマージ（mainには新しいコミットがない）
git switch main
git merge feature/add-footer
# 出力: Fast-forward （Fast-forwardマージが行われた）</code></pre>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">--no-ffオプション</span>
                        </div>
                        <p>Fast-forwardが可能な場合でも、<code>git merge --no-ff feature/add-footer</code>のように<code>--no-ff</code>オプションを使うと、強制的にマージコミットを作成できます。マージの履歴を明確に残したい場合に有用です。チームによっては常に<code>--no-ff</code>を使うルールにしていることもあります。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 7-3 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 7-3</span>
                <h2 class="section-title">3-wayマージ</h2>
            </div>

            <div class="intro-text">
                <p>3-wayマージは、双方のブランチに新しいコミットがある場合に行われるマージです。Gitが共通の祖先コミットと両ブランチの先端の3つのコミットを比較して、自動的に統合します。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.1 3-wayマージの仕組み</h3>
                <div class="content-block">
                    <p>「3-way」という名前は、マージの際にGitが参照する3つのポイントに由来します。</p>

                    <ul class="bullet-list">
                        <li><strong>共通の祖先（Base）</strong>: 両ブランチが分岐した時点のコミット</li>
                        <li><strong>現在のブランチの先端（Ours）</strong>: マージ先のブランチの最新コミット</li>
                        <li><strong>マージするブランチの先端（Theirs）</strong>: マージ元のブランチの最新コミット</li>
                    </ul>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">3-wayマージの例</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># featureブランチで作業中に、mainにも新しいコミットが追加された場合
git switch main
git merge feature/login
# 出力例:
# Merge made by the 'ort' strategy.
#  login.html | 50 +++++++++++++++++++++
#  auth.js    | 30 +++++++++++++++
#  2 files changed, 80 insertions(+)

# マージコミットが自動的に作成される
git log --oneline --graph
# 出力例:
# *   m1n2o3p (HEAD -> main) Merge branch 'feature/login'
# |\
# | * e4f5g6h ログイン機能を実装
# | * c3d4e5f ログインフォームのHTMLを作成
# * | h7i8j9k READMEを更新
# |/
# * a1b2c3d 初期コミット</code></pre>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">マージコミットのメッセージ</span>
                        </div>
                        <p>3-wayマージでは自動的にマージコミットが作成され、デフォルトで「Merge branch 'ブランチ名'」というコミットメッセージが設定されます。エディタが開いた場合は、そのまま保存して閉じれば大丈夫です。必要に応じてメッセージを編集することもできます。</p>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">3.2 コンフリクトが発生した場合</h3>
                <div class="content-block">
                    <p>両方のブランチで<strong>同じファイルの同じ箇所</strong>を変更していた場合、Gitは自動でマージできず<strong>コンフリクト（衝突）</strong>が発生します。この場合は手動で解決する必要があります。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">コンフリクトの表示例</span>
                            <span class="code-lang">ファイル内容</span>
                        </div>
                        <pre class="code-content"><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
&lt;h1&gt;Welcome to Our Site&lt;/h1&gt;
=======
&lt;h1&gt;Welcome to My Portfolio&lt;/h1&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature/redesign</code></pre>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">コンフリクトの解決手順</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># 1. コンフリクトが発生したファイルを確認
git status
# 出力: both modified: index.html

# 2. ファイルを開いて、コンフリクトマーカーを手動で修正
# &lt;&lt;&lt;&lt;&lt;&lt;&lt;、=======、&gt;&gt;&gt;&gt;&gt;&gt;&gt; を削除し、正しい内容にする

# 3. 修正したファイルをステージに追加
git add index.html

# 4. マージコミットを作成
git commit -m "feature/redesign をマージ（コンフリクト解決）"</code></pre>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-header">
                            <span class="warning-box-icon"><span class="material-icons">warning</span></span>
                            <span class="warning-box-title">コンフリクトのマーカーを残さないこと</span>
                        </div>
                        <p><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>、<code>=======</code>、<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>のマーカーが残ったままコミットしてしまうと、コードが壊れます。解決後は必ずマーカーが全て除去されていることを確認してください。コンフリクトの詳しい解決方法は第11章で扱います。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 7-4 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 7-4</span>
                <h2 class="section-title">リベースとは（git rebase）</h2>
            </div>

            <div class="intro-text">
                <p>リベース（rebase）は、あるブランチのコミットを別のブランチの先端に「付け替える」操作です。マージと同じく変更を統合しますが、コミット履歴が一直線になるという特徴があります。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.1 リベースの仕組み</h3>
                <div class="content-block">

<div class="visual-diagram">
    <div class="visual-diagram-title">&#128260; merge vs rebase - コミット履歴の違い</div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <div style="background: white; border-radius: 12px; padding: 18px; border: 2px solid #ef9a9a;">
            <div style="text-align:center; font-weight:700; color:#c62828; font-size:0.8rem; margin-bottom:12px;">git merge の結果</div>
            <div style="font-family:'JetBrains Mono',monospace; font-size:0.72rem; line-height:1.8; color:#333;">
                <div>* M (Merge commit)</div>
                <div>|\</div>
                <div>| * D (feature)</div>
                <div>| * C</div>
                <div>* | E (main)</div>
                <div>|/</div>
                <div>* B</div>
                <div>* A</div>
            </div>
            <div style="font-size:0.68rem; color:#666; margin-top:10px; text-align:center;">履歴が分岐して見える<br>マージコミットが作られる</div>
        </div>
        <div style="background: white; border-radius: 12px; padding: 18px; border: 2px solid #a5d6a7;">
            <div style="text-align:center; font-weight:700; color:#2e7d32; font-size:0.8rem; margin-bottom:12px;">git rebase の結果</div>
            <div style="font-family:'JetBrains Mono',monospace; font-size:0.72rem; line-height:1.8; color:#333;">
                <div>* D' (feature)</div>
                <div>* C'</div>
                <div>* E (main)</div>
                <div>* B</div>
                <div>* A</div>
            </div>
            <div style="font-size:0.68rem; color:#666; margin-top:10px; text-align:center;">履歴が一直線になる<br>コミットが再作成される</div>
        </div>
    </div>
    <p style="text-align:center; font-size:0.72rem; color:#888; margin-top:14px;">rebaseではC, DがC', D'として新しいコミットとして再作成される</p>
</div>

                    <p>リベースは、featureブランチのコミットを一つずつ取り出して、mainブランチの先端に順番に適用し直す操作です。結果として、まるで最初からmainの最新状態で開発していたかのような履歴になります。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">リベースの基本操作</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># featureブランチにいる状態で
git switch feature/login

# mainブランチの先端にリベース
git rebase main
# 出力例:
# Successfully rebased and updated refs/heads/feature/login.

# リベース後、mainに戻ってFast-forwardマージ
git switch main
git merge feature/login
# Fast-forward で一直線の履歴になる</code></pre>
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">4.2 リベース中のコンフリクト</h3>
                <div class="content-block">
                    <p>リベース中にもコンフリクトが発生する場合があります。マージとは異なり、リベースではコミットを一つずつ適用するため、複数回コンフリクトが発生することがあります。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">リベース中のコンフリクト解決</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># リベース中にコンフリクトが発生した場合
git rebase main
# 出力: CONFLICT (content): Merge conflict in index.html

# 1. コンフリクトを手動で解決
# 2. 解決したファイルをステージに追加
git add index.html

# 3. リベースを続行
git rebase --continue

# リベースを中止して元に戻したい場合
git rebase --abort</code></pre>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-header">
                            <span class="warning-box-icon"><span class="material-icons">warning</span></span>
                            <span class="warning-box-title">リベースの黄金律</span>
                        </div>
                        <p><strong>既にリモートにプッシュ済みのブランチをリベースしてはいけません。</strong>リベースはコミットを再作成するため、他のメンバーが既に取得したコミットが消えてしまいます。リベースは<strong>まだプッシュしていないローカルのコミット</strong>に対してのみ使用してください。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- セクション 7-5 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Section 7-5</span>
                <h2 class="section-title">マージとリベースの使い分け</h2>
            </div>

            <div class="intro-text">
                <p>マージとリベースはどちらもブランチを統合する方法ですが、それぞれにメリット・デメリットがあります。プロジェクトの方針に合わせて使い分けましょう。</p>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">5.1 比較表</h3>
                <div class="content-block">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>項目</th>
                                <th>merge</th>
                                <th>rebase</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>コミット履歴</strong></td>
                                <td>分岐の履歴が残る</td>
                                <td>一直線になる</td>
                            </tr>
                            <tr>
                                <td><strong>マージコミット</strong></td>
                                <td>作成される（3-way時）</td>
                                <td>作成されない</td>
                            </tr>
                            <tr>
                                <td><strong>安全性</strong></td>
                                <td>既存コミットを変更しない</td>
                                <td>コミットが再作成される</td>
                            </tr>
                            <tr>
                                <td><strong>コンフリクト</strong></td>
                                <td>一度に解決</td>
                                <td>コミットごとに解決が必要</td>
                            </tr>
                            <tr>
                                <td><strong>推奨場面</strong></td>
                                <td>チームの共有ブランチ</td>
                                <td>ローカルのみのブランチ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="subsection">
                <h3 class="subsection-title">5.2 実践的な使い分けガイド</h3>
                <div class="content-block">
                    <div class="feature-list">
                        <div class="feature-item">
                            <div class="feature-icon">&#9989;</div>
                            <div class="feature-content">
                                <h4>merge を使う場面</h4>
                                <p>プルリクエスト経由でmainにマージするとき、チームの共有ブランチを統合するとき、マージの事実を履歴に残したいとき。初学者はまずmergeから始めるのが安全です。</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">&#9989;</div>
                            <div class="feature-content">
                                <h4>rebase を使う場面</h4>
                                <p>ローカルでの作業中にmainの最新変更を取り込みたいとき、プッシュ前にコミット履歴をきれいにしたいとき、<code>git pull --rebase</code>でリモートの変更を取得するとき。</p>
                            </div>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">よくある rebase の使い方</span>
                            <span class="code-lang">Terminal</span>
                        </div>
                        <pre class="code-content"><code># featureブランチでの開発中にmainの最新を取り込む
git switch feature/signup
git rebase main
# → mainの最新コミットの上にfeatureのコミットが乗る

# git pullをrebaseモードで実行
git pull --rebase origin main
# → リモートの変更をrebaseで取り込む（マージコミットが作られない）</code></pre>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <span class="info-box-icon"><span class="material-icons">lightbulb</span></span>
                            <span class="info-box-title">チームの方針に従おう</span>
                        </div>
                        <p>mergeとrebaseのどちらを使うかは、チームやプロジェクトの方針によって異なります。入社したての場合やOSSに参加する場合は、まず既存の方針を確認してからそれに従いましょう。迷ったらmergeを使えば安全です。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 練習問題 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Exercise</span>
                <h2 class="section-title">7章 練習問題</h2>
            </div>

            <div class="exercise-list">
                <div class="exercise-item">
                    <div class="exercise-number">Q1</div>
                    <div class="exercise-content">
                        <p>mainブランチにfeature/loginブランチをマージしたいとき、正しい手順はどれですか？</p>
                        <ol type="A">
                            <li><code>git switch feature/login</code> してから <code>git merge main</code></li>
                            <li><code>git switch main</code> してから <code>git merge feature/login</code></li>
                            <li><code>git merge main feature/login</code></li>
                            <li><code>git switch feature/login</code> してから <code>git rebase main</code></li>
                        </ol>
                    </div>
                </div>

                <div class="exercise-item">
                    <div class="exercise-number">Q2</div>
                    <div class="exercise-content">
                        <p>Fast-forwardマージが行われる条件はどれですか？</p>
                        <ol type="A">
                            <li>コンフリクトが発生しない場合</li>
                            <li>マージ先のブランチに分岐後の新しいコミットがない場合</li>
                            <li>両方のブランチに新しいコミットがある場合</li>
                            <li><code>--ff</code>オプションを指定した場合</li>
                        </ol>
                    </div>
                </div>

                <div class="exercise-item">
                    <div class="exercise-number">Q3</div>
                    <div class="exercise-content">
                        <p>git rebaseの使用について、正しくないものはどれですか？</p>
                        <ol type="A">
                            <li>コミット履歴が一直線になる</li>
                            <li>既にプッシュ済みのブランチでも安全に使える</li>
                            <li>コンフリクト時は<code>git rebase --abort</code>で中止できる</li>
                            <li>コミットが再作成される</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <!-- 解答 -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">Answer</span>
                <h2 class="section-title">7章 解説・解答</h2>
            </div>

            <div class="answer-list">
                <div class="answer-item">
                    <div class="answer-header">Q1の解答: B</div>
                    <div class="answer-content">
                        <p>マージは「現在いるブランチに指定したブランチを取り込む」操作です。mainにfeature/loginをマージするには、まず<code>git switch main</code>でmainブランチに切り替え、次に<code>git merge feature/login</code>を実行します。Aの手順ではfeature/loginにmainが取り込まれてしまいます。</p>
                    </div>
                </div>

                <div class="answer-item">
                    <div class="answer-header">Q2の解答: B</div>
                    <div class="answer-content">
                        <p>Fast-forwardマージは、マージ先のブランチ（例: main）が分岐後に新しいコミットを持っていない場合にのみ発生します。この場合、ポインタを前に進めるだけでマージが完了するため、マージコミットは作成されません。両方のブランチにコミットがある場合は3-wayマージになります。</p>
                    </div>
                </div>

                <div class="answer-item">
                    <div class="answer-header">Q3の解答: B</div>
                    <div class="answer-content">
                        <p>既にリモートにプッシュ済みのブランチをリベースしてはいけません。リベースはコミットを再作成するため、他のメンバーが取得済みのコミットが消えてしまい、チーム内で混乱が生じます。リベースはプッシュ前のローカルコミットに対してのみ使用するのが安全です。</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div class="page-nav">
        <a href="6git-branch.html" class="page-nav-btn prev">
            <span>&#8592;</span>
            <div>
                <div class="page-nav-label">前の章</div>
                <div class="page-nav-title">第6章 ブランチの基礎と運用</div>
            </div>
        </a>
        <a href="8github-basics.html" class="page-nav-btn next">
            <div>
                <div class="page-nav-label">次の章</div>
                <div class="page-nav-title">第8章 GitHubの基礎と設定</div>
            </div>
            <span>&#8594;</span>
        </a>
    </div>

    <footer class="global-footer"></footer>
    <script src="../../shared/footer.js"></script>
    <script>
        document.addEventListener('click', function(e) {
            const header = document.querySelector('.global-header');
            const nav = document.querySelector('.tutorial-nav');
            const toggle = document.querySelector('.header-nav-toggle');
            if (header && nav && toggle && !header.contains(e.target) && !nav.contains(e.target) && nav.classList.contains('active')) {
                toggle.classList.remove('active');
                nav.classList.remove('active');
            }
        });
    </script>
    <script src="../../shared/demo.js"></script>
</body>
</html>